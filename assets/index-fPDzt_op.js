(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var $d={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function aA(){if(i0)return Vl;i0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=e,Vl.jsx=n,Vl.jsxs=n,Vl}var s0;function oA(){return s0||(s0=1,$d.exports=aA()),$d.exports}var b=oA(),Xd={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function lA(){if(a0)return Ce;a0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,H={};function B(M,re,ue){this.props=M,this.context=re,this.refs=H,this.updater=ue||N}B.prototype.isReactComponent={},B.prototype.setState=function(M,re){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,re,"setState")},B.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=B.prototype;function ie(M,re,ue){this.props=M,this.context=re,this.refs=H,this.updater=ue||N}var F=ie.prototype=new $;F.constructor=ie,k(F,B.prototype),F.isPureReactComponent=!0;var fe=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function C(M,re,ue,se,_e,Ie){return ue=Ie.ref,{$$typeof:i,type:M,key:re,ref:ue!==void 0?ue:null,props:Ie}}function R(M,re){return C(M.type,re,void 0,void 0,void 0,M.props)}function I(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function O(M){var re={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return re[ue]})}var V=/\/+/g;function U(M,re){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):re.toString(36)}function x(){}function pe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(x,x):(M.status="pending",M.then(function(re){M.status==="pending"&&(M.status="fulfilled",M.value=re)},function(re){M.status==="pending"&&(M.status="rejected",M.reason=re)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function de(M,re,ue,se,_e){var Ie=typeof M;(Ie==="undefined"||Ie==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(Ie){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case i:case e:we=!0;break;case v:return we=M._init,de(we(M._payload),re,ue,se,_e)}}if(we)return _e=_e(M),we=se===""?"."+U(M,0):se,fe(_e)?(ue="",we!=null&&(ue=we.replace(V,"$&/")+"/"),de(_e,re,ue,"",function(An){return An})):_e!=null&&(I(_e)&&(_e=R(_e,ue+(_e.key==null||M&&M.key===_e.key?"":(""+_e.key).replace(V,"$&/")+"/")+we)),re.push(_e)),1;we=0;var _t=se===""?".":se+":";if(fe(M))for(var Xe=0;Xe<M.length;Xe++)se=M[Xe],Ie=_t+U(se,Xe),we+=de(se,re,ue,Ie,_e);else if(Xe=w(M),typeof Xe=="function")for(M=Xe.call(M),Xe=0;!(se=M.next()).done;)se=se.value,Ie=_t+U(se,Xe++),we+=de(se,re,ue,Ie,_e);else if(Ie==="object"){if(typeof M.then=="function")return de(pe(M),re,ue,se,_e);throw re=String(M),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return we}function K(M,re,ue){if(M==null)return M;var se=[],_e=0;return de(M,se,"","",function(Ie){return re.call(ue,Ie,_e++)}),se}function oe(M){if(M._status===-1){var re=M._result;re=re(),re.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=re)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Be(){}return Ce.Children={map:K,forEach:function(M,re,ue){K(M,function(){re.apply(this,arguments)},ue)},count:function(M){var re=0;return K(M,function(){re++}),re},toArray:function(M){return K(M,function(re){return re})||[]},only:function(M){if(!I(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ce.Component=B,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=ie,Ce.StrictMode=s,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ae.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cloneElement=function(M,re,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=k({},M.props),_e=M.key,Ie=void 0;if(re!=null)for(we in re.ref!==void 0&&(Ie=void 0),re.key!==void 0&&(_e=""+re.key),re)!W.call(re,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&re.ref===void 0||(se[we]=re[we]);var we=arguments.length-2;if(we===1)se.children=ue;else if(1<we){for(var _t=Array(we),Xe=0;Xe<we;Xe++)_t[Xe]=arguments[Xe+2];se.children=_t}return C(M.type,_e,void 0,void 0,Ie,se)},Ce.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Ce.createElement=function(M,re,ue){var se,_e={},Ie=null;if(re!=null)for(se in re.key!==void 0&&(Ie=""+re.key),re)W.call(re,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(_e[se]=re[se]);var we=arguments.length-2;if(we===1)_e.children=ue;else if(1<we){for(var _t=Array(we),Xe=0;Xe<we;Xe++)_t[Xe]=arguments[Xe+2];_e.children=_t}if(M&&M.defaultProps)for(se in we=M.defaultProps,we)_e[se]===void 0&&(_e[se]=we[se]);return C(M,Ie,void 0,void 0,null,_e)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:m,render:M}},Ce.isValidElement=I,Ce.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:oe}},Ce.memo=function(M,re){return{$$typeof:g,type:M,compare:re===void 0?null:re}},Ce.startTransition=function(M){var re=ae.T,ue={};ae.T=ue;try{var se=M(),_e=ae.S;_e!==null&&_e(ue,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Be,ge)}catch(Ie){ge(Ie)}finally{ae.T=re}},Ce.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ce.use=function(M){return ae.H.use(M)},Ce.useActionState=function(M,re,ue){return ae.H.useActionState(M,re,ue)},Ce.useCallback=function(M,re){return ae.H.useCallback(M,re)},Ce.useContext=function(M){return ae.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,re){return ae.H.useDeferredValue(M,re)},Ce.useEffect=function(M,re,ue){var se=ae.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(M,re)},Ce.useId=function(){return ae.H.useId()},Ce.useImperativeHandle=function(M,re,ue){return ae.H.useImperativeHandle(M,re,ue)},Ce.useInsertionEffect=function(M,re){return ae.H.useInsertionEffect(M,re)},Ce.useLayoutEffect=function(M,re){return ae.H.useLayoutEffect(M,re)},Ce.useMemo=function(M,re){return ae.H.useMemo(M,re)},Ce.useOptimistic=function(M,re){return ae.H.useOptimistic(M,re)},Ce.useReducer=function(M,re,ue){return ae.H.useReducer(M,re,ue)},Ce.useRef=function(M){return ae.H.useRef(M)},Ce.useState=function(M){return ae.H.useState(M)},Ce.useSyncExternalStore=function(M,re,ue){return ae.H.useSyncExternalStore(M,re,ue)},Ce.useTransition=function(){return ae.H.useTransition()},Ce.version="19.1.1",Ce}var o0;function Fm(){return o0||(o0=1,Xd.exports=lA()),Xd.exports}var Y=Fm(),Wd={exports:{}},Pl={},Zd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function uA(){return l0||(l0=1,(function(i){function e(K,oe){var ge=K.length;K.push(oe);e:for(;0<ge;){var Be=ge-1>>>1,M=K[Be];if(0<o(M,oe))K[Be]=oe,K[ge]=M,ge=Be;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var oe=K[0],ge=K.pop();if(ge!==oe){K[0]=ge;e:for(var Be=0,M=K.length,re=M>>>1;Be<re;){var ue=2*(Be+1)-1,se=K[ue],_e=ue+1,Ie=K[_e];if(0>o(se,ge))_e<M&&0>o(Ie,se)?(K[Be]=Ie,K[_e]=ge,Be=_e):(K[Be]=se,K[ue]=ge,Be=ue);else if(_e<M&&0>o(Ie,ge))K[Be]=Ie,K[_e]=ge,Be=_e;else break e}}return oe}function o(K,oe){var ge=K.sortIndex-oe.sortIndex;return ge!==0?ge:K.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],v=1,S=null,w=3,N=!1,k=!1,H=!1,B=!1,$=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function fe(K){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=K)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function ae(K){if(H=!1,fe(K),!k)if(n(p)!==null)k=!0,W||(W=!0,U());else{var oe=n(g);oe!==null&&de(ae,oe.startTime-K)}}var W=!1,C=-1,R=5,I=-1;function O(){return B?!0:!(i.unstable_now()-I<R)}function V(){if(B=!1,W){var K=i.unstable_now();I=K;var oe=!0;try{e:{k=!1,H&&(H=!1,ie(C),C=-1),N=!0;var ge=w;try{t:{for(fe(K),S=n(p);S!==null&&!(S.expirationTime>K&&O());){var Be=S.callback;if(typeof Be=="function"){S.callback=null,w=S.priorityLevel;var M=Be(S.expirationTime<=K);if(K=i.unstable_now(),typeof M=="function"){S.callback=M,fe(K),oe=!0;break t}S===n(p)&&s(p),fe(K)}else s(p);S=n(p)}if(S!==null)oe=!0;else{var re=n(g);re!==null&&de(ae,re.startTime-K),oe=!1}}break e}finally{S=null,w=ge,N=!1}oe=void 0}}finally{oe?U():W=!1}}}var U;if(typeof F=="function")U=function(){F(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,pe=x.port2;x.port1.onmessage=V,U=function(){pe.postMessage(null)}}else U=function(){$(V,0)};function de(K,oe){C=$(function(){K(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(K){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var ge=w;w=oe;try{return K()}finally{w=ge}},i.unstable_requestPaint=function(){B=!0},i.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ge=w;w=K;try{return oe()}finally{w=ge}},i.unstable_scheduleCallback=function(K,oe,ge){var Be=i.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Be+ge:Be):ge=Be,K){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ge+M,K={id:v++,callback:oe,priorityLevel:K,startTime:ge,expirationTime:M,sortIndex:-1},ge>Be?(K.sortIndex=ge,e(g,K),n(p)===null&&K===n(g)&&(H?(ie(C),C=-1):H=!0,de(ae,ge-Be))):(K.sortIndex=M,e(p,K),k||N||(k=!0,W||(W=!0,U()))),K},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(K){var oe=w;return function(){var ge=w;w=oe;try{return K.apply(this,arguments)}finally{w=ge}}}})(Jd)),Jd}var u0;function cA(){return u0||(u0=1,Zd.exports=uA()),Zd.exports}var em={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function hA(){if(c0)return Xt;c0=1;var i=Fm();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:v}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Xt.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,v)},Xt.flushSync=function(p){var g=f.T,v=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=v,s.d.f()}},Xt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Xt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Xt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,S=m(v,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:N}):v==="script"&&s.d.X(p,{crossOrigin:S,integrity:w,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Xt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Xt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,S=m(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Xt.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Xt.requestFormReset=function(p){s.d.r(p)},Xt.unstable_batchedUpdates=function(p,g){return p(g)},Xt.useFormState=function(p,g,v){return f.H.useFormState(p,g,v)},Xt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Xt.version="19.1.1",Xt}var h0;function fA(){if(h0)return em.exports;h0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),em.exports=hA(),em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function dA(){if(f0)return Pl;f0=1;var i=cA(),e=Fm(),n=fA();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,T=h.child;T;){if(T===a){E=!0,a=h,l=d;break}if(T===l){E=!0,l=h,a=d;break}T=T.sibling}if(!E){for(T=d.child;T;){if(T===a){E=!0,a=d,l=h;break}if(T===l){E=!0,l=d,a=h;break}T=T.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),F=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case B:return"Profiler";case H:return"StrictMode";case ae:return"Suspense";case W:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case F:return(t.displayName||"Context")+".Provider";case ie:return(t._context.displayName||"Context")+".Consumer";case fe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:pe(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return pe(t(r))}catch{}}return null}var de=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Be=[],M=-1;function re(t){return{current:t}}function ue(t){0>M||(t.current=Be[M],Be[M]=null,M--)}function se(t,r){M++,Be[M]=t.current,t.current=r}var _e=re(null),Ie=re(null),we=re(null),_t=re(null);function Xe(t,r){switch(se(we,r),se(Ie,t),se(_e,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?O_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=O_(r),t=k_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(_e),se(_e,t)}function An(){ue(_e),ue(Ie),ue(we)}function Zn(t){t.memoizedState!==null&&se(_t,t);var r=_e.current,a=k_(r,t.type);r!==a&&(se(Ie,t),se(_e,a))}function Sn(t){Ie.current===t&&(ue(_e),ue(Ie)),_t.current===t&&(ue(_t),Nl._currentValue=ge)}var Cr=Object.prototype.hasOwnProperty,Jn=i.unstable_scheduleCallback,Ir=i.unstable_cancelCallback,pi=i.unstable_shouldYield,ha=i.unstable_requestPaint,tn=i.unstable_now,Io=i.unstable_getCurrentPriorityLevel,yi=i.unstable_ImmediatePriority,_i=i.unstable_UserBlockingPriority,er=i.unstable_NormalPriority,No=i.unstable_LowPriority,Nr=i.unstable_IdlePriority,ps=i.log,ys=i.unstable_setDisableYieldValue,st=null,qe=null;function nn(t){if(typeof ps=="function"&&ys(t),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(st,t)}catch{}}var Ot=Math.clz32?Math.clz32:Rn,fa=Math.log,da=Math.LN2;function Rn(t){return t>>>=0,t===0?32:31-(fa(t)/da|0)|0}var tr=256,Dr=4194304;function dn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function vi(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=dn(l):(E&=T,E!==0?h=dn(E):a||(a=T&~t,a!==0&&(h=dn(a))))):(T=l&~d,T!==0?h=dn(T):E!==0?h=dn(E):a||(a=l&~t,a!==0&&(h=dn(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function Or(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function mn(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Do(){var t=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),t}function Oo(){var t=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),t}function kr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Mr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ko(t,r,a,l,h,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=E&~a;0<a;){var Z=31-Ot(a),te=1<<Z;T[Z]=0,D[Z]=-1;var G=q[Z];if(G!==null)for(q[Z]=null,Z=0;Z<G.length;Z++){var Q=G[Z];Q!==null&&(Q.lane&=-536870913)}a&=~te}l!==0&&nr(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~r))}function nr(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Ot(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Mo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Ot(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Ei(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ma(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ti(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Z_(t.type))}function _u(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var at=Math.random().toString(36).slice(2),Rt="__reactFiber$"+at,vt="__reactProps$"+at,xn="__reactContainer$"+at,Vo="__reactEvents$"+at,Wh="__reactListeners$"+at,bi="__reactHandles$"+at,vu="__reactResources$"+at,_s="__reactMarker$"+at;function wi(t){delete t[Rt],delete t[vt],delete t[Vo],delete t[Wh],delete t[bi]}function Vr(t){var r=t[Rt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[xn]||a[Rt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=L_(t);t!==null;){if(a=t[Rt])return a;t=L_(t)}return r}t=a,a=t.parentNode}return null}function rr(t){if(t=t[Rt]||t[xn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function ir(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function rn(t){var r=t[vu];return r||(r=t[vu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function dt(t){t[_s]=!0}var Po=new Set,ga={};function Bn(t,r){Pr(t,r),Pr(t+"Capture",r)}function Pr(t,r){for(ga[t]=r,t=0;t<r.length;t++)Po.add(r[t])}var Eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tu={},vs={};function bu(t){return Cr.call(vs,t)?!0:Cr.call(Tu,t)?!1:Eu.test(t)?vs[t]=!0:(Tu[t]=!0,!1)}function Ai(t,r,a){if(bu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function sr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function zt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Es,wu;function Lr(t){if(Es===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Es=r&&r[1]||"",wu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Es+t+wu}var pa=!1;function ya(t,r){if(!t||pa)return"";pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Q){var G=Q}Reflect.construct(t,[],te)}else{try{te.call()}catch(Q){G=Q}t.call(te.prototype)}}else{try{throw Error()}catch(Q){G=Q}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],T=d[1];if(E&&T){var D=E.split(`
`),q=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===q.length)for(l=D.length-1,h=q.length-1;1<=l&&0<=h&&D[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==q[h]){var Z=`
`+D[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=h);break}}}finally{pa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Lr(a):""}function Lo(t){switch(t.tag){case 26:case 27:case 5:return Lr(t.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 15:return ya(t.type,!1);case 11:return ya(t.type.render,!1);case 1:return ya(t.type,!0);case 31:return Lr("Activity");default:return""}}function _a(t){try{var r="";do r+=Lo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Zh(t){var r=Uo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function va(t){t._valueTracker||(t._valueTracker=Zh(t))}function jo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Uo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Jh=/[\n"\\]/g;function Et(t){return t.replace(Jh,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gn(t,r,a,l,h,d,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+sn(r)):t.value!==""+sn(r)&&(t.value=""+sn(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?Si(t,E,sn(r)):a!=null?Si(t,E,sn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+sn(T):t.removeAttribute("name")}function bs(t,r,a,l,h,d,E,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+sn(a):"",r=r!=null?""+sn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function Si(t,r,a){r==="number"&&Ts(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ur(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+sn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function We(t,r,a){if(r!=null&&(r=""+sn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+sn(a):""}function ws(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(de(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=sn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Cn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var As=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Au(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||As.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function zo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Au(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&Au(t,d,r[d])}function Bo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ea(t){return tf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var jr=null;function In(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zr=null,Br=null;function qo(t){var r=rr(t);if(r&&(t=r.stateNode)){var a=t[vt]||null;e:switch(t=r.stateNode,r.type){case"input":if(gn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Et(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[vt]||null;if(!h)throw Error(s(90));gn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&jo(l)}break e;case"textarea":We(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ur(t,!!a.multiple,r,!1)}}}var ar=!1;function Su(t,r,a){if(ar)return t(r,a);ar=!0;try{var l=t(r);return l}finally{if(ar=!1,(zr!==null||Br!==null)&&(_c(),zr&&(r=zr,t=Br,Br=zr=null,qo(r),t)))for(r=0;r<t.length;r++)qo(t[r])}}function Ss(t,r){var a=t.stateNode;if(a===null)return null;var l=a[vt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(qn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{Nn=!1}var or=null,Ri=null,qr=null;function Ho(){if(qr)return qr;var t,r=Ri,a=r.length,l,h="value"in or?or.value:or.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[d-l];l++);return qr=h.slice(t,1<l?1-l:void 0)}function lr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function ur(){return!0}function Fo(){return!1}function kt(t){function r(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ur:Fo,this.isPropagationStopped=Fo,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),r}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=kt(Qe),xs=v({},Qe,{view:0,detail:0}),Ru=kt(xs),ba,wa,cr,Cs=v({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cr&&(cr&&t.type==="mousemove"?(ba=t.screenX-cr.screenX,wa=t.screenY-cr.screenY):wa=ba=0,cr=t),ba)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),Dn=kt(Cs),xu=v({},Cs,{dataTransfer:0}),nf=kt(xu),Is=v({},xs,{relatedTarget:0}),Aa=kt(Is),Go=v({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=kt(Go),Cu=v({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ra=kt(Cu),rf=v({},Qe,{data:0}),Qo=kt(rf),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ko(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Nu[t])?!!r[t]:!1}function Ds(){return Ko}var Du=v({},xs,{key:function(t){if(t.key){var r=Ns[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=lr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(t){return t.type==="keypress"?lr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xa=kt(Du),Ou=v({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=kt(Ou),Hr=v({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),ku=kt(Hr),Mu=v({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vu=kt(Mu),Pu=v({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ca=kt(Pu),an=v({},Qe,{newState:0,oldState:0}),Lu=kt(an),Uu=[9,13,27,32],hr=qn&&"CompositionEvent"in window,c=null;qn&&"documentMode"in document&&(c=document.documentMode);var y=qn&&"TextEvent"in window&&!c,_=qn&&(!hr||c&&8<c&&11>=c),A=" ",j=!1;function X(t,r){switch(t){case"keyup":return Uu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Le=!1;function xt(t,r){switch(t){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(j=!0,A);case"textInput":return t=r.data,t===A&&j?null:t;default:return null}}function Ue(t,r){if(Le)return t==="compositionend"||!hr&&X(t,r)?(t=Ho(),qr=Ri=or=null,Le=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Mt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Mt[t.type]:r==="textarea"}function Fr(t,r,a,l){zr?Br?Br.push(l):Br=[l]:zr=l,r=Ac(r,"onChange"),0<r.length&&(a=new Ta("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Bt=null,fr=null;function $o(t){x_(t,0)}function ju(t){var r=ir(t);if(jo(r))return t}function Yg(t,r){if(t==="change")return r}var $g=!1;if(qn){var sf;if(qn){var af="oninput"in document;if(!af){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),af=typeof Xg.oninput=="function"}sf=af}else sf=!1;$g=sf&&(!document.documentMode||9<document.documentMode)}function Wg(){Bt&&(Bt.detachEvent("onpropertychange",Zg),fr=Bt=null)}function Zg(t){if(t.propertyName==="value"&&ju(fr)){var r=[];Fr(r,fr,t,In(t)),Su($o,r)}}function Pb(t,r,a){t==="focusin"?(Wg(),Bt=r,fr=a,Bt.attachEvent("onpropertychange",Zg)):t==="focusout"&&Wg()}function Lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(fr)}function Ub(t,r){if(t==="click")return ju(r)}function jb(t,r){if(t==="input"||t==="change")return ju(r)}function zb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var pn=typeof Object.is=="function"?Object.is:zb;function Xo(t,r){if(pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Cr.call(r,h)||!pn(t[h],r[h]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,r){var a=Jg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jg(a)}}function tp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?tp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function np(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ts(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ts(t.document)}return r}function of(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Bb=qn&&"documentMode"in document&&11>=document.documentMode,Ia=null,lf=null,Wo=null,uf=!1;function rp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;uf||Ia==null||Ia!==Ts(l)||(l=Ia,"selectionStart"in l&&of(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wo&&Xo(Wo,l)||(Wo=l,l=Ac(lf,"onSelect"),0<l.length&&(r=new Ta("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ia)))}function Os(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Na={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},cf={},ip={};qn&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function ks(t){if(cf[t])return cf[t];if(!Na[t])return t;var r=Na[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in ip)return cf[t]=r[a];return t}var sp=ks("animationend"),ap=ks("animationiteration"),op=ks("animationstart"),qb=ks("transitionrun"),Hb=ks("transitionstart"),Fb=ks("transitioncancel"),lp=ks("transitionend"),up=new Map,hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hf.push("scrollEnd");function Hn(t,r){up.set(t,r),Bn(r,[t])}var cp=new WeakMap;function On(t,r){if(typeof t=="object"&&t!==null){var a=cp.get(t);return a!==void 0?a:(r={value:t,source:r,stack:_a(r)},cp.set(t,r),r)}return{value:t,source:r,stack:_a(r)}}var kn=[],Da=0,ff=0;function zu(){for(var t=Da,r=ff=Da=0;r<t;){var a=kn[r];kn[r++]=null;var l=kn[r];kn[r++]=null;var h=kn[r];kn[r++]=null;var d=kn[r];if(kn[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&hp(a,h,d)}}function Bu(t,r,a,l){kn[Da++]=t,kn[Da++]=r,kn[Da++]=a,kn[Da++]=l,ff|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function df(t,r,a,l){return Bu(t,r,a,l),qu(t)}function Oa(t,r){return Bu(t,null,null,r),qu(t)}function hp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Ot(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function qu(t){if(50<bl)throw bl=0,vd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ka={};function Gb(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,r,a,l){return new Gb(t,r,a,l)}function mf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gr(t,r){var a=t.alternate;return a===null?(a=yn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function fp(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Hu(t,r,a,l,h,d){var E=0;if(l=t,typeof t=="function")mf(t)&&(E=1);else if(typeof t=="string")E=Kw(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=yn(31,a,r,h),t.elementType=I,t.lanes=d,t;case k:return Ms(a.children,h,d,r);case H:E=8,h|=24;break;case B:return t=yn(12,a,r,h|2),t.elementType=B,t.lanes=d,t;case ae:return t=yn(13,a,r,h),t.elementType=ae,t.lanes=d,t;case W:return t=yn(19,a,r,h),t.elementType=W,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:case F:E=10;break e;case ie:E=9;break e;case fe:E=11;break e;case C:E=14;break e;case R:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=yn(E,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ms(t,r,a,l){return t=yn(7,t,l,r),t.lanes=a,t}function gf(t,r,a){return t=yn(6,t,null,r),t.lanes=a,t}function pf(t,r,a){return r=yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ma=[],Va=0,Fu=null,Gu=0,Mn=[],Vn=0,Vs=null,Qr=1,Kr="";function Ps(t,r){Ma[Va++]=Gu,Ma[Va++]=Fu,Fu=t,Gu=r}function dp(t,r,a){Mn[Vn++]=Qr,Mn[Vn++]=Kr,Mn[Vn++]=Vs,Vs=t;var l=Qr;t=Kr;var h=32-Ot(l)-1;l&=~(1<<h),a+=1;var d=32-Ot(r)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Qr=1<<32-Ot(r)+h|a<<h|l,Kr=d+t}else Qr=1<<d|a<<h|l,Kr=t}function yf(t){t.return!==null&&(Ps(t,1),dp(t,1,0))}function _f(t){for(;t===Fu;)Fu=Ma[--Va],Ma[Va]=null,Gu=Ma[--Va],Ma[Va]=null;for(;t===Vs;)Vs=Mn[--Vn],Mn[Vn]=null,Kr=Mn[--Vn],Mn[Vn]=null,Qr=Mn[--Vn],Mn[Vn]=null}var on=null,ht=null,Fe=!1,Ls=null,dr=!1,vf=Error(s(519));function Us(t){var r=Error(s(418,""));throw el(On(r,t)),vf}function mp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Rt]=t,r[vt]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<Al.length;a++)ke(Al[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),bs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),va(r);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),ws(r,l.value,l.defaultValue,l.children),va(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||D_(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=Sc),r=!0):r=!1,r||Us(t)}function gp(t){for(on=t.return;on;)switch(on.tag){case 5:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:on=on.return}}function Zo(t){if(t!==on)return!1;if(!Fe)return gp(t),Fe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Vd(t.type,t.memoizedProps)),a=!a),a&&ht&&Us(t),gp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){ht=Gn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}ht=null}}else r===27?(r=ht,qi(t.type)?(t=jd,jd=null,ht=t):ht=r):ht=on?Gn(t.stateNode.nextSibling):null;return!0}function Jo(){ht=on=null,Fe=!1}function pp(){var t=Ls;return t!==null&&(cn===null?cn=t:cn.push.apply(cn,t),Ls=null),t}function el(t){Ls===null?Ls=[t]:Ls.push(t)}var Ef=re(null),js=null,Yr=null;function xi(t,r,a){se(Ef,r._currentValue),r._currentValue=a}function $r(t){t._currentValue=Ef.current,ue(Ef)}function Tf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function bf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var D=0;D<r.length;D++)if(T.context===r[D]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Tf(d.return,a,t),l||(E=null);break e}d=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Tf(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function tl(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var T=h.type;pn(h.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(h===_t.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Nl):t=[Nl])}h=h.return}t!==null&&bf(r,t,a,l),r.flags|=262144}function Qu(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zs(t){js=t,Yr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return yp(js,t)}function Ku(t,r){return js===null&&zs(t),yp(t,r)}function yp(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Yr===null){if(t===null)throw Error(s(308));Yr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Yr=Yr.next=r;return a}var Qb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Kb=i.unstable_scheduleCallback,Yb=i.unstable_NormalPriority,It={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wf(){return{controller:new Qb,data:new Map,refCount:0}}function nl(t){t.refCount--,t.refCount===0&&Kb(Yb,function(){t.controller.abort()})}var rl=null,Af=0,Pa=0,La=null;function $b(t,r){if(rl===null){var a=rl=[];Af=0,Pa=Rd(),La={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Af++,r.then(_p,_p),r}function _p(){if(--Af===0&&rl!==null){La!==null&&(La.status="fulfilled");var t=rl;rl=null,Pa=0,La=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Xb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var vp=K.S;K.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&$b(t,r),vp!==null&&vp(t,r)};var Bs=re(null);function Sf(){var t=Bs.current;return t!==null?t:nt.pooledCache}function Yu(t,r){r===null?se(Bs,Bs.current):se(Bs,r.pool)}function Ep(){var t=Sf();return t===null?null:{parent:It._currentValue,pool:t}}var il=Error(s(460)),Tp=Error(s(474)),$u=Error(s(542)),Rf={then:function(){}};function bp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xu(){}function wp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Xu,Xu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Sp(t),t;default:if(typeof r.status=="string")r.then(Xu,Xu);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Sp(t),t}throw sl=r,il}}var sl=null;function Ap(){if(sl===null)throw Error(s(459));var t=sl;return sl=null,t}function Sp(t){if(t===il||t===$u)throw Error(s(483))}var Ci=!1;function xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ii(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ni(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=qu(t),hp(t,null,a),r}return Bu(t,l,r,a),qu(t)}function al(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Mo(t,a)}}function If(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Nf=!1;function ol(){if(Nf){var t=La;if(t!==null)throw t}}function ll(t,r,a,l){Nf=!1;var h=t.updateQueue;Ci=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,q=D.next;D.next=null,E===null?d=q:E.next=q,E=D;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==E&&(T===null?Z.firstBaseUpdate=q:T.next=q,Z.lastBaseUpdate=D))}if(d!==null){var te=h.baseState;E=0,Z=q=D=null,T=d;do{var G=T.lane&-536870913,Q=G!==T.lane;if(Q?(je&G)===G:(l&G)===G){G!==0&&G===Pa&&(Nf=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ae=t,Ee=T;G=r;var et=a;switch(Ee.tag){case 1:if(Ae=Ee.payload,typeof Ae=="function"){te=Ae.call(et,te,G);break e}te=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ee.payload,G=typeof Ae=="function"?Ae.call(et,te,G):Ae,G==null)break e;te=v({},te,G);break e;case 2:Ci=!0}}G=T.callback,G!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(q=Z=Q,D=te):Z=Z.next=Q,E|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);Z===null&&(D=te),h.baseState=D,h.firstBaseUpdate=q,h.lastBaseUpdate=Z,d===null&&(h.shared.lanes=0),Ui|=E,t.lanes=E,t.memoizedState=te}}function Rp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function xp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Rp(a[t],r)}var Ua=re(null),Wu=re(0);function Cp(t,r){t=ni,se(Wu,t),se(Ua,r),ni=t|r.baseLanes}function Df(){se(Wu,ni),se(Ua,Ua.current)}function Of(){ni=Wu.current,ue(Ua),ue(Wu)}var Di=0,Ne=null,Ze=null,Tt=null,Zu=!1,ja=!1,qs=!1,Ju=0,ul=0,za=null,Wb=0;function mt(){throw Error(s(321))}function kf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!pn(t[a],r[a]))return!1;return!0}function Mf(t,r,a,l,h,d){return Di=d,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=t===null||t.memoizedState===null?hy:fy,qs=!1,d=a(l,h),qs=!1,ja&&(d=Np(r,a,l,h)),Ip(t),d}function Ip(t){K.H=sc;var r=Ze!==null&&Ze.next!==null;if(Di=0,Tt=Ze=Ne=null,Zu=!1,ul=0,za=null,r)throw Error(s(300));t===null||Vt||(t=t.dependencies,t!==null&&Qu(t)&&(Vt=!0))}function Np(t,r,a,l){Ne=t;var h=0;do{if(ja&&(za=null),ul=0,ja=!1,25<=h)throw Error(s(301));if(h+=1,Tt=Ze=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=iw,d=r(a,l)}while(ja);return d}function Zb(){var t=K.H,r=t.useState()[0];return r=typeof r.then=="function"?cl(r):r,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ne.flags|=1024),r}function Vf(){var t=Ju!==0;return Ju=0,t}function Pf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Lf(t){if(Zu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Zu=!1}Di=0,Tt=Ze=Ne=null,ja=!1,ul=Ju=0,za=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ne.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function bt(){if(Ze===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var r=Tt===null?Ne.memoizedState:Tt.next;if(r!==null)Tt=r,Ze=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Tt===null?Ne.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Uf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(t){var r=ul;return ul+=1,za===null&&(za=[]),t=wp(za,t,r),r=Ne,(Tt===null?r.memoizedState:Tt.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?hy:fy),t}function ec(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cl(t);if(t.$$typeof===F)return $t(t)}throw Error(s(438,String(t)))}function jf(t){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Uf(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=O;return r.index++,a}function Xr(t,r){return typeof r=="function"?r(t):r}function tc(t){var r=bt();return zf(r,Ze,t)}function zf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=E=null,D=null,q=r,Z=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(je&te)===te:(Di&te)===te){var G=q.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===Pa&&(Z=!0);else if((Di&G)===G){q=q.next,G===Pa&&(Z=!0);continue}else te={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=te,E=d):D=D.next=te,Ne.lanes|=G,Ui|=G;te=q.action,qs&&a(d,te),d=q.hasEagerState?q.eagerState:a(d,te)}else G={lane:te,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=G,E=d):D=D.next=G,Ne.lanes|=te,Ui|=te;q=q.next}while(q!==null&&q!==r);if(D===null?E=d:D.next=T,!pn(d,t.memoizedState)&&(Vt=!0,Z&&(a=La,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=D,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Bf(t){var r=bt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);pn(d,r.memoizedState)||(Vt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function Dp(t,r,a){var l=Ne,h=bt(),d=Fe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!pn((Ze||h).memoizedState,a);E&&(h.memoizedState=a,Vt=!0),h=h.queue;var T=Mp.bind(null,l,h,t);if(hl(2048,8,T,[t]),h.getSnapshot!==r||E||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Ba(9,nc(),kp.bind(null,l,h,a,r),null),nt===null)throw Error(s(349));d||(Di&124)!==0||Op(l,r,a)}return a}function Op(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=Uf(),Ne.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function kp(t,r,a,l){r.value=a,r.getSnapshot=l,Vp(r)&&Pp(t)}function Mp(t,r,a){return a(function(){Vp(r)&&Pp(t)})}function Vp(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!pn(t,a)}catch{return!0}}function Pp(t){var r=Oa(t,2);r!==null&&bn(r,t,2)}function qf(t){var r=ln();if(typeof t=="function"){var a=t;if(t=a(),qs){nn(!0);try{a()}finally{nn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:t},r}function Lp(t,r,a,l){return t.baseState=a,zf(t,Ze,typeof l=="function"?l:Xr)}function Jb(t,r,a,l,h){if(ic(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Up(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Up(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=K.T,E={};K.T=E;try{var T=a(h,l),D=K.S;D!==null&&D(E,T),jp(t,r,T)}catch(q){Hf(t,r,q)}finally{K.T=d}}else try{d=a(h,l),jp(t,r,d)}catch(q){Hf(t,r,q)}}function jp(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){zp(t,r,l)},function(l){return Hf(t,r,l)}):zp(t,r,a)}function zp(t,r,a){r.status="fulfilled",r.value=a,Bp(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Up(t,a)))}function Hf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Bp(r),r=r.next;while(r!==l)}t.action=null}function Bp(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function qp(t,r){return r}function Hp(t,r){if(Fe){var a=nt.formState;if(a!==null){e:{var l=Ne;if(Fe){if(ht){t:{for(var h=ht,d=dr;h.nodeType!==8;){if(!d){h=null;break t}if(h=Gn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ht=Gn(h.nextSibling),l=h.data==="F!";break e}}Us(l)}l=!1}l&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qp,lastRenderedState:r},a.queue=l,a=ly.bind(null,Ne,l),l.dispatch=a,l=qf(!1),d=Yf.bind(null,Ne,!1,l.queue),l=ln(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=Jb.bind(null,Ne,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Fp(t){var r=bt();return Gp(r,Ze,t)}function Gp(t,r,a){if(r=zf(t,r,qp)[0],t=tc(Xr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=cl(r)}catch(E){throw E===il?$u:E}else l=r;r=bt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,Ba(9,nc(),ew.bind(null,h,a),null)),[l,d,t]}function ew(t,r){t.action=r}function Qp(t){var r=bt(),a=Ze;if(a!==null)return Gp(r,a,t);bt(),r=r.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ba(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=Uf(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function nc(){return{destroy:void 0,resource:void 0}}function Kp(){return bt().memoizedState}function rc(t,r,a,l){var h=ln();l=l===void 0?null:l,Ne.flags|=t,h.memoizedState=Ba(1|r,nc(),a,l)}function hl(t,r,a,l){var h=bt();l=l===void 0?null:l;var d=h.memoizedState.inst;Ze!==null&&l!==null&&kf(l,Ze.memoizedState.deps)?h.memoizedState=Ba(r,d,a,l):(Ne.flags|=t,h.memoizedState=Ba(1|r,d,a,l))}function Yp(t,r){rc(8390656,8,t,r)}function $p(t,r){hl(2048,8,t,r)}function Xp(t,r){return hl(4,2,t,r)}function Wp(t,r){return hl(4,4,t,r)}function Zp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Jp(t,r,a){a=a!=null?a.concat([t]):null,hl(4,4,Zp.bind(null,r,t),a)}function Ff(){}function ey(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&kf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function ty(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&kf(r,l[1]))return l[0];if(l=t(),qs){nn(!0);try{t()}finally{nn(!1)}}return a.memoizedState=[l,r],l}function Gf(t,r,a){return a===void 0||(Di&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=i_(),Ne.lanes|=t,Ui|=t,a)}function ny(t,r,a,l){return pn(a,r)?a:Ua.current!==null?(t=Gf(t,a,l),pn(t,r)||(Vt=!0),t):(Di&42)===0?(Vt=!0,t.memoizedState=a):(t=i_(),Ne.lanes|=t,Ui|=t,r)}function ry(t,r,a,l,h){var d=oe.p;oe.p=d!==0&&8>d?d:8;var E=K.T,T={};K.T=T,Yf(t,!1,r,a);try{var D=h(),q=K.S;if(q!==null&&q(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=Xb(D,l);fl(t,r,Z,Tn(t))}else fl(t,r,l,Tn(t))}catch(te){fl(t,r,{then:function(){},status:"rejected",reason:te},Tn())}finally{oe.p=d,K.T=E}}function tw(){}function Qf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=iy(t).queue;ry(t,h,r,ge,a===null?tw:function(){return sy(t),a(l)})}function iy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:ge},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function sy(t){var r=iy(t).next.queue;fl(t,r,{},Tn())}function Kf(){return $t(Nl)}function ay(){return bt().memoizedState}function oy(){return bt().memoizedState}function nw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Tn();t=Ii(a);var l=Ni(r,t,a);l!==null&&(bn(l,r,a),al(l,r,a)),r={cache:wf()},t.payload=r;return}r=r.return}}function rw(t,r,a){var l=Tn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ic(t)?uy(r,a):(a=df(t,r,a,l),a!==null&&(bn(a,t,l),cy(a,r,l)))}function ly(t,r,a){var l=Tn();fl(t,r,a,l)}function fl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(t))uy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var E=r.lastRenderedState,T=d(E,a);if(h.hasEagerState=!0,h.eagerState=T,pn(T,E))return Bu(t,r,h,0),nt===null&&zu(),!1}catch{}finally{}if(a=df(t,r,h,l),a!==null)return bn(a,t,l),cy(a,r,l),!0}return!1}function Yf(t,r,a,l){if(l={lane:2,revertLane:Rd(),action:l,hasEagerState:!1,eagerState:null,next:null},ic(t)){if(r)throw Error(s(479))}else r=df(t,a,l,2),r!==null&&bn(r,t,2)}function ic(t){var r=t.alternate;return t===Ne||r!==null&&r===Ne}function uy(t,r){ja=Zu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function cy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Mo(t,a)}}var sc={readContext:$t,use:ec,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},hy={readContext:$t,use:ec,useCallback:function(t,r){return ln().memoizedState=[t,r===void 0?null:r],t},useContext:$t,useEffect:Yp,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,rc(4194308,4,Zp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return rc(4194308,4,t,r)},useInsertionEffect:function(t,r){rc(4,2,t,r)},useMemo:function(t,r){var a=ln();r=r===void 0?null:r;var l=t();if(qs){nn(!0);try{t()}finally{nn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=ln();if(a!==void 0){var h=a(r);if(qs){nn(!0);try{a(r)}finally{nn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=rw.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var r=ln();return t={current:t},r.memoizedState=t},useState:function(t){t=qf(t);var r=t.queue,a=ly.bind(null,Ne,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Ff,useDeferredValue:function(t,r){var a=ln();return Gf(a,t,r)},useTransition:function(){var t=qf(!1);return t=ry.bind(null,Ne,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ne,h=ln();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(je&124)!==0||Op(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Yp(Mp.bind(null,l,d,t),[t]),l.flags|=2048,Ba(9,nc(),kp.bind(null,l,d,a,r),null),a},useId:function(){var t=ln(),r=nt.identifierPrefix;if(Fe){var a=Kr,l=Qr;a=(l&~(1<<32-Ot(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Ju++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=Wb++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:Kf,useFormState:Hp,useActionState:Hp,useOptimistic:function(t){var r=ln();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Yf.bind(null,Ne,!0,a),a.dispatch=r,[t,r]},useMemoCache:jf,useCacheRefresh:function(){return ln().memoizedState=nw.bind(null,Ne)}},fy={readContext:$t,use:ec,useCallback:ey,useContext:$t,useEffect:$p,useImperativeHandle:Jp,useInsertionEffect:Xp,useLayoutEffect:Wp,useMemo:ty,useReducer:tc,useRef:Kp,useState:function(){return tc(Xr)},useDebugValue:Ff,useDeferredValue:function(t,r){var a=bt();return ny(a,Ze.memoizedState,t,r)},useTransition:function(){var t=tc(Xr)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:cl(t),r]},useSyncExternalStore:Dp,useId:ay,useHostTransitionStatus:Kf,useFormState:Fp,useActionState:Fp,useOptimistic:function(t,r){var a=bt();return Lp(a,Ze,t,r)},useMemoCache:jf,useCacheRefresh:oy},iw={readContext:$t,use:ec,useCallback:ey,useContext:$t,useEffect:$p,useImperativeHandle:Jp,useInsertionEffect:Xp,useLayoutEffect:Wp,useMemo:ty,useReducer:Bf,useRef:Kp,useState:function(){return Bf(Xr)},useDebugValue:Ff,useDeferredValue:function(t,r){var a=bt();return Ze===null?Gf(a,t,r):ny(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Bf(Xr)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:cl(t),r]},useSyncExternalStore:Dp,useId:ay,useHostTransitionStatus:Kf,useFormState:Qp,useActionState:Qp,useOptimistic:function(t,r){var a=bt();return Ze!==null?Lp(a,Ze,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:oy},qa=null,dl=0;function ac(t){var r=dl;return dl+=1,qa===null&&(qa=[]),wp(qa,t,r)}function ml(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function oc(t,r){throw r.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function dy(t){var r=t._init;return r(t._payload)}function my(t){function r(L,P){if(t){var z=L.deletions;z===null?(L.deletions=[P],L.flags|=16):z.push(P)}}function a(L,P){if(!t)return null;for(;P!==null;)r(L,P),P=P.sibling;return null}function l(L){for(var P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function h(L,P){return L=Gr(L,P),L.index=0,L.sibling=null,L}function d(L,P,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<P?(L.flags|=67108866,P):z):(L.flags|=67108866,P)):(L.flags|=1048576,P)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,P,z,J){return P===null||P.tag!==6?(P=gf(z,L.mode,J),P.return=L,P):(P=h(P,z),P.return=L,P)}function D(L,P,z,J){var me=z.type;return me===k?Z(L,P,z.props.children,J,z.key):P!==null&&(P.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&dy(me)===P.type)?(P=h(P,z.props),ml(P,z),P.return=L,P):(P=Hu(z.type,z.key,z.props,null,L.mode,J),ml(P,z),P.return=L,P)}function q(L,P,z,J){return P===null||P.tag!==4||P.stateNode.containerInfo!==z.containerInfo||P.stateNode.implementation!==z.implementation?(P=pf(z,L.mode,J),P.return=L,P):(P=h(P,z.children||[]),P.return=L,P)}function Z(L,P,z,J,me){return P===null||P.tag!==7?(P=Ms(z,L.mode,J,me),P.return=L,P):(P=h(P,z),P.return=L,P)}function te(L,P,z){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=gf(""+P,L.mode,z),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return z=Hu(P.type,P.key,P.props,null,L.mode,z),ml(z,P),z.return=L,z;case N:return P=pf(P,L.mode,z),P.return=L,P;case R:var J=P._init;return P=J(P._payload),te(L,P,z)}if(de(P)||U(P))return P=Ms(P,L.mode,z,null),P.return=L,P;if(typeof P.then=="function")return te(L,ac(P),z);if(P.$$typeof===F)return te(L,Ku(L,P),z);oc(L,P)}return null}function G(L,P,z,J){var me=P!==null?P.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:T(L,P,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===me?D(L,P,z,J):null;case N:return z.key===me?q(L,P,z,J):null;case R:return me=z._init,z=me(z._payload),G(L,P,z,J)}if(de(z)||U(z))return me!==null?null:Z(L,P,z,J,null);if(typeof z.then=="function")return G(L,P,ac(z),J);if(z.$$typeof===F)return G(L,P,Ku(L,z),J);oc(L,z)}return null}function Q(L,P,z,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(z)||null,T(P,L,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return L=L.get(J.key===null?z:J.key)||null,D(P,L,J,me);case N:return L=L.get(J.key===null?z:J.key)||null,q(P,L,J,me);case R:var De=J._init;return J=De(J._payload),Q(L,P,z,J,me)}if(de(J)||U(J))return L=L.get(z)||null,Z(P,L,J,me,null);if(typeof J.then=="function")return Q(L,P,z,ac(J),me);if(J.$$typeof===F)return Q(L,P,z,Ku(P,J),me);oc(P,J)}return null}function Ae(L,P,z,J){for(var me=null,De=null,ye=P,Te=P=0,Lt=null;ye!==null&&Te<z.length;Te++){ye.index>Te?(Lt=ye,ye=null):Lt=ye.sibling;var He=G(L,ye,z[Te],J);if(He===null){ye===null&&(ye=Lt);break}t&&ye&&He.alternate===null&&r(L,ye),P=d(He,P,Te),De===null?me=He:De.sibling=He,De=He,ye=Lt}if(Te===z.length)return a(L,ye),Fe&&Ps(L,Te),me;if(ye===null){for(;Te<z.length;Te++)ye=te(L,z[Te],J),ye!==null&&(P=d(ye,P,Te),De===null?me=ye:De.sibling=ye,De=ye);return Fe&&Ps(L,Te),me}for(ye=l(ye);Te<z.length;Te++)Lt=Q(ye,L,Te,z[Te],J),Lt!==null&&(t&&Lt.alternate!==null&&ye.delete(Lt.key===null?Te:Lt.key),P=d(Lt,P,Te),De===null?me=Lt:De.sibling=Lt,De=Lt);return t&&ye.forEach(function(Ki){return r(L,Ki)}),Fe&&Ps(L,Te),me}function Ee(L,P,z,J){if(z==null)throw Error(s(151));for(var me=null,De=null,ye=P,Te=P=0,Lt=null,He=z.next();ye!==null&&!He.done;Te++,He=z.next()){ye.index>Te?(Lt=ye,ye=null):Lt=ye.sibling;var Ki=G(L,ye,He.value,J);if(Ki===null){ye===null&&(ye=Lt);break}t&&ye&&Ki.alternate===null&&r(L,ye),P=d(Ki,P,Te),De===null?me=Ki:De.sibling=Ki,De=Ki,ye=Lt}if(He.done)return a(L,ye),Fe&&Ps(L,Te),me;if(ye===null){for(;!He.done;Te++,He=z.next())He=te(L,He.value,J),He!==null&&(P=d(He,P,Te),De===null?me=He:De.sibling=He,De=He);return Fe&&Ps(L,Te),me}for(ye=l(ye);!He.done;Te++,He=z.next())He=Q(ye,L,Te,He.value,J),He!==null&&(t&&He.alternate!==null&&ye.delete(He.key===null?Te:He.key),P=d(He,P,Te),De===null?me=He:De.sibling=He,De=He);return t&&ye.forEach(function(sA){return r(L,sA)}),Fe&&Ps(L,Te),me}function et(L,P,z,J){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var me=z.key;P!==null;){if(P.key===me){if(me=z.type,me===k){if(P.tag===7){a(L,P.sibling),J=h(P,z.props.children),J.return=L,L=J;break e}}else if(P.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&dy(me)===P.type){a(L,P.sibling),J=h(P,z.props),ml(J,z),J.return=L,L=J;break e}a(L,P);break}else r(L,P);P=P.sibling}z.type===k?(J=Ms(z.props.children,L.mode,J,z.key),J.return=L,L=J):(J=Hu(z.type,z.key,z.props,null,L.mode,J),ml(J,z),J.return=L,L=J)}return E(L);case N:e:{for(me=z.key;P!==null;){if(P.key===me)if(P.tag===4&&P.stateNode.containerInfo===z.containerInfo&&P.stateNode.implementation===z.implementation){a(L,P.sibling),J=h(P,z.children||[]),J.return=L,L=J;break e}else{a(L,P);break}else r(L,P);P=P.sibling}J=pf(z,L.mode,J),J.return=L,L=J}return E(L);case R:return me=z._init,z=me(z._payload),et(L,P,z,J)}if(de(z))return Ae(L,P,z,J);if(U(z)){if(me=U(z),typeof me!="function")throw Error(s(150));return z=me.call(z),Ee(L,P,z,J)}if(typeof z.then=="function")return et(L,P,ac(z),J);if(z.$$typeof===F)return et(L,P,Ku(L,z),J);oc(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,P!==null&&P.tag===6?(a(L,P.sibling),J=h(P,z),J.return=L,L=J):(a(L,P),J=gf(z,L.mode,J),J.return=L,L=J),E(L)):a(L,P)}return function(L,P,z,J){try{dl=0;var me=et(L,P,z,J);return qa=null,me}catch(ye){if(ye===il||ye===$u)throw ye;var De=yn(29,ye,null,L.mode);return De.lanes=J,De.return=L,De}finally{}}}var Ha=my(!0),gy=my(!1),Pn=re(null),mr=null;function Oi(t){var r=t.alternate;se(Nt,Nt.current&1),se(Pn,t),mr===null&&(r===null||Ua.current!==null||r.memoizedState!==null)&&(mr=t)}function py(t){if(t.tag===22){if(se(Nt,Nt.current),se(Pn,t),mr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(mr=t)}}else ki()}function ki(){se(Nt,Nt.current),se(Pn,Pn.current)}function Wr(t){ue(Pn),mr===t&&(mr=null),ue(Nt)}var Nt=re(0);function lc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ud(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $f(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:v({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Tn(),h=Ii(l);h.payload=r,a!=null&&(h.callback=a),r=Ni(t,h,l),r!==null&&(bn(r,t,l),al(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Tn(),h=Ii(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Ni(t,h,l),r!==null&&(bn(r,t,l),al(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Tn(),l=Ii(a);l.tag=2,r!=null&&(l.callback=r),r=Ni(t,l,a),r!==null&&(bn(r,t,a),al(r,t,a))}};function yy(t,r,a,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):r.prototype&&r.prototype.isPureReactComponent?!Xo(a,l)||!Xo(h,d):!0}function _y(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Xf.enqueueReplaceState(r,r.state,null)}function Hs(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=v({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function vy(t){uc(t)}function Ey(t){console.error(t)}function Ty(t){uc(t)}function cc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function by(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wf(t,r,a){return a=Ii(a),a.tag=3,a.payload={element:null},a.callback=function(){cc(t,r)},a}function wy(t){return t=Ii(t),t.tag=3,t}function Ay(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){by(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){by(r,a,l),typeof h!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function sw(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&tl(r,a,h,!0),a=Pn.current,a!==null){switch(a.tag){case 13:return mr===null?Td():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Rf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),wd(t,l,h)),!1;case 22:return a.flags|=65536,l===Rf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),wd(t,l,h)),!1}throw Error(s(435,a.tag))}return wd(t,l,h),Td(),!1}if(Fe)return r=Pn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==vf&&(t=Error(s(422),{cause:l}),el(On(t,a)))):(l!==vf&&(r=Error(s(423),{cause:l}),el(On(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=On(l,a),h=Wf(t.stateNode,l,h),If(t,h),ft!==4&&(ft=2)),!1;var d=Error(s(520),{cause:l});if(d=On(d,a),Tl===null?Tl=[d]:Tl.push(d),ft!==4&&(ft=2),r===null)return!0;l=On(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wf(a.stateNode,l,t),If(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ji===null||!ji.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=wy(h),Ay(h,t,a,l),If(a,h),!1}a=a.return}while(a!==null);return!1}var Sy=Error(s(461)),Vt=!1;function qt(t,r,a,l){r.child=t===null?gy(r,null,a,l):Ha(r,t.child,a,l)}function Ry(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return zs(r),l=Mf(t,r,a,E,d,h),T=Vf(),t!==null&&!Vt?(Pf(t,r,h),Zr(t,r,h)):(Fe&&T&&yf(r),r.flags|=1,qt(t,r,l,h),r.child)}function xy(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!mf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,Cy(t,r,d,l,h)):(t=Hu(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!sd(t,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Xo,a(E,l)&&t.ref===r.ref)return Zr(t,r,h)}return r.flags|=1,t=Gr(d,l),t.ref=r.ref,t.return=r,r.child=t}function Cy(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(Xo(d,l)&&t.ref===r.ref)if(Vt=!1,r.pendingProps=l=d,sd(t,h))(t.flags&131072)!==0&&(Vt=!0);else return r.lanes=t.lanes,Zr(t,r,h)}return Zf(t,r,a,l,h)}function Iy(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return Ny(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yu(r,d!==null?d.cachePool:null),d!==null?Cp(r,d):Df(),py(r);else return r.lanes=r.childLanes=536870912,Ny(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(Yu(r,d.cachePool),Cp(r,d),ki(),r.memoizedState=null):(t!==null&&Yu(r,null),Df(),ki());return qt(t,r,h,a),r.child}function Ny(t,r,a,l){var h=Sf();return h=h===null?null:{parent:It._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&Yu(r,null),Df(),py(r),t!==null&&tl(t,r,l,!0),null}function hc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Zf(t,r,a,l,h){return zs(r),a=Mf(t,r,a,l,void 0,h),l=Vf(),t!==null&&!Vt?(Pf(t,r,h),Zr(t,r,h)):(Fe&&l&&yf(r),r.flags|=1,qt(t,r,a,h),r.child)}function Dy(t,r,a,l,h,d){return zs(r),r.updateQueue=null,a=Np(r,l,a,h),Ip(t),l=Vf(),t!==null&&!Vt?(Pf(t,r,d),Zr(t,r,d)):(Fe&&l&&yf(r),r.flags|=1,qt(t,r,a,d),r.child)}function Oy(t,r,a,l,h){if(zs(r),r.stateNode===null){var d=ka,E=a.contextType;typeof E=="object"&&E!==null&&(d=$t(E)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Xf,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},xf(r),E=a.contextType,d.context=typeof E=="object"&&E!==null?$t(E):ka,d.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&($f(r,a,E,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&Xf.enqueueReplaceState(d,d.state,null),ll(r,l,d,h),ol(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,D=Hs(a,T);d.props=D;var q=d.context,Z=a.contextType;E=ka,typeof Z=="object"&&Z!==null&&(E=$t(Z));var te=a.getDerivedStateFromProps;Z=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||q!==E)&&_y(r,d,l,E),Ci=!1;var G=r.memoizedState;d.state=G,ll(r,l,d,h),ol(),q=r.memoizedState,T||G!==q||Ci?(typeof te=="function"&&($f(r,a,te,l),q=r.memoizedState),(D=Ci||yy(r,a,D,l,G,q,E))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),d.props=l,d.state=q,d.context=E,l=D):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Cf(t,r),E=r.memoizedProps,Z=Hs(a,E),d.props=Z,te=r.pendingProps,G=d.context,q=a.contextType,D=ka,typeof q=="object"&&q!==null&&(D=$t(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==te||G!==D)&&_y(r,d,l,D),Ci=!1,G=r.memoizedState,d.state=G,ll(r,l,d,h),ol();var Q=r.memoizedState;E!==te||G!==Q||Ci||t!==null&&t.dependencies!==null&&Qu(t.dependencies)?(typeof T=="function"&&($f(r,a,T,l),Q=r.memoizedState),(Z=Ci||yy(r,a,Z,l,G,Q,D)||t!==null&&t.dependencies!==null&&Qu(t.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Q,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Q,D)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Q),d.props=l,d.state=Q,d.context=D,l=Z):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,hc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Ha(r,t.child,null,h),r.child=Ha(r,null,a,h)):qt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=Zr(t,r,h),t}function ky(t,r,a,l){return Jo(),r.flags|=256,qt(t,r,a,l),r.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ed(t){return{baseLanes:t,cachePool:Ep()}}function td(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Ln),t}function My(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(Nt.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(Fe){if(h?Oi(r):ki(),Fe){var T=ht,D;if(D=T){e:{for(D=T,T=dr;D.nodeType!==8;){if(!T){T=null;break e}if(D=Gn(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(r.memoizedState={dehydrated:T,treeContext:Vs!==null?{id:Qr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},D=yn(18,null,null,0),D.stateNode=T,D.return=r,r.child=D,on=r,ht=null,D=!0):D=!1}D||Us(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Ud(T)?r.lanes=32:r.lanes=536870912,null;Wr(r)}return T=l.children,l=l.fallback,h?(ki(),h=r.mode,T=fc({mode:"hidden",children:T},h),l=Ms(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=ed(a),h.childLanes=td(t,E,a),r.memoizedState=Jf,l):(Oi(r),nd(r,T))}if(D=t.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(d)r.flags&256?(Oi(r),r.flags&=-257,r=rd(t,r,a)):r.memoizedState!==null?(ki(),r.child=t.child,r.flags|=128,r=null):(ki(),h=l.fallback,T=r.mode,l=fc({mode:"visible",children:l.children},T),h=Ms(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Ha(r,t.child,null,a),l=r.child,l.memoizedState=ed(a),l.childLanes=td(t,E,a),r.memoizedState=Jf,r=h);else if(Oi(r),Ud(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var q=E.dgst;E=q,l=Error(s(419)),l.stack="",l.digest=E,el({value:l,source:null,stack:null}),r=rd(t,r,a)}else if(Vt||tl(t,r,a,!1),E=(a&t.childLanes)!==0,Vt||E){if(E=nt,E!==null&&(l=a&-a,l=(l&42)!==0?1:Ei(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,Oa(t,l),bn(E,t,l),Sy;T.data==="$?"||Td(),r=rd(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,ht=Gn(T.nextSibling),on=r,Fe=!0,Ls=null,dr=!1,t!==null&&(Mn[Vn++]=Qr,Mn[Vn++]=Kr,Mn[Vn++]=Vs,Qr=t.id,Kr=t.overflow,Vs=r),r=nd(r,l.children),r.flags|=4096);return r}return h?(ki(),h=l.fallback,T=r.mode,D=t.child,q=D.sibling,l=Gr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?h=Gr(q,h):(h=Ms(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=ed(a):(D=T.cachePool,D!==null?(q=It._currentValue,D=D.parent!==q?{parent:q,pool:q}:D):D=Ep(),T={baseLanes:T.baseLanes|a,cachePool:D}),h.memoizedState=T,h.childLanes=td(t,E,a),r.memoizedState=Jf,l):(Oi(r),a=t.child,t=a.sibling,a=Gr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function nd(t,r){return r=fc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function fc(t,r){return t=yn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function rd(t,r,a){return Ha(r,t.child,null,a),t=nd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Vy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Tf(t.return,r,a)}function id(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Py(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(qt(t,r,l.children,a),l=Nt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vy(t,a,r);else if(t.tag===19)Vy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(Nt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&lc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),id(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&lc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}id(r,!0,a,null,d);break;case"together":id(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Zr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ui|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(tl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Gr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Gr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function sd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Qu(t)))}function aw(t,r,a){switch(r.tag){case 3:Xe(r,r.stateNode.containerInfo),xi(r,It,t.memoizedState.cache),Jo();break;case 27:case 5:Zn(r);break;case 4:Xe(r,r.stateNode.containerInfo);break;case 10:xi(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Oi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?My(t,r,a):(Oi(r),t=Zr(t,r,a),t!==null?t.sibling:null);Oi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(tl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Py(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Nt,Nt.current),l)break;return null;case 22:case 23:return r.lanes=0,Iy(t,r,a);case 24:xi(r,It,t.memoizedState.cache)}return Zr(t,r,a)}function Ly(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Vt=!0;else{if(!sd(t,a)&&(r.flags&128)===0)return Vt=!1,aw(t,r,a);Vt=(t.flags&131072)!==0}else Vt=!1,Fe&&(r.flags&1048576)!==0&&dp(r,Gu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")mf(l)?(t=Hs(l,t),r.tag=1,r=Oy(null,r,l,t,a)):(r.tag=0,r=Zf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===fe){r.tag=11,r=Ry(null,r,l,t,a);break e}else if(h===C){r.tag=14,r=xy(null,r,l,t,a);break e}}throw r=pe(l)||l,Error(s(306,r,""))}}return r;case 0:return Zf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Hs(l,r.pendingProps),Oy(t,r,l,h,a);case 3:e:{if(Xe(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,Cf(t,r),ll(r,l,null,a);var E=r.memoizedState;if(l=E.cache,xi(r,It,l),l!==d.cache&&bf(r,[It],a,!0),ol(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=ky(t,r,l,a);break e}else if(l!==h){h=On(Error(s(424)),r),el(h),r=ky(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ht=Gn(t.firstChild),on=r,Fe=!0,Ls=null,dr=!0,a=gy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Jo(),l===h){r=Zr(t,r,a);break e}qt(t,r,l,a)}r=r.child}return r;case 26:return hc(t,r),t===null?(a=B_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,t=r.pendingProps,l=Rc(we.current).createElement(a),l[Rt]=r,l[vt]=t,Ft(l,a,t),dt(l),r.stateNode=l):r.memoizedState=B_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Zn(r),t===null&&Fe&&(l=r.stateNode=U_(r.type,r.pendingProps,we.current),on=r,dr=!0,h=ht,qi(r.type)?(jd=h,ht=Gn(l.firstChild)):ht=h),qt(t,r,r.pendingProps.children,a),hc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Fe&&((h=l=ht)&&(l=Mw(l,r.type,r.pendingProps,dr),l!==null?(r.stateNode=l,on=r,ht=Gn(l.firstChild),dr=!1,h=!0):h=!1),h||Us(r)),Zn(r),h=r.type,d=r.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,Vd(h,d)?l=null:E!==null&&Vd(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=Mf(t,r,Zb,null,null,a),Nl._currentValue=h),hc(t,r),qt(t,r,l,a),r.child;case 6:return t===null&&Fe&&((t=a=ht)&&(a=Vw(a,r.pendingProps,dr),a!==null?(r.stateNode=a,on=r,ht=null,t=!0):t=!1),t||Us(r)),null;case 13:return My(t,r,a);case 4:return Xe(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ha(r,null,l,a):qt(t,r,l,a),r.child;case 11:return Ry(t,r,r.type,r.pendingProps,a);case 7:return qt(t,r,r.pendingProps,a),r.child;case 8:return qt(t,r,r.pendingProps.children,a),r.child;case 12:return qt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,xi(r,r.type,l.value),qt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,zs(r),h=$t(h),l=l(h),r.flags|=1,qt(t,r,l,a),r.child;case 14:return xy(t,r,r.type,r.pendingProps,a);case 15:return Cy(t,r,r.type,r.pendingProps,a);case 19:return Py(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=fc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Gr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Iy(t,r,a);case 24:return zs(r),l=$t(It),t===null?(h=Sf(),h===null&&(h=nt,d=wf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},xf(r),xi(r,It,h)):((t.lanes&a)!==0&&(Cf(t,r),ll(r,null,null,a),ol()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),xi(r,It,l)):(l=d.cache,xi(r,It,l),l!==h.cache&&bf(r,[It],a,!0))),qt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Jr(t){t.flags|=4}function Uy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Q_(r)){if(r=Pn.current,r!==null&&((je&4194048)===je?mr!==null:(je&62914560)!==je&&(je&536870912)===0||r!==mr))throw sl=Rf,Tp;t.flags|=8192}}function dc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Oo():536870912,t.lanes|=r,Ka|=r)}function gl(t,r){if(!Fe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function lt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function ow(t,r,a){var l=r.pendingProps;switch(_f(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),$r(It),An(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Zo(r)?Jr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,pp())),lt(r),null;case 26:return a=r.memoizedState,t===null?(Jr(r),a!==null?(lt(r),Uy(r,a)):(lt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Jr(r),lt(r),Uy(r,a)):(lt(r),r.flags&=-16777217):(t.memoizedProps!==l&&Jr(r),lt(r),r.flags&=-16777217),null;case 27:Sn(r),a=we.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Jr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return lt(r),null}t=_e.current,Zo(r)?mp(r):(t=U_(h,l,a),r.stateNode=t,Jr(r))}return lt(r),null;case 5:if(Sn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Jr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return lt(r),null}if(t=_e.current,Zo(r))mp(r);else{switch(h=Rc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Rt]=r,t[vt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Ft(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Jr(r)}}return lt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Jr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,Zo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=on,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Rt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||D_(t.nodeValue,a)),t||Us(r)}else t=Rc(t).createTextNode(l),t[Rt]=r,r.stateNode=t}return lt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Zo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Rt]=r}else Jo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),h=!1}else h=pp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Wr(r),r):(Wr(r),null)}if(Wr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),dc(r,r.updateQueue),lt(r),null;case 4:return An(),t===null&&Nd(r.stateNode.containerInfo),lt(r),null;case 10:return $r(r.type),lt(r),null;case 19:if(ue(Nt),h=r.memoizedState,h===null)return lt(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)gl(h,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=lc(t),d!==null){for(r.flags|=128,gl(h,!1),t=d.updateQueue,r.updateQueue=t,dc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)fp(a,t),a=a.sibling;return se(Nt,Nt.current&1|2),r.child}t=t.sibling}h.tail!==null&&tn()>pc&&(r.flags|=128,l=!0,gl(h,!1),r.lanes=4194304)}else{if(!l)if(t=lc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,dc(r,t),gl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Fe)return lt(r),null}else 2*tn()-h.renderingStartTime>pc&&a!==536870912&&(r.flags|=128,l=!0,gl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=tn(),r.sibling=null,t=Nt.current,se(Nt,l?t&1|2:t&1),r):(lt(r),null);case 22:case 23:return Wr(r),Of(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),a=r.updateQueue,a!==null&&dc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ue(Bs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),$r(It),lt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function lw(t,r){switch(_f(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return $r(It),An(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Sn(r),null;case 13:if(Wr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Jo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ue(Nt),null;case 4:return An(),null;case 10:return $r(r.type),null;case 22:case 23:return Wr(r),Of(),t!==null&&ue(Bs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return $r(It),null;case 25:return null;default:return null}}function jy(t,r){switch(_f(r),r.tag){case 3:$r(It),An();break;case 26:case 27:case 5:Sn(r);break;case 4:An();break;case 13:Wr(r);break;case 19:ue(Nt);break;case 10:$r(r.type);break;case 22:case 23:Wr(r),Of(),t!==null&&ue(Bs);break;case 24:$r(It)}}function pl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(T){tt(r,r.return,T)}}function Mi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=r;var D=a,q=T;try{q()}catch(Z){tt(h,D,Z)}}}l=l.next}while(l!==d)}}catch(Z){tt(r,r.return,Z)}}function zy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{xp(r,a)}catch(l){tt(t,t.return,l)}}}function By(t,r,a){a.props=Hs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){tt(t,r,l)}}function yl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){tt(t,r,h)}}function gr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){tt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tt(t,r,h)}else a.current=null}function qy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){tt(t,t.return,h)}}function ad(t,r,a){try{var l=t.stateNode;Iw(l,t.type,a,r),l[vt]=r}catch(h){tt(t,t.return,h)}}function Hy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qi(t.type)||t.tag===4}function od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ld(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Sc));else if(l!==4&&(l===27&&qi(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(ld(t,r,a),t=t.sibling;t!==null;)ld(t,r,a),t=t.sibling}function mc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&qi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(mc(t,r,a),t=t.sibling;t!==null;)mc(t,r,a),t=t.sibling}function Fy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Ft(r,l,a),r[Rt]=t,r[vt]=a}catch(d){tt(t,t.return,d)}}var ei=!1,gt=!1,ud=!1,Gy=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function uw(t,r){if(t=t.containerInfo,kd=Oc,t=np(t),of(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,T=-1,D=-1,q=0,Z=0,te=t,G=null;t:for(;;){for(var Q;te!==a||h!==0&&te.nodeType!==3||(T=E+h),te!==d||l!==0&&te.nodeType!==3||(D=E+l),te.nodeType===3&&(E+=te.nodeValue.length),(Q=te.firstChild)!==null;)G=te,te=Q;for(;;){if(te===t)break t;if(G===a&&++q===h&&(T=E),G===d&&++Z===l&&(D=E),(Q=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=Q}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Md={focusedElem:t,selectionRange:a},Oc=!1,Pt=r;Pt!==null;)if(r=Pt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Pt=t;else for(;Pt!==null;){switch(r=Pt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ae=Hs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ae,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){tt(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Ld(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ld(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Pt=t;break}Pt=r.return}}function Qy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Vi(t,a),l&4&&pl(5,a);break;case 1:if(Vi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){tt(a,a.return,E)}else{var h=Hs(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(a,a.return,E)}}l&64&&zy(a),l&512&&yl(a,a.return);break;case 3:if(Vi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{xp(t,r)}catch(E){tt(a,a.return,E)}}break;case 27:r===null&&l&4&&Fy(a);case 26:case 5:Vi(t,a),r===null&&l&4&&qy(a),l&512&&yl(a,a.return);break;case 12:Vi(t,a);break;case 13:Vi(t,a),l&4&&$y(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=_w.bind(null,a),Pw(t,a))));break;case 22:if(l=a.memoizedState!==null||ei,!l){r=r!==null&&r.memoizedState!==null||gt,h=ei;var d=gt;ei=l,(gt=r)&&!d?Pi(t,a,(a.subtreeFlags&8772)!==0):Vi(t,a),ei=h,gt=d}break;case 30:break;default:Vi(t,a)}}function Ky(t){var r=t.alternate;r!==null&&(t.alternate=null,Ky(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&wi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,un=!1;function ti(t,r,a){for(a=a.child;a!==null;)Yy(t,r,a),a=a.sibling}function Yy(t,r,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(st,a)}catch{}switch(a.tag){case 26:gt||gr(a,r),ti(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||gr(a,r);var l=ot,h=un;qi(a.type)&&(ot=a.stateNode,un=!1),ti(t,r,a),Rl(a.stateNode),ot=l,un=h;break;case 5:gt||gr(a,r);case 6:if(l=ot,h=un,ot=null,ti(t,r,a),ot=l,un=h,ot!==null)if(un)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(d){tt(a,r,d)}else try{ot.removeChild(a.stateNode)}catch(d){tt(a,r,d)}break;case 18:ot!==null&&(un?(t=ot,P_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ml(t)):P_(ot,a.stateNode));break;case 4:l=ot,h=un,ot=a.stateNode.containerInfo,un=!0,ti(t,r,a),ot=l,un=h;break;case 0:case 11:case 14:case 15:gt||Mi(2,a,r),gt||Mi(4,a,r),ti(t,r,a);break;case 1:gt||(gr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&By(a,r,l)),ti(t,r,a);break;case 21:ti(t,r,a);break;case 22:gt=(l=gt)||a.memoizedState!==null,ti(t,r,a),gt=l;break;default:ti(t,r,a)}}function $y(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ml(t)}catch(a){tt(r,r.return,a)}}function cw(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Gy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Gy),r;default:throw Error(s(435,t.tag))}}function cd(t,r){var a=cw(t);r.forEach(function(l){var h=vw.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function _n(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(qi(T.type)){ot=T.stateNode,un=!1;break e}break;case 5:ot=T.stateNode,un=!1;break e;case 3:case 4:ot=T.stateNode.containerInfo,un=!0;break e}T=T.return}if(ot===null)throw Error(s(160));Yy(d,E,h),ot=null,un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Xy(r,t),r=r.sibling}var Fn=null;function Xy(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(r,t),vn(t),l&4&&(Mi(3,t,t.return),pl(3,t),Mi(5,t,t.return));break;case 1:_n(r,t),vn(t),l&512&&(gt||a===null||gr(a,a.return)),l&64&&ei&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Fn;if(_n(r,t),vn(t),l&512&&(gt||a===null||gr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[_s]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ft(d,l,a),d[Rt]=t,dt(d),l=d;break e;case"link":var E=F_("link","href",h).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(d=E[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}d=h.createElement(l),Ft(d,l,a),h.head.appendChild(d);break;case"meta":if(E=F_("meta","content",h).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(d=E[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}d=h.createElement(l),Ft(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Rt]=t,dt(d),l=d}t.stateNode=l}else G_(h,t.type,t.stateNode);else t.stateNode=H_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?G_(h,t.type,t.stateNode):H_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(r,t),vn(t),l&512&&(gt||a===null||gr(a,a.return)),a!==null&&l&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(r,t),vn(t),l&512&&(gt||a===null||gr(a,a.return)),t.flags&32){h=t.stateNode;try{Cn(h,"")}catch(Q){tt(t,t.return,Q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,ad(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ud=!0);break;case 6:if(_n(r,t),vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Q){tt(t,t.return,Q)}}break;case 3:if(Ic=null,h=Fn,Fn=xc(r.containerInfo),_n(r,t),Fn=h,vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(r.containerInfo)}catch(Q){tt(t,t.return,Q)}ud&&(ud=!1,Wy(t));break;case 4:l=Fn,Fn=xc(t.stateNode.containerInfo),_n(r,t),vn(t),Fn=l;break;case 12:_n(r,t),vn(t);break;case 13:_n(r,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pd=tn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cd(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=ei,Z=gt;if(ei=q||h,gt=Z||D,_n(r,t),gt=Z,ei=q,vn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||D||ei||gt||Fs(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(d=D.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=D.stateNode;var te=D.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Q){tt(D,D.return,Q)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Q){tt(D,D.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,cd(t,a))));break;case 19:_n(r,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cd(t,l)));break;case 30:break;case 21:break;default:_n(r,t),vn(t)}}function vn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Hy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=od(t);mc(t,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(Cn(E,""),a.flags&=-33);var T=od(t);mc(t,T,E);break;case 3:case 4:var D=a.stateNode.containerInfo,q=od(t);ld(t,q,D);break;default:throw Error(s(161))}}catch(Z){tt(t,t.return,Z)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Wy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Wy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Vi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Qy(t,r.alternate,r),r=r.sibling}function Fs(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Mi(4,r,r.return),Fs(r);break;case 1:gr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&By(r,r.return,a),Fs(r);break;case 27:Rl(r.stateNode);case 26:case 5:gr(r,r.return),Fs(r);break;case 22:r.memoizedState===null&&Fs(r);break;case 30:Fs(r);break;default:Fs(r)}t=t.sibling}}function Pi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,E=d.flags;switch(d.tag){case 0:case 11:case 15:Pi(h,d,a),pl(4,d);break;case 1:if(Pi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){tt(l,l.return,q)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Rp(D[h],T)}catch(q){tt(l,l.return,q)}}a&&E&64&&zy(d),yl(d,d.return);break;case 27:Fy(d);case 26:case 5:Pi(h,d,a),a&&l===null&&E&4&&qy(d),yl(d,d.return);break;case 12:Pi(h,d,a);break;case 13:Pi(h,d,a),a&&E&4&&$y(h,d);break;case 22:d.memoizedState===null&&Pi(h,d,a),yl(d,d.return);break;case 30:break;default:Pi(h,d,a)}r=r.sibling}}function hd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&nl(a))}function fd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&nl(t))}function pr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Zy(t,r,a,l),r=r.sibling}function Zy(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:pr(t,r,a,l),h&2048&&pl(9,r);break;case 1:pr(t,r,a,l);break;case 3:pr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&nl(t)));break;case 12:if(h&2048){pr(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,E=d.id,T=d.onPostCommit;typeof T=="function"&&T(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){tt(r,r.return,D)}}else pr(t,r,a,l);break;case 13:pr(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,E=r.alternate,r.memoizedState!==null?d._visibility&2?pr(t,r,a,l):_l(t,r):d._visibility&2?pr(t,r,a,l):(d._visibility|=2,Fa(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&hd(E,r);break;case 24:pr(t,r,a,l),h&2048&&fd(r.alternate,r);break;default:pr(t,r,a,l)}}function Fa(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,E=r,T=a,D=l,q=E.flags;switch(E.tag){case 0:case 11:case 15:Fa(d,E,T,D,h),pl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Fa(d,E,T,D,h):_l(d,E):(Z._visibility|=2,Fa(d,E,T,D,h)),h&&q&2048&&hd(E.alternate,E);break;case 24:Fa(d,E,T,D,h),h&&q&2048&&fd(E.alternate,E);break;default:Fa(d,E,T,D,h)}r=r.sibling}}function _l(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:_l(a,l),h&2048&&hd(l.alternate,l);break;case 24:_l(a,l),h&2048&&fd(l.alternate,l);break;default:_l(a,l)}r=r.sibling}}var vl=8192;function Ga(t){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)Jy(t),t=t.sibling}function Jy(t){switch(t.tag){case 26:Ga(t),t.flags&vl&&t.memoizedState!==null&&$w(Fn,t.memoizedState,t.memoizedProps);break;case 5:Ga(t);break;case 3:case 4:var r=Fn;Fn=xc(t.stateNode.containerInfo),Ga(t),Fn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=vl,vl=16777216,Ga(t),vl=r):Ga(t));break;default:Ga(t)}}function e_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function El(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Pt=l,n_(l,t)}e_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)t_(t),t=t.sibling}function t_(t){switch(t.tag){case 0:case 11:case 15:El(t),t.flags&2048&&Mi(9,t,t.return);break;case 3:El(t);break;case 12:El(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,gc(t)):El(t);break;default:El(t)}}function gc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Pt=l,n_(l,t)}e_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Mi(8,r,r.return),gc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,gc(r));break;default:gc(r)}t=t.sibling}}function n_(t,r){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:Mi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:nl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pt=l;else e:for(a=t;Pt!==null;){l=Pt;var h=l.sibling,d=l.return;if(Ky(l),l===a){Pt=null;break e}if(h!==null){h.return=d,Pt=h;break e}Pt=d}}}var hw={getCacheForType:function(t){var r=$t(It),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},fw=typeof WeakMap=="function"?WeakMap:Map,Ye=0,nt=null,Oe=null,je=0,$e=0,En=null,Li=!1,Qa=!1,dd=!1,ni=0,ft=0,Ui=0,Gs=0,md=0,Ln=0,Ka=0,Tl=null,cn=null,gd=!1,pd=0,pc=1/0,yc=null,ji=null,Ht=0,zi=null,Ya=null,$a=0,yd=0,_d=null,r_=null,bl=0,vd=null;function Tn(){if((Ye&2)!==0&&je!==0)return je&-je;if(K.T!==null){var t=Pa;return t!==0?t:Rd()}return Ti()}function i_(){Ln===0&&(Ln=(je&536870912)===0||Fe?Do():536870912);var t=Pn.current;return t!==null&&(t.flags|=32),Ln}function bn(t,r,a){(t===nt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),Bi(t,je,Ln,!1)),Mr(t,a),((Ye&2)===0||t!==nt)&&(t===nt&&((Ye&2)===0&&(Gs|=a),ft===4&&Bi(t,je,Ln,!1)),yr(t))}function s_(t,r,a){if((Ye&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Or(t,r),h=l?gw(t,r):bd(t,r,!0),d=l;do{if(h===0){Qa&&!l&&Bi(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!dw(a)){h=bd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var T=t;h=Tl;var D=T.current.memoizedState.isDehydrated;if(D&&(Xa(T,E).flags|=256),E=bd(T,E,!1),E!==2){if(dd&&!D){T.errorRecoveryDisabledLanes|=d,Gs|=d,h=4;break e}d=cn,cn=h,d!==null&&(cn===null?cn=d:cn.push.apply(cn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Xa(t,0),Bi(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Bi(l,r,Ln,!Li);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=pd+300-tn(),10<h)){if(Bi(l,r,Ln,!Li),vi(l,0,!0)!==0)break e;l.timeoutHandle=M_(a_.bind(null,l,a,cn,yc,gd,r,Ln,Gs,Ka,Li,d,2,-0,0),h);break e}a_(l,a,cn,yc,gd,r,Ln,Gs,Ka,Li,d,0,-0,0)}}break}while(!0);yr(t)}function a_(t,r,a,l,h,d,E,T,D,q,Z,te,G,Q){if(t.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Il={stylesheets:null,count:0,unsuspend:Yw},Jy(r),te=Xw(),te!==null)){t.cancelPendingCommit=te(d_.bind(null,t,r,d,a,l,h,E,T,D,Z,1,G,Q)),Bi(t,d,E,!q);return}d_(t,r,d,a,l,h,E,T,D)}function dw(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Bi(t,r,a,l){r&=~md,r&=~Gs,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Ot(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&nr(t,a,r)}function _c(){return(Ye&6)===0?(wl(0),!1):!0}function Ed(){if(Oe!==null){if($e===0)var t=Oe.return;else t=Oe,Yr=js=null,Lf(t),qa=null,dl=0,t=Oe;for(;t!==null;)jy(t.alternate,t),t=t.return;Oe=null}}function Xa(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Dw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ed(),nt=t,Oe=a=Gr(t.current,null),je=r,$e=0,En=null,Li=!1,Qa=Or(t,r),dd=!1,Ka=Ln=md=Gs=Ui=ft=0,cn=Tl=null,gd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Ot(l),d=1<<h;r|=t[h],l&=~d}return ni=r,zu(),a}function o_(t,r){Ne=null,K.H=sc,r===il||r===$u?(r=Ap(),$e=3):r===Tp?(r=Ap(),$e=4):$e=r===Sy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,En=r,Oe===null&&(ft=1,cc(t,On(r,t.current)))}function l_(){var t=K.H;return K.H=sc,t===null?sc:t}function u_(){var t=K.A;return K.A=hw,t}function Td(){ft=4,Li||(je&4194048)!==je&&Pn.current!==null||(Qa=!0),(Ui&134217727)===0&&(Gs&134217727)===0||nt===null||Bi(nt,je,Ln,!1)}function bd(t,r,a){var l=Ye;Ye|=2;var h=l_(),d=u_();(nt!==t||je!==r)&&(yc=null,Xa(t,r)),r=!1;var E=ft;e:do try{if($e!==0&&Oe!==null){var T=Oe,D=En;switch($e){case 8:Ed(),E=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(r=!0);var q=$e;if($e=0,En=null,Wa(t,T,D,q),a&&Qa){E=0;break e}break;default:q=$e,$e=0,En=null,Wa(t,T,D,q)}}mw(),E=ft;break}catch(Z){o_(t,Z)}while(!0);return r&&t.shellSuspendCounter++,Yr=js=null,Ye=l,K.H=h,K.A=d,Oe===null&&(nt=null,je=0,zu()),E}function mw(){for(;Oe!==null;)c_(Oe)}function gw(t,r){var a=Ye;Ye|=2;var l=l_(),h=u_();nt!==t||je!==r?(yc=null,pc=tn()+500,Xa(t,r)):Qa=Or(t,r);e:do try{if($e!==0&&Oe!==null){r=Oe;var d=En;t:switch($e){case 1:$e=0,En=null,Wa(t,r,d,1);break;case 2:case 9:if(bp(d)){$e=0,En=null,h_(r);break}r=function(){$e!==2&&$e!==9||nt!==t||($e=7),yr(t)},d.then(r,r);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:bp(d)?($e=0,En=null,h_(r)):($e=0,En=null,Wa(t,r,d,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var T=Oe;if(!E||Q_(E)){$e=0,En=null;var D=T.sibling;if(D!==null)Oe=D;else{var q=T.return;q!==null?(Oe=q,vc(q)):Oe=null}break t}}$e=0,En=null,Wa(t,r,d,5);break;case 6:$e=0,En=null,Wa(t,r,d,6);break;case 8:Ed(),ft=6;break e;default:throw Error(s(462))}}pw();break}catch(Z){o_(t,Z)}while(!0);return Yr=js=null,K.H=l,K.A=h,Ye=a,Oe!==null?0:(nt=null,je=0,zu(),ft)}function pw(){for(;Oe!==null&&!pi();)c_(Oe)}function c_(t){var r=Ly(t.alternate,t,ni);t.memoizedProps=t.pendingProps,r===null?vc(t):Oe=r}function h_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Dy(a,r,r.pendingProps,r.type,void 0,je);break;case 11:r=Dy(a,r,r.pendingProps,r.type.render,r.ref,je);break;case 5:Lf(r);default:jy(a,r),r=Oe=fp(r,ni),r=Ly(a,r,ni)}t.memoizedProps=t.pendingProps,r===null?vc(t):Oe=r}function Wa(t,r,a,l){Yr=js=null,Lf(r),qa=null,dl=0;var h=r.return;try{if(sw(t,h,r,a,je)){ft=1,cc(t,On(a,t.current)),Oe=null;return}}catch(d){if(h!==null)throw Oe=h,d;ft=1,cc(t,On(a,t.current)),Oe=null;return}r.flags&32768?(Fe||l===1?t=!0:Qa||(je&536870912)!==0?t=!1:(Li=t=!0,(l===2||l===9||l===3||l===6)&&(l=Pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),f_(r,t)):vc(r)}function vc(t){var r=t;do{if((r.flags&32768)!==0){f_(r,Li);return}t=r.return;var a=ow(r.alternate,r,ni);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);ft===0&&(ft=5)}function f_(t,r){do{var a=lw(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ft=6,Oe=null}function d_(t,r,a,l,h,d,E,T,D){t.cancelPendingCommit=null;do Ec();while(Ht!==0);if((Ye&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=ff,ko(t,a,d,E,T,D),t===nt&&(Oe=nt=null,je=0),Ya=r,zi=t,$a=a,yd=d,_d=h,r_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ew(er,function(){return __(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=oe.p,oe.p=2,E=Ye,Ye|=4;try{uw(t,r,a)}finally{Ye=E,oe.p=h,K.T=l}}Ht=1,m_(),g_(),p_()}}function m_(){if(Ht===1){Ht=0;var t=zi,r=Ya,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var h=Ye;Ye|=4;try{Xy(r,t);var d=Md,E=np(t.containerInfo),T=d.focusedElem,D=d.selectionRange;if(E!==T&&T&&T.ownerDocument&&tp(T.ownerDocument.documentElement,T)){if(D!==null&&of(T)){var q=D.start,Z=D.end;if(Z===void 0&&(Z=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(Z,T.value.length);else{var te=T.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var Q=G.getSelection(),Ae=T.textContent.length,Ee=Math.min(D.start,Ae),et=D.end===void 0?Ee:Math.min(D.end,Ae);!Q.extend&&Ee>et&&(E=et,et=Ee,Ee=E);var L=ep(T,Ee),P=ep(T,et);if(L&&P&&(Q.rangeCount!==1||Q.anchorNode!==L.node||Q.anchorOffset!==L.offset||Q.focusNode!==P.node||Q.focusOffset!==P.offset)){var z=te.createRange();z.setStart(L.node,L.offset),Q.removeAllRanges(),Ee>et?(Q.addRange(z),Q.extend(P.node,P.offset)):(z.setEnd(P.node,P.offset),Q.addRange(z))}}}}for(te=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&te.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var J=te[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Oc=!!kd,Md=kd=null}finally{Ye=h,oe.p=l,K.T=a}}t.current=r,Ht=2}}function g_(){if(Ht===2){Ht=0;var t=zi,r=Ya,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var h=Ye;Ye|=4;try{Qy(t,r.alternate,r)}finally{Ye=h,oe.p=l,K.T=a}}Ht=3}}function p_(){if(Ht===4||Ht===3){Ht=0,ha();var t=zi,r=Ya,a=$a,l=r_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,Ya=zi=null,y_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ji=null),ma(a),r=r.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(st,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=K.T,h=oe.p,oe.p=2,K.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];d(T.value,{componentStack:T.stack})}}finally{K.T=r,oe.p=h}}($a&3)!==0&&Ec(),yr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===vd?bl++:(bl=0,vd=t):bl=0,wl(0)}}function y_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,nl(r)))}function Ec(t){return m_(),g_(),p_(),__()}function __(){if(Ht!==5)return!1;var t=zi,r=yd;yd=0;var a=ma($a),l=K.T,h=oe.p;try{oe.p=32>a?32:a,K.T=null,a=_d,_d=null;var d=zi,E=$a;if(Ht=0,Ya=zi=null,$a=0,(Ye&6)!==0)throw Error(s(331));var T=Ye;if(Ye|=4,t_(d.current),Zy(d,d.current,E,a),Ye=T,wl(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(st,d)}catch{}return!0}finally{oe.p=h,K.T=l,y_(t,r)}}function v_(t,r,a){r=On(a,r),r=Wf(t.stateNode,r,2),t=Ni(t,r,2),t!==null&&(Mr(t,2),yr(t))}function tt(t,r,a){if(t.tag===3)v_(t,t,a);else for(;r!==null;){if(r.tag===3){v_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ji===null||!ji.has(l))){t=On(a,t),a=wy(2),l=Ni(r,a,2),l!==null&&(Ay(a,l,r,t),Mr(l,2),yr(l));break}}r=r.return}}function wd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new fw;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(dd=!0,h.add(a),t=yw.bind(null,t,r,a),r.then(t,t))}function yw(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(je&a)===a&&(ft===4||ft===3&&(je&62914560)===je&&300>tn()-pd?(Ye&2)===0&&Xa(t,0):md|=a,Ka===je&&(Ka=0)),yr(t)}function E_(t,r){r===0&&(r=Oo()),t=Oa(t,r),t!==null&&(Mr(t,r),yr(t))}function _w(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),E_(t,a)}function vw(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),E_(t,a)}function Ew(t,r){return Jn(t,r)}var Tc=null,Za=null,Ad=!1,bc=!1,Sd=!1,Qs=0;function yr(t){t!==Za&&t.next===null&&(Za===null?Tc=Za=t:Za=Za.next=t),bc=!0,Ad||(Ad=!0,bw())}function wl(t,r){if(!Sd&&bc){Sd=!0;do for(var a=!1,l=Tc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Ot(42|t)+1)-1,d&=h&~(E&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,A_(l,d))}else d=je,d=vi(l,l===nt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Or(l,d)||(a=!0,A_(l,d));l=l.next}while(a);Sd=!1}}function Tw(){T_()}function T_(){bc=Ad=!1;var t=0;Qs!==0&&(Nw()&&(t=Qs),Qs=0);for(var r=tn(),a=null,l=Tc;l!==null;){var h=l.next,d=b_(l,r);d===0?(l.next=null,a===null?Tc=h:a.next=h,h===null&&(Za=a)):(a=l,(t!==0||(d&3)!==0)&&(bc=!0)),l=h}wl(t)}function b_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-Ot(d),T=1<<E,D=h[E];D===-1?((T&a)===0||(T&l)!==0)&&(h[E]=mn(T,r)):D<=r&&(t.expiredLanes|=T),d&=~T}if(r=nt,a=je,a=vi(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ir(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Or(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ir(l),ma(a)){case 2:case 8:a=_i;break;case 32:a=er;break;case 268435456:a=Nr;break;default:a=er}return l=w_.bind(null,t),a=Jn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ir(l),t.callbackPriority=2,t.callbackNode=null,2}function w_(t,r){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ec()&&t.callbackNode!==a)return null;var l=je;return l=vi(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(s_(t,l,r),b_(t,tn()),t.callbackNode!=null&&t.callbackNode===a?w_.bind(null,t):null)}function A_(t,r){if(Ec())return null;s_(t,r,!0)}function bw(){Ow(function(){(Ye&6)!==0?Jn(yi,Tw):T_()})}function Rd(){return Qs===0&&(Qs=Do()),Qs}function S_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ea(""+t)}function R_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function ww(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=S_((h[vt]||null).action),E=l.submitter;E&&(r=(r=E[vt]||null)?S_(r.formAction):E.getAttribute("formAction"),r!==null&&(d=r,E=null));var T=new Ta("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qs!==0){var D=E?R_(h,E):new FormData(h);Qf(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(T.preventDefault(),D=E?R_(h,E):new FormData(h),Qf(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var xd=0;xd<hf.length;xd++){var Cd=hf[xd],Aw=Cd.toLowerCase(),Sw=Cd[0].toUpperCase()+Cd.slice(1);Hn(Aw,"on"+Sw)}Hn(sp,"onAnimationEnd"),Hn(ap,"onAnimationIteration"),Hn(op,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(qb,"onTransitionRun"),Hn(Hb,"onTransitionStart"),Hn(Fb,"onTransitionCancel"),Hn(lp,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function x_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var E=l.length-1;0<=E;E--){var T=l[E],D=T.instance,q=T.currentTarget;if(T=T.listener,D!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=q;try{d(h)}catch(Z){uc(Z)}h.currentTarget=null,d=D}else for(E=0;E<l.length;E++){if(T=l[E],D=T.instance,q=T.currentTarget,T=T.listener,D!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=q;try{d(h)}catch(Z){uc(Z)}h.currentTarget=null,d=D}}}}function ke(t,r){var a=r[Vo];a===void 0&&(a=r[Vo]=new Set);var l=t+"__bubble";a.has(l)||(C_(r,t,2,!1),a.add(l))}function Id(t,r,a){var l=0;r&&(l|=4),C_(a,t,l,r)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Nd(t){if(!t[wc]){t[wc]=!0,Po.forEach(function(a){a!=="selectionchange"&&(Rw.has(a)||Id(a,!1,t),Id(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[wc]||(r[wc]=!0,Id("selectionchange",!1,r))}}function C_(t,r,a,l){switch(Z_(r)){case 2:var h=Jw;break;case 8:h=eA;break;default:h=Fd}a=h.bind(null,r,a,t),h=void 0,!Nn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Dd(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=Vr(T),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=d=E;continue e}T=T.parentNode}}l=l.return}Su(function(){var q=d,Z=In(a),te=[];e:{var G=up.get(t);if(G!==void 0){var Q=Ta,Ae=t;switch(t){case"keypress":if(lr(a)===0)break e;case"keydown":case"keyup":Q=xa;break;case"focusin":Ae="focus",Q=Aa;break;case"focusout":Ae="blur",Q=Aa;break;case"beforeblur":case"afterblur":Q=Aa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ku;break;case sp:case ap:case op:Q=Sa;break;case lp:Q=Vu;break;case"scroll":case"scrollend":Q=Ru;break;case"wheel":Q=Ca;break;case"copy":case"cut":case"paste":Q=Ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Yo;break;case"toggle":case"beforetoggle":Q=Lu}var Ee=(r&4)!==0,et=!Ee&&(t==="scroll"||t==="scrollend"),L=Ee?G!==null?G+"Capture":null:G;Ee=[];for(var P=q,z;P!==null;){var J=P;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||L===null||(J=Ss(P,L),J!=null&&Ee.push(Sl(P,J,z))),et)break;P=P.return}0<Ee.length&&(G=new Q(G,Ae,null,a,Z),te.push({event:G,listeners:Ee}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",G&&a!==jr&&(Ae=a.relatedTarget||a.fromElement)&&(Vr(Ae)||Ae[xn]))break e;if((Q||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(Ae=a.relatedTarget||a.toElement,Q=q,Ae=Ae?Vr(Ae):null,Ae!==null&&(et=u(Ae),Ee=Ae.tag,Ae!==et||Ee!==5&&Ee!==27&&Ee!==6)&&(Ae=null)):(Q=null,Ae=q),Q!==Ae)){if(Ee=Dn,J="onMouseLeave",L="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Yo,J="onPointerLeave",L="onPointerEnter",P="pointer"),et=Q==null?G:ir(Q),z=Ae==null?G:ir(Ae),G=new Ee(J,P+"leave",Q,a,Z),G.target=et,G.relatedTarget=z,J=null,Vr(Z)===q&&(Ee=new Ee(L,P+"enter",Ae,a,Z),Ee.target=z,Ee.relatedTarget=et,J=Ee),et=J,Q&&Ae)t:{for(Ee=Q,L=Ae,P=0,z=Ee;z;z=Ja(z))P++;for(z=0,J=L;J;J=Ja(J))z++;for(;0<P-z;)Ee=Ja(Ee),P--;for(;0<z-P;)L=Ja(L),z--;for(;P--;){if(Ee===L||L!==null&&Ee===L.alternate)break t;Ee=Ja(Ee),L=Ja(L)}Ee=null}else Ee=null;Q!==null&&I_(te,G,Q,Ee,!1),Ae!==null&&et!==null&&I_(te,et,Ae,Ee,!0)}}e:{if(G=q?ir(q):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var me=Yg;else if(Ct(G))if($g)me=jb;else{me=Lb;var De=Pb}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Bo(q.elementType)&&(me=Yg):me=Ub;if(me&&(me=me(t,q))){Fr(te,me,a,Z);break e}De&&De(t,G,q),t==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Si(G,"number",G.value)}switch(De=q?ir(q):window,t){case"focusin":(Ct(De)||De.contentEditable==="true")&&(Ia=De,lf=q,Wo=null);break;case"focusout":Wo=lf=Ia=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,rp(te,a,Z);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":rp(te,a,Z)}var ye;if(hr)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Le?X(t,a)&&(Te="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(_&&a.locale!=="ko"&&(Le||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Le&&(ye=Ho()):(or=Z,Ri="value"in or?or.value:or.textContent,Le=!0)),De=Ac(q,Te),0<De.length&&(Te=new Qo(Te,t,null,a,Z),te.push({event:Te,listeners:De}),ye?Te.data=ye:(ye=le(a),ye!==null&&(Te.data=ye)))),(ye=y?xt(t,a):Ue(t,a))&&(Te=Ac(q,"onBeforeInput"),0<Te.length&&(De=new Qo("onBeforeInput","beforeinput",null,a,Z),te.push({event:De,listeners:Te}),De.data=ye)),ww(te,t,q,a,Z)}x_(te,r)})}function Sl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Ac(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ss(t,a),h!=null&&l.unshift(Sl(t,h,d)),h=Ss(t,r),h!=null&&l.push(Sl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ja(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function I_(t,r,a,l,h){for(var d=r._reactName,E=[];a!==null&&a!==l;){var T=a,D=T.alternate,q=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||q===null||(D=q,h?(q=Ss(a,d),q!=null&&E.unshift(Sl(a,q,D))):h||(q=Ss(a,d),q!=null&&E.push(Sl(a,q,D)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var xw=/\r\n?/g,Cw=/\u0000|\uFFFD/g;function N_(t){return(typeof t=="string"?t:""+t).replace(xw,`
`).replace(Cw,"")}function D_(t,r){return r=N_(r),N_(t)===r}function Sc(){}function Je(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Cn(t,""+l);break;case"className":sr(t,"class",l);break;case"tabIndex":sr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(t,a,l);break;case"style":zo(t,l,d);break;case"data":if(r!=="object"){sr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ea(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Je(t,r,"name",h.name,h,null),Je(t,r,"formEncType",h.formEncType,h,null),Je(t,r,"formMethod",h.formMethod,h,null),Je(t,r,"formTarget",h.formTarget,h,null)):(Je(t,r,"encType",h.encType,h,null),Je(t,r,"method",h.method,h,null),Je(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ea(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Sc);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ea(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),Ai(t,"popover",l);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ai(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ef.get(a)||a,Ai(t,a,l))}}function Od(t,r,a,l,h,d){switch(a){case"style":zo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Cn(t,l):(typeof l=="number"||typeof l=="bigint")&&Cn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Sc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[vt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ai(t,a,l)}}}function Ft(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,d,E,a,null)}}h&&Je(t,r,"srcSet",a.srcSet,a,null),l&&Je(t,r,"src",a.src,a,null);return;case"input":ke("invalid",t);var T=d=E=h=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":E=Z;break;case"checked":D=Z;break;case"defaultChecked":q=Z;break;case"value":d=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:Je(t,r,l,Z,a,null)}}bs(t,d,T,D,q,E,h,!1),va(t);return;case"select":ke("invalid",t),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:Je(t,r,h,T,a,null)}r=d,a=E,t.multiple=!!l,r!=null?Ur(t,!!l,r,!1):a!=null&&Ur(t,!!l,a,!0);return;case"textarea":ke("invalid",t),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Je(t,r,E,T,a,null)}ws(t,l,h,d),va(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(t,r,D,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)ke(Al[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,q,l,a,null)}return;default:if(Bo(r)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Od(t,r,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Je(t,r,T,l,a,null))}function Iw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,T=null,D=null,q=null,Z=null;for(Q in a){var te=a[Q];if(a.hasOwnProperty(Q)&&te!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=te;default:l.hasOwnProperty(Q)||Je(t,r,Q,null,l,te)}}for(var G in l){var Q=l[G];if(te=a[G],l.hasOwnProperty(G)&&(Q!=null||te!=null))switch(G){case"type":d=Q;break;case"name":h=Q;break;case"checked":q=Q;break;case"defaultChecked":Z=Q;break;case"value":E=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==te&&Je(t,r,G,Q,l,te)}}gn(t,E,T,D,q,Z,d,h);return;case"select":Q=E=T=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Q=D;default:l.hasOwnProperty(d)||Je(t,r,d,null,l,D)}for(h in l)if(d=l[h],D=a[h],l.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":E=d;default:d!==D&&Je(t,r,h,d,l,D)}r=T,a=E,l=Q,G!=null?Ur(t,!!a,G,!1):!!l!=!!a&&(r!=null?Ur(t,!!a,r,!0):Ur(t,!!a,a?[]:"",!1));return;case"textarea":Q=G=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Je(t,r,T,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":G=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Je(t,r,E,h,l,d)}We(t,G,Q);return;case"option":for(var Ae in a)if(G=a[Ae],a.hasOwnProperty(Ae)&&G!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":t.selected=!1;break;default:Je(t,r,Ae,null,l,G)}for(D in l)if(G=l[D],Q=a[D],l.hasOwnProperty(D)&&G!==Q&&(G!=null||Q!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Je(t,r,D,G,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)G=a[Ee],a.hasOwnProperty(Ee)&&G!=null&&!l.hasOwnProperty(Ee)&&Je(t,r,Ee,null,l,G);for(q in l)if(G=l[q],Q=a[q],l.hasOwnProperty(q)&&G!==Q&&(G!=null||Q!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:Je(t,r,q,G,l,Q)}return;default:if(Bo(r)){for(var et in a)G=a[et],a.hasOwnProperty(et)&&G!==void 0&&!l.hasOwnProperty(et)&&Od(t,r,et,void 0,l,G);for(Z in l)G=l[Z],Q=a[Z],!l.hasOwnProperty(Z)||G===Q||G===void 0&&Q===void 0||Od(t,r,Z,G,l,Q);return}}for(var L in a)G=a[L],a.hasOwnProperty(L)&&G!=null&&!l.hasOwnProperty(L)&&Je(t,r,L,null,l,G);for(te in l)G=l[te],Q=a[te],!l.hasOwnProperty(te)||G===Q||G==null&&Q==null||Je(t,r,te,G,l,Q)}var kd=null,Md=null;function Rc(t){return t.nodeType===9?t:t.ownerDocument}function O_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Vd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pd=null;function Nw(){var t=window.event;return t&&t.type==="popstate"?t===Pd?!1:(Pd=t,!0):(Pd=null,!1)}var M_=typeof setTimeout=="function"?setTimeout:void 0,Dw=typeof clearTimeout=="function"?clearTimeout:void 0,V_=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof V_<"u"?function(t){return V_.resolve(null).then(t).catch(kw)}:M_;function kw(t){setTimeout(function(){throw t})}function qi(t){return t==="head"}function P_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Rl(E.documentElement),a&2&&Rl(E.body),a&4)for(a=E.head,Rl(a),E=a.firstChild;E;){var T=E.nextSibling,D=E.nodeName;E[_s]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(h===0){t.removeChild(d),Ml(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ml(r)}function Ld(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ld(a),wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Mw(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_s])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function Vw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function Ud(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Pw(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Gn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var jd=null;function L_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function U_(t,r,a){switch(r=Rc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Rl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);wi(t)}var Un=new Map,j_=new Set;function xc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ri=oe.d;oe.d={f:Lw,r:Uw,D:jw,C:zw,L:Bw,m:qw,X:Fw,S:Hw,M:Gw};function Lw(){var t=ri.f(),r=_c();return t||r}function Uw(t){var r=rr(t);r!==null&&r.tag===5&&r.type==="form"?sy(r):ri.r(t)}var eo=typeof document>"u"?null:document;function z_(t,r,a){var l=eo;if(l&&typeof r=="string"&&r){var h=Et(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),j_.has(h)||(j_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Ft(r,"link",t),dt(r),l.head.appendChild(r)))}}function jw(t){ri.D(t),z_("dns-prefetch",t,null)}function zw(t,r){ri.C(t,r),z_("preconnect",t,r)}function Bw(t,r,a){ri.L(t,r,a);var l=eo;if(l&&t&&r){var h='link[rel="preload"][as="'+Et(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Et(a.imageSizes)+'"]')):h+='[href="'+Et(t)+'"]';var d=h;switch(r){case"style":d=to(t);break;case"script":d=no(t)}Un.has(d)||(t=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Un.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(xl(d))||r==="script"&&l.querySelector(Cl(d))||(r=l.createElement("link"),Ft(r,"link",t),dt(r),l.head.appendChild(r)))}}function qw(t,r){ri.m(t,r);var a=eo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Et(l)+'"][href="'+Et(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=no(t)}if(!Un.has(d)&&(t=v({rel:"modulepreload",href:t},r),Un.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Cl(d)))return}l=a.createElement("link"),Ft(l,"link",t),dt(l),a.head.appendChild(l)}}}function Hw(t,r,a){ri.S(t,r,a);var l=eo;if(l&&t){var h=rn(l).hoistableStyles,d=to(t);r=r||"default";var E=h.get(d);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(xl(d)))T.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Un.get(d))&&zd(t,a);var D=E=l.createElement("link");dt(D),Ft(D,"link",t),D._p=new Promise(function(q,Z){D.onload=q,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Cc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(d,E)}}}function Fw(t,r){ri.X(t,r);var a=eo;if(a&&t){var l=rn(a).hoistableScripts,h=no(t),d=l.get(h);d||(d=a.querySelector(Cl(h)),d||(t=v({src:t,async:!0},r),(r=Un.get(h))&&Bd(t,r),d=a.createElement("script"),dt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Gw(t,r){ri.M(t,r);var a=eo;if(a&&t){var l=rn(a).hoistableScripts,h=no(t),d=l.get(h);d||(d=a.querySelector(Cl(h)),d||(t=v({src:t,async:!0,type:"module"},r),(r=Un.get(h))&&Bd(t,r),d=a.createElement("script"),dt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function B_(t,r,a,l){var h=(h=we.current)?xc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=to(a.href),a=rn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=to(a.href);var d=rn(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(xl(t)))&&!d._p&&(E.instance=d,E.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),d||Qw(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=no(a),a=rn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function to(t){return'href="'+Et(t)+'"'}function xl(t){return'link[rel="stylesheet"]['+t+"]"}function q_(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function Qw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Ft(r,"link",a),dt(r),t.head.appendChild(r))}function no(t){return'[src="'+Et(t)+'"]'}function Cl(t){return"script[async]"+t}function H_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Et(a.href)+'"]');if(l)return r.instance=l,dt(l),l;var h=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),dt(l),Ft(l,"style",h),Cc(l,a.precedence,t),r.instance=l;case"stylesheet":h=to(a.href);var d=t.querySelector(xl(h));if(d)return r.state.loading|=4,r.instance=d,dt(d),d;l=q_(a),(h=Un.get(h))&&zd(l,h),d=(t.ownerDocument||t).createElement("link"),dt(d);var E=d;return E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),Ft(d,"link",l),r.state.loading|=4,Cc(d,a.precedence,t),r.instance=d;case"script":return d=no(a.src),(h=t.querySelector(Cl(d)))?(r.instance=h,dt(h),h):(l=a,(h=Un.get(d))&&(l=v({},a),Bd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),dt(h),Ft(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Cc(l,a.precedence,t));return r.instance}function Cc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function zd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Bd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ic=null;function F_(t,r,a){if(Ic===null){var l=new Map,h=Ic=new Map;h.set(a,l)}else h=Ic,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[_s]||d[Rt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(r)||"";E=t+E;var T=l.get(E);T?T.push(d):l.set(E,[d])}}return l}function G_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Kw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Q_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Il=null;function Yw(){}function $w(t,r,a){if(Il===null)throw Error(s(475));var l=Il;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=to(a.href),d=t.querySelector(xl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Nc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,dt(d);return}d=t.ownerDocument||t,a=q_(a),(h=Un.get(h))&&zd(a,h),d=d.createElement("link"),dt(d);var E=d;E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),Ft(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Nc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function Xw(){if(Il===null)throw Error(s(475));var t=Il;return t.stylesheets&&t.count===0&&qd(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&qd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Nc(){if(this.count--,this.count===0){if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Dc=null;function qd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Dc=new Map,r.forEach(Ww,t),Dc=null,Nc.call(t))}function Ww(t,r){if(!(r.state.loading&4)){var a=Dc.get(t);if(a)var l=a.get(null);else{a=new Map,Dc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=Nc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Nl={$$typeof:F,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function Zw(t,r,a,l,h,d,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.hiddenUpdates=kr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function K_(t,r,a,l,h,d,E,T,D,q,Z,te){return t=new Zw(t,r,a,E,T,D,q,te),r=1,d===!0&&(r|=24),d=yn(3,null,null,r),t.current=d,d.stateNode=t,r=wf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},xf(d),t}function Y_(t){return t?(t=ka,t):ka}function $_(t,r,a,l,h,d){h=Y_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ii(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ni(t,l,r),a!==null&&(bn(a,t,r),al(a,t,r))}function X_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Hd(t,r){X_(t,r),(t=t.alternate)&&X_(t,r)}function W_(t){if(t.tag===13){var r=Oa(t,67108864);r!==null&&bn(r,t,67108864),Hd(t,67108864)}}var Oc=!0;function Jw(t,r,a,l){var h=K.T;K.T=null;var d=oe.p;try{oe.p=2,Fd(t,r,a,l)}finally{oe.p=d,K.T=h}}function eA(t,r,a,l){var h=K.T;K.T=null;var d=oe.p;try{oe.p=8,Fd(t,r,a,l)}finally{oe.p=d,K.T=h}}function Fd(t,r,a,l){if(Oc){var h=Gd(l);if(h===null)Dd(t,r,l,kc,a),J_(t,l);else if(nA(h,t,r,a,l))l.stopPropagation();else if(J_(t,l),r&4&&-1<tA.indexOf(t)){for(;h!==null;){var d=rr(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=dn(d.pendingLanes);if(E!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var D=1<<31-Ot(E);T.entanglements[1]|=D,E&=~D}yr(d),(Ye&6)===0&&(pc=tn()+500,wl(0))}}break;case 13:T=Oa(d,2),T!==null&&bn(T,d,2),_c(),Hd(d,2)}if(d=Gd(l),d===null&&Dd(t,r,l,kc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Dd(t,r,l,null,a)}}function Gd(t){return t=In(t),Qd(t)}var kc=null;function Qd(t){if(kc=null,t=Vr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return kc=t,null}function Z_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Io()){case yi:return 2;case _i:return 8;case er:case No:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var Kd=!1,Hi=null,Fi=null,Gi=null,Dl=new Map,Ol=new Map,Qi=[],tA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J_(t,r){switch(t){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Dl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(r.pointerId)}}function kl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=rr(r),r!==null&&W_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function nA(t,r,a,l,h){switch(r){case"focusin":return Hi=kl(Hi,t,r,a,l,h),!0;case"dragenter":return Fi=kl(Fi,t,r,a,l,h),!0;case"mouseover":return Gi=kl(Gi,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Dl.set(d,kl(Dl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ol.set(d,kl(Ol.get(d)||null,t,r,a,l,h)),!0}return!1}function e0(t){var r=Vr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,_u(t.priority,function(){if(a.tag===13){var l=Tn();l=Ei(l);var h=Oa(a,l);h!==null&&bn(h,a,l),Hd(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Gd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);jr=l,a.target.dispatchEvent(l),jr=null}else return r=rr(a),r!==null&&W_(r),t.blockedOn=a,!1;r.shift()}return!0}function t0(t,r,a){Mc(t)&&a.delete(r)}function rA(){Kd=!1,Hi!==null&&Mc(Hi)&&(Hi=null),Fi!==null&&Mc(Fi)&&(Fi=null),Gi!==null&&Mc(Gi)&&(Gi=null),Dl.forEach(t0),Ol.forEach(t0)}function Vc(t,r){t.blockedOn===r&&(t.blockedOn=null,Kd||(Kd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,rA)))}var Pc=null;function n0(t){Pc!==t&&(Pc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Pc===t&&(Pc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Qd(l||a)===null)continue;break}var d=rr(a);d!==null&&(t.splice(r,3),r-=3,Qf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ml(t){function r(D){return Vc(D,t)}Hi!==null&&Vc(Hi,t),Fi!==null&&Vc(Fi,t),Gi!==null&&Vc(Gi,t),Dl.forEach(r),Ol.forEach(r);for(var a=0;a<Qi.length;a++){var l=Qi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Qi.length&&(a=Qi[0],a.blockedOn===null);)e0(a),a.blockedOn===null&&Qi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[vt]||null;if(typeof d=="function")E||n0(a);else if(E){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[vt]||null)T=E.formAction;else if(Qd(h)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),n0(a)}}}function Yd(t){this._internalRoot=t}Lc.prototype.render=Yd.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Tn();$_(a,l,t,r,null,null)},Lc.prototype.unmount=Yd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;$_(t.current,2,null,t,null,null),_c(),r[xn]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ti();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Qi.length&&r!==0&&r<Qi[a].priority;a++);Qi.splice(a,0,t),a===0&&e0(t)}};var r0=e.version;if(r0!=="19.1.1")throw Error(s(527,r0,"19.1.1"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{st=Uc.inject(iA),qe=Uc}catch{}}return Pl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=vy,d=Ey,E=Ty,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=K_(t,1,!1,null,null,a,l,h,d,E,T,null),t[xn]=r.current,Nd(t),new Yd(r)},Pl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=vy,E=Ey,T=Ty,D=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),r=K_(t,1,!0,r,a??null,l,h,d,E,T,D,q),r.context=Y_(null),a=r.current,l=Tn(),l=Ei(l),h=Ii(l),h.callback=null,Ni(a,h,l),a=l,r.current.lanes=a,Mr(r,a),yr(r),t[xn]=r.current,Nd(t),new Lc(r)},Pl.version="19.1.1",Pl}var d0;function mA(){if(d0)return Wd.exports;d0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wd.exports=dA(),Wd.exports}var gA=mA();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var m0="popstate";function pA(i={}){function e(o,u){let{pathname:f="/",search:m="",hash:p=""}=aa(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),gm("",{pathname:f,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:Yl(u))}function s(o,u){Xn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return _A(e,n,s,i)}function ut(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Xn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yA(){return Math.random().toString(36).substring(2,10)}function g0(i,e){return{usr:i.state,key:i.key,idx:e}}function gm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?aa(e):e,state:n,key:e&&e.key||s||yA()}}function Yl({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function aa(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function _A(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=v();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function v(){return(f.state||{idx:null}).idx}function S(){m="POP";let B=v(),$=B==null?null:B-g;g=B,p&&p({action:m,location:H.location,delta:$})}function w(B,$){m="PUSH";let ie=gm(H.location,B,$);n&&n(ie,B),g=v()+1;let F=g0(ie,g),fe=H.createHref(ie);try{f.pushState(F,"",fe)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(fe)}u&&p&&p({action:m,location:H.location,delta:1})}function N(B,$){m="REPLACE";let ie=gm(H.location,B,$);n&&n(ie,B),g=v();let F=g0(ie,g),fe=H.createHref(ie);f.replaceState(F,"",fe),u&&p&&p({action:m,location:H.location,delta:0})}function k(B){return vA(B)}let H={get action(){return m},get location(){return i(o,f)},listen(B){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(m0,S),p=B,()=>{o.removeEventListener(m0,S),p=null}},createHref(B){return e(o,B)},createURL:k,encodeLocation(B){let $=k(B);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:w,replace:N,go(B){return f.go(B)}};return H}function vA(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ut(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:Yl(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Kv(i,e,n="/"){return EA(i,e,n,!1)}function EA(i,e,n,s){let o=typeof e=="string"?aa(e):e,u=ui(o.pathname||"/",n);if(u==null)return null;let f=Yv(i);TA(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=OA(u);m=NA(f[p],g,s)}return m}function Yv(i,e=[],n=[],s="",o=!1){let u=(f,m,p=o,g)=>{let v={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&p)return;ut(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let S=oi([s,v.relativePath]),w=n.concat(v);f.children&&f.children.length>0&&(ut(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Yv(f.children,e,w,S,p)),!(f.path==null&&!f.index)&&e.push({path:S,score:CA(S,f.index),routesMeta:w})};return i.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of $v(f.path))u(f,m,!0,p)}),e}function $v(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=$v(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function TA(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:IA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var bA=/^:[\w-]+$/,wA=3,AA=2,SA=1,RA=10,xA=-2,p0=i=>i==="*";function CA(i,e){let n=i.split("/"),s=n.length;return n.some(p0)&&(s+=xA),e&&(s+=AA),n.filter(o=>!p0(o)).reduce((o,u)=>o+(bA.test(u)?wA:u===""?SA:RA),s)}function IA(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function NA(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,v=u==="/"?e:e.slice(u.length)||"/",S=sh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),w=p.route;if(!S&&g&&n&&!s[s.length-1].route.index&&(S=sh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:oi([u,S.pathname]),pathnameBase:PA(oi([u,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(u=oi([u,S.pathnameBase]))}return f}function sh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=DA(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:v,isOptional:S},w)=>{if(v==="*"){let k=m[w]||"";f=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const N=m[w];return S&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function DA(i,e=!1,n=!0){Xn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function OA(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ui(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function kA(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?aa(i):i;return{pathname:n?n.startsWith("/")?n:MA(n,e):e,search:LA(s),hash:UA(o)}}function MA(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function tm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VA(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xv(i){let e=VA(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Wv(i,e,n,s=!1){let o;typeof i=="string"?o=aa(i):(o={...i},ut(!o.pathname||!o.pathname.includes("?"),tm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),tm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),tm("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let S=e.length-1;if(!s&&f.startsWith("..")){let w=f.split("/");for(;w[0]==="..";)w.shift(),S-=1;o.pathname=w.join("/")}m=S>=0?e[S]:"/"}let p=kA(o,m),g=f&&f!=="/"&&f.endsWith("/"),v=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var oi=i=>i.join("/").replace(/\/\/+/g,"/"),PA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),LA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,UA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function jA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Zv=["POST","PUT","PATCH","DELETE"];new Set(Zv);var zA=["GET",...Zv];new Set(zA);var Eo=Y.createContext(null);Eo.displayName="DataRouter";var xh=Y.createContext(null);xh.displayName="DataRouterState";Y.createContext(!1);var Jv=Y.createContext({isTransitioning:!1});Jv.displayName="ViewTransition";var BA=Y.createContext(new Map);BA.displayName="Fetchers";var qA=Y.createContext(null);qA.displayName="Await";var xr=Y.createContext(null);xr.displayName="Navigation";var ru=Y.createContext(null);ru.displayName="Location";var mi=Y.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var Gm=Y.createContext(null);Gm.displayName="RouteError";function HA(i,{relative:e}={}){ut(iu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=Y.useContext(xr),{hash:o,pathname:u,search:f}=su(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:oi([n,u])),s.createHref({pathname:m,search:f,hash:o})}function iu(){return Y.useContext(ru)!=null}function ds(){return ut(iu(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(ru).location}var eE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tE(i){Y.useContext(xr).static||Y.useLayoutEffect(i)}function FA(){let{isDataRoute:i}=Y.useContext(mi);return i?rS():GA()}function GA(){ut(iu(),"useNavigate() may be used only in the context of a <Router> component.");let i=Y.useContext(Eo),{basename:e,navigator:n}=Y.useContext(xr),{matches:s}=Y.useContext(mi),{pathname:o}=ds(),u=JSON.stringify(Xv(s)),f=Y.useRef(!1);return tE(()=>{f.current=!0}),Y.useCallback((p,g={})=>{if(Xn(f.current,eE),!f.current)return;if(typeof p=="number"){n.go(p);return}let v=Wv(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:oi([e,v.pathname])),(g.replace?n.replace:n.push)(v,g.state,g)},[e,n,u,o,i])}Y.createContext(null);function su(i,{relative:e}={}){let{matches:n}=Y.useContext(mi),{pathname:s}=ds(),o=JSON.stringify(Xv(n));return Y.useMemo(()=>Wv(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function QA(i,e){return nE(i,e)}function nE(i,e,n,s){ut(iu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Y.useContext(xr),{matches:u}=Y.useContext(mi),f=u[u.length-1],m=f?f.params:{},p=f?f.pathname:"/",g=f?f.pathnameBase:"/",v=f&&f.route;{let $=v&&v.path||"";rE(p,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let S=ds(),w;if(e){let $=typeof e=="string"?aa(e):e;ut(g==="/"||$.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),w=$}else w=S;let N=w.pathname||"/",k=N;if(g!=="/"){let $=g.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice($.length).join("/")}let H=Kv(i,{pathname:k});Xn(v||H!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Xn(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=WA(H&&H.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:oi([g,o.encodeLocation?o.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:oi([g,o.encodeLocation?o.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),u,n,s);return e&&B?Y.createElement(ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},B):B}function KA(){let i=nS(),e=jA(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=Y.createElement(Y.Fragment,null,Y.createElement("p",null,"💿 Hey developer 👋"),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:u},"ErrorBoundary")," or"," ",Y.createElement("code",{style:u},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:o},n):null,f)}var YA=Y.createElement(KA,null),$A=class extends Y.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Y.createElement(mi.Provider,{value:this.props.routeContext},Y.createElement(Gm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XA({routeContext:i,match:e,children:n}){let s=Y.useContext(Eo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(mi.Provider,{value:i},n)}function WA(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n?.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);ut(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:v,errors:S}=n,w=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||w){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,v)=>{let S,w=!1,N=null,k=null;n&&(S=u&&g.route.id?u[g.route.id]:void 0,N=g.route.errorElement||YA,f&&(m<0&&v===0?(rE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,k=null):m===v&&(w=!0,k=g.route.hydrateFallbackElement||null)));let H=e.concat(o.slice(0,v+1)),B=()=>{let $;return S?$=N:w?$=k:g.route.Component?$=Y.createElement(g.route.Component,null):g.route.element?$=g.route.element:$=p,Y.createElement(XA,{match:g,routeContext:{outlet:p,matches:H,isDataRoute:n!=null},children:$})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?Y.createElement($A,{location:n.location,revalidation:n.revalidation,component:N,error:S,children:B(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):B()},null)}function Qm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZA(i){let e=Y.useContext(Eo);return ut(e,Qm(i)),e}function JA(i){let e=Y.useContext(xh);return ut(e,Qm(i)),e}function eS(i){let e=Y.useContext(mi);return ut(e,Qm(i)),e}function Km(i){let e=eS(i),n=e.matches[e.matches.length-1];return ut(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function tS(){return Km("useRouteId")}function nS(){let i=Y.useContext(Gm),e=JA("useRouteError"),n=Km("useRouteError");return i!==void 0?i:e.errors?.[n]}function rS(){let{router:i}=ZA("useNavigate"),e=Km("useNavigate"),n=Y.useRef(!1);return tE(()=>{n.current=!0}),Y.useCallback(async(o,u={})=>{Xn(n.current,eE),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var y0={};function rE(i,e,n){!e&&!y0[i]&&(y0[i]=!0,Xn(!1,n))}Y.memo(iS);function iS({routes:i,future:e,state:n}){return nE(i,void 0,n,e)}function Ks(i){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ut(!iu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=aa(n));let{pathname:p="/",search:g="",hash:v="",state:S=null,key:w="default"}=n,N=Y.useMemo(()=>{let k=ui(p,f);return k==null?null:{location:{pathname:k,search:g,hash:v,state:S,key:w},navigationType:s}},[f,p,g,v,S,w,s]);return Xn(N!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:Y.createElement(xr.Provider,{value:m},Y.createElement(ru.Provider,{children:e,value:N}))}function aS({children:i,location:e}){return QA(pm(i),e)}function pm(i,e=[]){let n=[];return Y.Children.forEach(i,(s,o)=>{if(!Y.isValidElement(s))return;let u=[...e,o];if(s.type===Y.Fragment){n.push.apply(n,pm(s.props.children,u));return}ut(s.type===Ks,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=pm(s.props.children,u)),n.push(f)}),n}var Qc="get",Kc="application/x-www-form-urlencoded";function Ch(i){return i!=null&&typeof i.tagName=="string"}function oS(i){return Ch(i)&&i.tagName.toLowerCase()==="button"}function lS(i){return Ch(i)&&i.tagName.toLowerCase()==="form"}function uS(i){return Ch(i)&&i.tagName.toLowerCase()==="input"}function cS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function hS(i,e){return i.button===0&&(!e||e==="_self")&&!cS(i)}var jc=null;function fS(){if(jc===null)try{new FormData(document.createElement("form"),0),jc=!1}catch{jc=!0}return jc}var dS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nm(i){return i!=null&&!dS.has(i)?(Xn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kc}"`),null):i}function mS(i,e){let n,s,o,u,f;if(lS(i)){let m=i.getAttribute("action");s=m?ui(m,e):null,n=i.getAttribute("method")||Qc,o=nm(i.getAttribute("enctype"))||Kc,u=new FormData(i)}else if(oS(i)||uS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?ui(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Qc,o=nm(i.getAttribute("formenctype"))||nm(m.getAttribute("enctype"))||Kc,u=new FormData(m,i),!fS()){let{name:g,type:v,value:S}=i;if(v==="image"){let w=g?`${g}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else g&&u.append(g,S)}}else{if(Ch(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qc,s=null,o=Kc,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ym(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function gS(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&ui(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function pS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function _S(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await pS(u,n);return f.links?f.links():[]}return[]}));return bS(s.flat(1).filter(yS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function _0(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function vS(i,e,{includeHydrateFallback:n}={}){return ES(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function ES(i){return[...new Set(i)]}function TS(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function bS(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(TS(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function iE(){let i=Y.useContext(Eo);return Ym(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function wS(){let i=Y.useContext(xh);return Ym(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var $m=Y.createContext(void 0);$m.displayName="FrameworkContext";function sE(){let i=Y.useContext($m);return Ym(i,"You must render this element inside a <HydratedRouter> element"),i}function AS(i,e){let n=Y.useContext($m),[s,o]=Y.useState(!1),[u,f]=Y.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:S}=e,w=Y.useRef(null);Y.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let H=$=>{$.forEach(ie=>{f(ie.isIntersecting)})},B=new IntersectionObserver(H,{threshold:.5});return w.current&&B.observe(w.current),()=>{B.disconnect()}}},[i]),Y.useEffect(()=>{if(s){let H=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(H)}}},[s]);let N=()=>{o(!0)},k=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,w,{}]:[u,w,{onFocus:Ll(m,N),onBlur:Ll(p,k),onMouseEnter:Ll(g,N),onMouseLeave:Ll(v,k),onTouchStart:Ll(S,N)}]:[!1,w,{}]}function Ll(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function SS({page:i,...e}){let{router:n}=iE(),s=Y.useMemo(()=>Kv(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?Y.createElement(xS,{page:i,matches:s,...e}):null}function RS(i){let{manifest:e,routeModules:n}=sE(),[s,o]=Y.useState([]);return Y.useEffect(()=>{let u=!1;return _S(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function xS({page:i,matches:e,...n}){let s=ds(),{manifest:o,routeModules:u}=sE(),{basename:f}=iE(),{loaderData:m,matches:p}=wS(),g=Y.useMemo(()=>_0(i,e,p,o,s,"data"),[i,e,p,o,s]),v=Y.useMemo(()=>_0(i,e,p,o,s,"assets"),[i,e,p,o,s]),S=Y.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let k=new Set,H=!1;if(e.forEach($=>{let ie=o.routes[$.route.id];!ie||!ie.hasLoader||(!g.some(F=>F.route.id===$.route.id)&&$.route.id in m&&u[$.route.id]?.shouldRevalidate||ie.hasClientLoader?H=!0:k.add($.route.id))}),k.size===0)return[];let B=gS(i,f,"data");return H&&k.size>0&&B.searchParams.set("_routes",e.filter($=>k.has($.route.id)).map($=>$.route.id).join(",")),[B.pathname+B.search]},[f,m,s,o,g,e,i,u]),w=Y.useMemo(()=>vS(v,o),[v,o]),N=RS(v);return Y.createElement(Y.Fragment,null,S.map(k=>Y.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),w.map(k=>Y.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),N.map(({key:k,link:H})=>Y.createElement("link",{key:k,nonce:n.nonce,...H})))}function CS(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var aE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aE&&(window.__reactRouterVersion="7.8.1")}catch{}function IS({basename:i,children:e,window:n}){let s=Y.useRef();s.current==null&&(s.current=pA({window:n,v5Compat:!0}));let o=s.current,[u,f]=Y.useState({action:o.action,location:o.location}),m=Y.useCallback(p=>{Y.startTransition(()=>f(p))},[f]);return Y.useLayoutEffect(()=>o.listen(m),[o,m]),Y.createElement(sS,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var oE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$i=Y.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:v,viewTransition:S,...w},N){let{basename:k}=Y.useContext(xr),H=typeof g=="string"&&oE.test(g),B,$=!1;if(typeof g=="string"&&H&&(B=g,aE))try{let I=new URL(window.location.href),O=g.startsWith("//")?new URL(I.protocol+g):new URL(g),V=ui(O.pathname,k);O.origin===I.origin&&V!=null?g=V+O.search+O.hash:$=!0}catch{Xn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=HA(g,{relative:o}),[F,fe,ae]=AS(s,w),W=kS(g,{replace:f,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:S});function C(I){e&&e(I),I.defaultPrevented||W(I)}let R=Y.createElement("a",{...w,...ae,href:B||ie,onClick:$||u?e:C,ref:CS(N,fe),target:p,"data-discover":!H&&n==="render"?"true":void 0});return F&&!H?Y.createElement(Y.Fragment,null,R,Y.createElement(SS,{page:ie})):R});$i.displayName="Link";var NS=Y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},v){let S=su(f,{relative:g.relative}),w=ds(),N=Y.useContext(xh),{navigator:k,basename:H}=Y.useContext(xr),B=N!=null&&US(S)&&m===!0,$=k.encodeLocation?k.encodeLocation(S).pathname:S.pathname,ie=w.pathname,F=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(ie=ie.toLowerCase(),F=F?F.toLowerCase():null,$=$.toLowerCase()),F&&H&&(F=ui(F,H)||F);const fe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ae=ie===$||!o&&ie.startsWith($)&&ie.charAt(fe)==="/",W=F!=null&&(F===$||!o&&F.startsWith($)&&F.charAt($.length)==="/"),C={isActive:ae,isPending:W,isTransitioning:B},R=ae?e:void 0,I;typeof s=="function"?I=s(C):I=[s,ae?"active":null,W?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(C):u;return Y.createElement($i,{...g,"aria-current":R,className:I,ref:v,style:O,to:f,viewTransition:m},typeof p=="function"?p(C):p)});NS.displayName="NavLink";var DS=Y.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=Qc,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:S,...w},N)=>{let k=PS(),H=LS(m,{relative:g}),B=f.toLowerCase()==="get"?"get":"post",$=typeof m=="string"&&oE.test(m),ie=F=>{if(p&&p(F),F.defaultPrevented)return;F.preventDefault();let fe=F.nativeEvent.submitter,ae=fe?.getAttribute("formmethod")||f;k(fe||F.currentTarget,{fetcherKey:e,method:ae,navigate:n,replace:o,state:u,relative:g,preventScrollReset:v,viewTransition:S})};return Y.createElement("form",{ref:N,method:B,action:H,onSubmit:s?p:ie,...w,"data-discover":!$&&i==="render"?"true":void 0})});DS.displayName="Form";function OS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lE(i){let e=Y.useContext(Eo);return ut(e,OS(i)),e}function kS(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=FA(),p=ds(),g=su(i,{relative:u});return Y.useCallback(v=>{if(hS(v,e)){v.preventDefault();let S=n!==void 0?n:Yl(p)===Yl(g);m(i,{replace:S,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,i,o,u,f])}var MS=0,VS=()=>`__${String(++MS)}__`;function PS(){let{router:i}=lE("useSubmit"),{basename:e}=Y.useContext(xr),n=tS();return Y.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=mS(s,e);if(o.navigate===!1){let v=o.fetcherKey||VS();await i.fetch(v,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function LS(i,{relative:e}={}){let{basename:n}=Y.useContext(xr),s=Y.useContext(mi);ut(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...su(i||".",{relative:e})},f=ds();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(S=>S).forEach(S=>m.append("index",S));let v=m.toString();u.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:oi([n,u.pathname])),Yl(u)}function US(i,{relative:e}={}){let n=Y.useContext(Jv);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=lE("useViewTransitionState"),o=su(i,{relative:e});if(!n.isTransitioning)return!1;let u=ui(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=ui(n.nextLocation.pathname,s)||n.nextLocation.pathname;return sh(o.pathname,f)!=null||sh(o.pathname,u)!=null}const ym=i=>b.jsx("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M5 12h14M12 5v14"})}),Ih=i=>b.jsx("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})}),uE=i=>b.jsx("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M20 6 9 17l-5-5"})}),cE=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),b.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),b.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),hE=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),b.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),fE=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),b.jsx("path",{d:"M12 10h-2M15 10h-2M12 14h-2M15 14h-2M12 18h-2"})]}),jS=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),b.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),zS=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.26.43a2 2 0 0 0 .73 2.73l.08.15a2 2 0 0 1 0 2l-.08.15a2 2 0 0 0-.73 2.73l.26.43a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.26-.43a2 2 0 0 0-.73-2.73l-.08-.15a2 2 0 0 1 0-2l.08-.15a2 2 0 0 0 .73-2.73l-.26-.43a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),b.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),dE=i=>b.jsx("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),BS=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),b.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),qS=i=>b.jsxs("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M14 10V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-5"}),b.jsx("path",{d:"M14 10H6"}),b.jsx("path",{d:"M16 10h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"}),b.jsx("path",{d:"M18 10V7a2 2 0 0 0-2-2h-2"}),b.jsx("path",{d:"M16 18H8"}),b.jsx("path",{d:"M18 14h-2"})]}),HS=i=>b.jsx("svg",{...i,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M18 6 6 18M6 6l12 12"})}),FS=({expenseSummary:i,unpaidChoresCount:e,shoppingListCount:n})=>{const s="https://calendar.google.com/calendar/embed?src=your_calendar_id%40group.calendar.google.com&ctz=America%2FNew_York",o=i?.transactions?i.transactions.reduce((u,f)=>u+f.amount,0):0;return b.jsxs("section",{className:"space-y-8",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-xl shadow-lg flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Expenses"}),b.jsxs("div",{className:"text-3xl font-bold mt-1",children:["$",o.toFixed(2)]})]}),b.jsx(hE,{className:"w-10 h-10 text-purple-600 dark:text-purple-400 opacity-70"})]}),b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-xl shadow-lg flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Chores to Do"}),b.jsx("div",{className:"text-3xl font-bold mt-1",children:e})]}),b.jsx(fE,{className:"w-10 h-10 text-purple-600 dark:text-purple-400 opacity-70"})]}),b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-xl shadow-lg flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Shopping Items"}),b.jsx("div",{className:"text-3xl font-bold mt-1",children:n})]}),b.jsx(cE,{className:"w-10 h-10 text-purple-600 dark:text-purple-400 opacity-70"})]})]}),b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-xl shadow-lg",children:[b.jsx("h3",{className:"text-xl font-bold mb-4",children:"House Calendar"}),b.jsx("div",{className:"aspect-video",children:b.jsx("iframe",{src:s,style:{border:0},width:"100%",height:"600",frameBorder:"0",scrolling:"no",title:"House Calendar"})})]})]})},GS=({chores:i,newChore:e,setNewChore:n,addChore:s,roommates:o,toggleChoreStatus:u,assignChore:f,deleteChore:m,deleteCompletedChores:p})=>{const[g,v]=Y.useState(""),S=(k,H)=>{const B=k.assignedTo.includes(H)?k.assignedTo.filter($=>$!==H):[...k.assignedTo,H];f(k.id,B)},w=()=>{s(e,[],g),n(""),v("")},N=i.some(k=>k.isCompleted);return b.jsxs("section",{className:"flex flex-col gap-8",children:[b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Chore Tracker"}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg mb-6",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add a New Chore"}),b.jsx("div",{className:"flex flex-col gap-2",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"text",placeholder:"e.g., Take out the trash",value:e,onChange:k=>n(k.target.value),onKeyDown:k=>k.key==="Enter"&&w(),className:"flex-grow p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900"}),b.jsx("input",{type:"date",value:g,onChange:k=>v(k.target.value),onKeyDown:k=>k.key==="Enter"&&w(),className:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900"}),b.jsx("button",{onClick:w,className:"bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:b.jsx(ym,{className:"w-6 h-6"})})]})})]}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg",children:[b.jsxs("div",{className:"flex justify-between items-center mb-3",children:[b.jsx("h3",{className:"text-lg font-semibold",children:"Current Chores"}),N&&b.jsx("button",{onClick:p,className:"text-red-500 hover:text-red-600 text-sm",children:"Delete All Completed"})]}),b.jsx("ul",{className:"space-y-3",children:i.length>0?i.map(k=>b.jsxs("li",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-800",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 flex-grow",children:[b.jsx("div",{className:`font-bold text-lg ${k.isCompleted?"line-through text-gray-500":""}`,children:k.name}),k.dueDate&&b.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:["Due: ",new Date(k.dueDate).toLocaleDateString()]})]}),b.jsx("div",{className:"flex flex-wrap gap-2 mt-2 sm:mt-0",children:o.map(H=>b.jsx("button",{onClick:()=>S(k,H.name),className:`py-1 px-3 rounded-full text-sm font-medium transition-colors ${k.assignedTo.includes(H.name)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:H.name},H.id))}),b.jsxs("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:[b.jsx("button",{onClick:()=>u(k.id,k.isCompleted),className:`p-2 rounded-full transition-colors ${k.isCompleted?"bg-green-200 hover:bg-green-300":"bg-purple-200 hover:bg-purple-300"}`,children:b.jsx(uE,{className:`w-5 h-5 ${k.isCompleted?"text-green-600":"text-purple-600"}`})}),b.jsx("button",{onClick:()=>m(k.id),className:"p-2 rounded-full bg-red-200 hover:bg-red-300",children:b.jsx(Ih,{className:"w-5 h-5 text-red-600"})})]})]},k.id)):b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No chores added yet."})})]})]}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg flex flex-col justify-center items-center h-[500px]",children:[b.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Shared Chore Schedule"}),b.jsx("iframe",{src:"https://docs.google.com/spreadsheets/d/e/2PACX-1vSIzz-KiLrR6s_8TUsdQ1CIvJAq4X9BCiRofNzWpFsZGGADCUH4lyvBQUuy6gW7NRp_4tdlCJafj7W_/pubhtml",width:"100%",height:"400",frameBorder:"0",className:"rounded-lg shadow-md"}),b.jsx("a",{href:"https://docs.google.com/spreadsheets/d/1ixEHt7EBscO_HCn8pGykNjgIiD6inMrf70Z-bkk0HZM/edit?gid=1644513197#gid=1644513197",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm text-blue-600 hover:underline",children:"Open Full Sheet"})]})]})},QS=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},KS=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},gE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,v=u>>2,S=(u&3)<<4|m>>4;let w=(m&15)<<2|g>>6,N=g&63;p||(N=64,f||(w=64)),s.push(n[v],n[S],n[w],n[N])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(mE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):KS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new YS;const w=u<<2|m>>4;if(s.push(w),g!==64){const N=m<<4&240|g>>2;if(s.push(N),S!==64){const k=g<<6&192|S;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class YS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $S=function(i){const e=mE(i);return gE.encodeByteArray(e,!0)},ah=function(i){return $S(i).replace(/\./g,"")},pE=function(i){try{return gE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=()=>XS().__FIREBASE_DEFAULTS__,ZS=()=>{if(typeof process>"u"||typeof v0>"u")return;const i=v0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},JS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&pE(i[1]);return e&&JSON.parse(e)},Nh=()=>{try{return QS()||WS()||ZS()||JS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},yE=i=>Nh()?.emulatorHosts?.[i],e1=i=>{const e=yE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},_E=()=>Nh()?.config,vE=i=>Nh()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ah(JSON.stringify(n)),ah(JSON.stringify(f)),""].join(".")}const ql={};function r1(){const i={prod:[],emulator:[]};for(const e of Object.keys(ql))ql[e]?i.emulator.push(e):i.prod.push(e);return i}function i1(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let E0=!1;function TE(i,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||ql[i]===e||ql[i]||E0)return;ql[i]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=r1().prod.length>0;function f(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,N){w.setAttribute("width","24"),w.setAttribute("id",N),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{E0=!0,f()},w}function v(w,N){w.setAttribute("id",N),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=i1(s),N=n("text"),k=document.getElementById(N)||document.createElement("span"),H=n("learnmore"),B=document.getElementById(H)||document.createElement("a"),$=n("preprendIcon"),ie=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const F=w.element;m(F),v(B,H);const fe=g();p(ie,$),F.append(ie,k,B,fe),document.body.appendChild(F)}u?(k.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function a1(){const i=Nh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function l1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function u1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c1(){const i=en();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function h1(){return!a1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f1(){try{return typeof indexedDB=="object"}catch{return!1}}function d1(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="FirebaseError";class gi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=m1,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?g1(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new gi(o,m,s)}}function g1(i,e){return i.replace(p1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const p1=/\{\$([^}]+)}/g;function y1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ea(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(T0(u)&&T0(f)){if(!ea(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function T0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _1(i,e){const n=new v1(i,e);return n.subscribe.bind(n)}class v1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");E1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=rm),o.error===void 0&&(o.error=rm),o.complete===void 0&&(o.complete=rm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(i){return i&&i._delegate?i._delegate:i}class ta{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new t1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w1(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:b1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b1(i){return i===Ys?void 0:i}function w1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Me||(Me={}));const S1={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},R1=Me.INFO,x1={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},C1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=x1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=R1,this._logHandler=C1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const I1=(i,e)=>e.some(n=>i instanceof n);let b0,w0;function N1(){return b0||(b0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D1(){return w0||(w0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bE=new WeakMap,_m=new WeakMap,wE=new WeakMap,im=new WeakMap,Wm=new WeakMap;function O1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(es(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&bE.set(n,i)}).catch(()=>{}),Wm.set(e,i),e}function k1(i){if(_m.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});_m.set(i,e)}let vm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return _m.get(i);if(e==="objectStoreNames")return i.objectStoreNames||wE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return es(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function M1(i){vm=i(vm)}function V1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(sm(this),e,...n);return wE.set(s,e.sort?e.sort():[e]),es(s)}:D1().includes(i)?function(...e){return i.apply(sm(this),e),es(bE.get(this))}:function(...e){return es(i.apply(sm(this),e))}}function P1(i){return typeof i=="function"?V1(i):(i instanceof IDBTransaction&&k1(i),I1(i,N1())?new Proxy(i,vm):i)}function es(i){if(i instanceof IDBRequest)return O1(i);if(im.has(i))return im.get(i);const e=P1(i);return e!==i&&(im.set(i,e),Wm.set(e,i)),e}const sm=i=>Wm.get(i);function L1(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=es(f);return s&&f.addEventListener("upgradeneeded",p=>{s(es(f.result),p.oldVersion,p.newVersion,es(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const U1=["get","getKey","getAll","getAllKeys","count"],j1=["put","add","delete","clear"],am=new Map;function A0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=j1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||U1.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return am.set(e,u),u}M1(i=>({...i,get:(e,n,s)=>A0(e,n)||i.get(e,n,s),has:(e,n)=>!!A0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(B1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function B1(i){return i.getComponent()?.type==="VERSION"}const Em="@firebase/app",S0="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Xm("@firebase/app"),q1="@firebase/app-compat",H1="@firebase/analytics-compat",F1="@firebase/analytics",G1="@firebase/app-check-compat",Q1="@firebase/app-check",K1="@firebase/auth",Y1="@firebase/auth-compat",$1="@firebase/database",X1="@firebase/data-connect",W1="@firebase/database-compat",Z1="@firebase/functions",J1="@firebase/functions-compat",eR="@firebase/installations",tR="@firebase/installations-compat",nR="@firebase/messaging",rR="@firebase/messaging-compat",iR="@firebase/performance",sR="@firebase/performance-compat",aR="@firebase/remote-config",oR="@firebase/remote-config-compat",lR="@firebase/storage",uR="@firebase/storage-compat",cR="@firebase/firestore",hR="@firebase/ai",fR="@firebase/firestore-compat",dR="firebase",mR="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",gR={[Em]:"fire-core",[q1]:"fire-core-compat",[F1]:"fire-analytics",[H1]:"fire-analytics-compat",[Q1]:"fire-app-check",[G1]:"fire-app-check-compat",[K1]:"fire-auth",[Y1]:"fire-auth-compat",[$1]:"fire-rtdb",[X1]:"fire-data-connect",[W1]:"fire-rtdb-compat",[Z1]:"fire-fn",[J1]:"fire-fn-compat",[eR]:"fire-iid",[tR]:"fire-iid-compat",[nR]:"fire-fcm",[rR]:"fire-fcm-compat",[iR]:"fire-perf",[sR]:"fire-perf-compat",[aR]:"fire-rc",[oR]:"fire-rc-compat",[lR]:"fire-gcs",[uR]:"fire-gcs-compat",[cR]:"fire-fst",[fR]:"fire-fst-compat",[hR]:"fire-vertex","fire-js":"fire-js",[dR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Map,pR=new Map,bm=new Map;function R0(i,e){try{i.container.addComponent(e)}catch(n){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ho(i){const e=i.name;if(bm.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;bm.set(e,i);for(const n of oh.values())R0(n,i);for(const n of pR.values())R0(n,i);return!0}function Zm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Qn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new au("app","Firebase",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=mR;function AE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Tm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ts.create("bad-app-name",{appName:String(o)});if(n||(n=_E()),!n)throw ts.create("no-options");const u=oh.get(o);if(u){if(ea(n,u.options)&&ea(s,u.config))return u;throw ts.create("duplicate-app",{appName:o})}const f=new A1(o);for(const p of bm.values())f.addComponent(p);const m=new _R(n,s,f);return oh.set(o,m),m}function SE(i=Tm){const e=oh.get(i);if(!e&&i===Tm&&_E())return AE();if(!e)throw ts.create("no-app",{appName:i});return e}function ns(i,e,n){let s=gR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(f.join(" "));return}ho(new ta(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firebase-heartbeat-database",ER=1,$l="firebase-heartbeat-store";let om=null;function RE(){return om||(om=L1(vR,ER,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(i=>{throw ts.create("idb-open",{originalErrorMessage:i.message})})),om}async function TR(i){try{const n=(await RE()).transaction($l),s=await n.objectStore($l).get(xE(i));return await n.done,s}catch(e){if(e instanceof gi)ci.warn(e.message);else{const n=ts.create("idb-get",{originalErrorMessage:e?.message});ci.warn(n.message)}}}async function x0(i,e){try{const s=(await RE()).transaction($l,"readwrite");await s.objectStore($l).put(e,xE(i)),await s.done}catch(n){if(n instanceof gi)ci.warn(n.message);else{const s=ts.create("idb-set",{originalErrorMessage:n?.message});ci.warn(s.message)}}}function xE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=1024,wR=30;class AR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>wR){const o=xR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ci.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=C0(),{heartbeatsToSend:n,unsentEntries:s}=SR(this._heartbeatsCache.heartbeats),o=ah(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ci.warn(e),""}}}function C0(){return new Date().toISOString().substring(0,10)}function SR(i,e=bR){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),I0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),I0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class RR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f1()?d1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function I0(i){return ah(JSON.stringify({version:2,heartbeats:i})).length}function xR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(i){ho(new ta("platform-logger",e=>new z1(e),"PRIVATE")),ho(new ta("heartbeat",e=>new AR(e),"PRIVATE")),ns(Em,S0,i),ns(Em,S0,"esm2020"),ns("fire-js","")}CR("");var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,CE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.D=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(O,V,U){for(var x=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)x[pe-2]=arguments[pe];return R.prototype[V].apply(O,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,R,I){I||(I=0);var O=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)O[V]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(V=0;16>V;++V)O[V]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],V=C.g[2];var U=C.g[3],x=R+(U^I&(V^U))+O[0]+3614090360&4294967295;R=I+(x<<7&4294967295|x>>>25),x=U+(V^R&(I^V))+O[1]+3905402710&4294967295,U=R+(x<<12&4294967295|x>>>20),x=V+(I^U&(R^I))+O[2]+606105819&4294967295,V=U+(x<<17&4294967295|x>>>15),x=I+(R^V&(U^R))+O[3]+3250441966&4294967295,I=V+(x<<22&4294967295|x>>>10),x=R+(U^I&(V^U))+O[4]+4118548399&4294967295,R=I+(x<<7&4294967295|x>>>25),x=U+(V^R&(I^V))+O[5]+1200080426&4294967295,U=R+(x<<12&4294967295|x>>>20),x=V+(I^U&(R^I))+O[6]+2821735955&4294967295,V=U+(x<<17&4294967295|x>>>15),x=I+(R^V&(U^R))+O[7]+4249261313&4294967295,I=V+(x<<22&4294967295|x>>>10),x=R+(U^I&(V^U))+O[8]+1770035416&4294967295,R=I+(x<<7&4294967295|x>>>25),x=U+(V^R&(I^V))+O[9]+2336552879&4294967295,U=R+(x<<12&4294967295|x>>>20),x=V+(I^U&(R^I))+O[10]+4294925233&4294967295,V=U+(x<<17&4294967295|x>>>15),x=I+(R^V&(U^R))+O[11]+2304563134&4294967295,I=V+(x<<22&4294967295|x>>>10),x=R+(U^I&(V^U))+O[12]+1804603682&4294967295,R=I+(x<<7&4294967295|x>>>25),x=U+(V^R&(I^V))+O[13]+4254626195&4294967295,U=R+(x<<12&4294967295|x>>>20),x=V+(I^U&(R^I))+O[14]+2792965006&4294967295,V=U+(x<<17&4294967295|x>>>15),x=I+(R^V&(U^R))+O[15]+1236535329&4294967295,I=V+(x<<22&4294967295|x>>>10),x=R+(V^U&(I^V))+O[1]+4129170786&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^V&(R^I))+O[6]+3225465664&4294967295,U=R+(x<<9&4294967295|x>>>23),x=V+(R^I&(U^R))+O[11]+643717713&4294967295,V=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(V^U))+O[0]+3921069994&4294967295,I=V+(x<<20&4294967295|x>>>12),x=R+(V^U&(I^V))+O[5]+3593408605&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^V&(R^I))+O[10]+38016083&4294967295,U=R+(x<<9&4294967295|x>>>23),x=V+(R^I&(U^R))+O[15]+3634488961&4294967295,V=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(V^U))+O[4]+3889429448&4294967295,I=V+(x<<20&4294967295|x>>>12),x=R+(V^U&(I^V))+O[9]+568446438&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^V&(R^I))+O[14]+3275163606&4294967295,U=R+(x<<9&4294967295|x>>>23),x=V+(R^I&(U^R))+O[3]+4107603335&4294967295,V=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(V^U))+O[8]+1163531501&4294967295,I=V+(x<<20&4294967295|x>>>12),x=R+(V^U&(I^V))+O[13]+2850285829&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^V&(R^I))+O[2]+4243563512&4294967295,U=R+(x<<9&4294967295|x>>>23),x=V+(R^I&(U^R))+O[7]+1735328473&4294967295,V=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(V^U))+O[12]+2368359562&4294967295,I=V+(x<<20&4294967295|x>>>12),x=R+(I^V^U)+O[5]+4294588738&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^V)+O[8]+2272392833&4294967295,U=R+(x<<11&4294967295|x>>>21),x=V+(U^R^I)+O[11]+1839030562&4294967295,V=U+(x<<16&4294967295|x>>>16),x=I+(V^U^R)+O[14]+4259657740&4294967295,I=V+(x<<23&4294967295|x>>>9),x=R+(I^V^U)+O[1]+2763975236&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^V)+O[4]+1272893353&4294967295,U=R+(x<<11&4294967295|x>>>21),x=V+(U^R^I)+O[7]+4139469664&4294967295,V=U+(x<<16&4294967295|x>>>16),x=I+(V^U^R)+O[10]+3200236656&4294967295,I=V+(x<<23&4294967295|x>>>9),x=R+(I^V^U)+O[13]+681279174&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^V)+O[0]+3936430074&4294967295,U=R+(x<<11&4294967295|x>>>21),x=V+(U^R^I)+O[3]+3572445317&4294967295,V=U+(x<<16&4294967295|x>>>16),x=I+(V^U^R)+O[6]+76029189&4294967295,I=V+(x<<23&4294967295|x>>>9),x=R+(I^V^U)+O[9]+3654602809&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^V)+O[12]+3873151461&4294967295,U=R+(x<<11&4294967295|x>>>21),x=V+(U^R^I)+O[15]+530742520&4294967295,V=U+(x<<16&4294967295|x>>>16),x=I+(V^U^R)+O[2]+3299628645&4294967295,I=V+(x<<23&4294967295|x>>>9),x=R+(V^(I|~U))+O[0]+4096336452&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~V))+O[7]+1126891415&4294967295,U=R+(x<<10&4294967295|x>>>22),x=V+(R^(U|~I))+O[14]+2878612391&4294967295,V=U+(x<<15&4294967295|x>>>17),x=I+(U^(V|~R))+O[5]+4237533241&4294967295,I=V+(x<<21&4294967295|x>>>11),x=R+(V^(I|~U))+O[12]+1700485571&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~V))+O[3]+2399980690&4294967295,U=R+(x<<10&4294967295|x>>>22),x=V+(R^(U|~I))+O[10]+4293915773&4294967295,V=U+(x<<15&4294967295|x>>>17),x=I+(U^(V|~R))+O[1]+2240044497&4294967295,I=V+(x<<21&4294967295|x>>>11),x=R+(V^(I|~U))+O[8]+1873313359&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~V))+O[15]+4264355552&4294967295,U=R+(x<<10&4294967295|x>>>22),x=V+(R^(U|~I))+O[6]+2734768916&4294967295,V=U+(x<<15&4294967295|x>>>17),x=I+(U^(V|~R))+O[13]+1309151649&4294967295,I=V+(x<<21&4294967295|x>>>11),x=R+(V^(I|~U))+O[4]+4149444226&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~V))+O[11]+3174756917&4294967295,U=R+(x<<10&4294967295|x>>>22),x=V+(R^(U|~I))+O[2]+718787259&4294967295,V=U+(x<<15&4294967295|x>>>17),x=I+(U^(V|~R))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(V+(x<<21&4294967295|x>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+U&4294967295}s.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var I=R-this.blockSize,O=this.B,V=this.h,U=0;U<R;){if(V==0)for(;U<=I;)o(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<R;)if(O[V++]=C.charCodeAt(U++),V==this.blockSize){o(this,O),V=0;break}}else for(;U<R;)if(O[V++]=C[U++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=R},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var I=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.u(C),C=Array(16),R=I=0;4>R;++R)for(var O=0;32>O;O+=8)C[I++]=this.g[R]>>>O&255;return C};function u(C,R){var I=m;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function f(C,R){this.h=R;for(var I=[],O=!0,V=C.length-1;0<=V;V--){var U=C[V]|0;O&&U==R||(I[V]=U,O=!1)}this.g=I}var m={};function p(C){return-128<=C&&128>C?u(C,function(R){return new f([R|0],0>R?-1:0)}):new f([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return S;if(0>C)return B(g(-C));for(var R=[],I=1,O=0;C>=I;O++)R[O]=C/I|0,I*=4294967296;return new f(R,0)}function v(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return B(v(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(R,8)),O=S,V=0;V<C.length;V+=8){var U=Math.min(8,C.length-V),x=parseInt(C.substring(V,V+U),R);8>U?(U=g(Math.pow(R,U)),O=O.j(U).add(g(x))):(O=O.j(I),O=O.add(g(x)))}return O}var S=p(0),w=p(1),N=p(16777216);i=f.prototype,i.m=function(){if(H(this))return-B(this).m();for(var C=0,R=1,I=0;I<this.g.length;I++){var O=this.i(I);C+=(0<=O?O:4294967296+O)*R,R*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(H(this))return"-"+B(this).toString(C);for(var R=g(Math.pow(C,6)),I=this,O="";;){var V=fe(I,R).g;I=$(I,V.j(R));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=V,k(I))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function H(C){return C.h==-1}i.l=function(C){return C=$(this,C),H(C)?-1:k(C)?0:1};function B(C){for(var R=C.g.length,I=[],O=0;O<R;O++)I[O]=~C.g[O];return new f(I,~C.h).add(w)}i.abs=function(){return H(this)?B(this):this},i.add=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0,V=0;V<=R;V++){var U=O+(this.i(V)&65535)+(C.i(V)&65535),x=(U>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);O=x>>>16,U&=65535,x&=65535,I[V]=x<<16|U}return new f(I,I[I.length-1]&-2147483648?-1:0)};function $(C,R){return C.add(B(R))}i.j=function(C){if(k(this)||k(C))return S;if(H(this))return H(C)?B(this).j(B(C)):B(B(this).j(C));if(H(C))return B(this.j(B(C)));if(0>this.l(N)&&0>C.l(N))return g(this.m()*C.m());for(var R=this.g.length+C.g.length,I=[],O=0;O<2*R;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<C.g.length;V++){var U=this.i(O)>>>16,x=this.i(O)&65535,pe=C.i(V)>>>16,de=C.i(V)&65535;I[2*O+2*V]+=x*de,ie(I,2*O+2*V),I[2*O+2*V+1]+=U*de,ie(I,2*O+2*V+1),I[2*O+2*V+1]+=x*pe,ie(I,2*O+2*V+1),I[2*O+2*V+2]+=U*pe,ie(I,2*O+2*V+2)}for(O=0;O<R;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=R;O<2*R;O++)I[O]=0;return new f(I,0)};function ie(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function F(C,R){this.g=C,this.h=R}function fe(C,R){if(k(R))throw Error("division by zero");if(k(C))return new F(S,S);if(H(C))return R=fe(B(C),R),new F(B(R.g),B(R.h));if(H(R))return R=fe(C,B(R)),new F(B(R.g),R.h);if(30<C.g.length){if(H(C)||H(R))throw Error("slowDivide_ only works with positive integers.");for(var I=w,O=R;0>=O.l(C);)I=ae(I),O=ae(O);var V=W(I,1),U=W(O,1);for(O=W(O,2),I=W(I,2);!k(O);){var x=U.add(O);0>=x.l(C)&&(V=V.add(I),U=x),O=W(O,1),I=W(I,1)}return R=$(C,V.j(R)),new F(V,R)}for(V=S;0<=C.l(R);){for(I=Math.max(1,Math.floor(C.m()/R.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=g(I),x=U.j(R);H(x)||0<x.l(C);)I-=O,U=g(I),x=U.j(R);k(U)&&(U=w),V=V.add(U),C=$(C,x)}return new F(V,C)}i.A=function(C){return fe(this,C).h},i.and=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)&C.i(O);return new f(I,this.h&C.h)},i.or=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)|C.i(O);return new f(I,this.h|C.h)},i.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)^C.i(O);return new f(I,this.h^C.h)};function ae(C){for(var R=C.g.length+1,I=[],O=0;O<R;O++)I[O]=C.i(O)<<1|C.i(O-1)>>>31;return new f(I,C.h)}function W(C,R){var I=R>>5;R%=32;for(var O=C.g.length-I,V=[],U=0;U<O;U++)V[U]=0<R?C.i(U+I)>>>R|C.i(U+I+1)<<32-R:C.i(U+I);return new f(V,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,CE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=v,rs=f}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IE,Ul,NE,Yc,wm,DE,OE,kE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zc=="object"&&zc];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var j=c[A];if(!(j in _))break e;_=_[j]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,A=!1,j={next:function(){if(!A&&_<c.length){var X=_++;return{value:y(X,c[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function v(c,y,_){return c.call.apply(c.bind,arguments)}function S(c,y,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,A),c.apply(y,j)}}return function(){return c.apply(y,arguments)}}function w(c,y,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:S,w.apply(null,arguments)}function N(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function k(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,j,X){for(var le=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)le[Le-2]=arguments[Le];return y.prototype[j].apply(A,le)}}function H(c){const y=c.length;if(0<y){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function B(c,y){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const j=c.length||0,X=A.length||0;c.length=j+X;for(let le=0;le<X;le++)c[j+le]=A[le]}else c.push(A)}}class ${constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function fe(c){return fe[" "](c),c}fe[" "]=function(){};var ae=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function W(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function C(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function R(c){const y={};for(const _ in c)y[_]=c[_];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,y){let _,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(_ in A)c[_]=A[_];for(let X=0;X<I.length;X++)_=I[X],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function V(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function U(c){m.setTimeout(()=>{throw c},0)}function x(){var c=Be;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class pe{constructor(){this.h=this.g=null}add(y,_){const A=de.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new $(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ge=!1,Be=new pe,M=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(re)}};var re=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(_){U(_)}var y=de;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ge=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return c})();function Ie(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ae){e:{try{fe(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ie.aa.h.call(this)}}k(Ie,se);var we={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function An(c,y,_,A,j){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=j,this.key=++Xe,this.da=this.fa=!1}function Zn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Sn(c){this.src=c,this.g={},this.h=0}Sn.prototype.add=function(c,y,_,A,j){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var le=Jn(c,y,A,j);return-1<le?(y=c[le],_||(y.fa=!1)):(y=new An(y,this.src,X,!!A,j),y.fa=_,c.push(y)),y};function Cr(c,y){var _=y.type;if(_ in c.g){var A=c.g[_],j=Array.prototype.indexOf.call(A,y,void 0),X;(X=0<=j)&&Array.prototype.splice.call(A,j,1),X&&(Zn(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Jn(c,y,_,A){for(var j=0;j<c.length;++j){var X=c[j];if(!X.da&&X.listener==y&&X.capture==!!_&&X.ha==A)return j}return-1}var Ir="closure_lm_"+(1e6*Math.random()|0),pi={};function ha(c,y,_,A,j){if(Array.isArray(y)){for(var X=0;X<y.length;X++)ha(c,y[X],_,A,j);return null}return _=ys(_),c&&c[_t]?c.K(y,_,g(A)?!!A.capture:!1,j):tn(c,y,_,!1,A,j)}function tn(c,y,_,A,j,X){if(!y)throw Error("Invalid event type");var le=g(j)?!!j.capture:!!j,Le=Nr(c);if(Le||(c[Ir]=Le=new Sn(c)),_=Le.add(y,_,A,le,X),_.proxy)return _;if(A=Io(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)_e||(j=le),j===void 0&&(j=!1),c.addEventListener(y.toString(),A,j);else if(c.attachEvent)c.attachEvent(er(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Io(){function c(_){return y.call(c.src,c.listener,_)}const y=No;return c}function yi(c,y,_,A,j){if(Array.isArray(y))for(var X=0;X<y.length;X++)yi(c,y[X],_,A,j);else A=g(A)?!!A.capture:!!A,_=ys(_),c&&c[_t]?(c=c.i,y=String(y).toString(),y in c.g&&(X=c.g[y],_=Jn(X,_,A,j),-1<_&&(Zn(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete c.g[y],c.h--)))):c&&(c=Nr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Jn(y,_,A,j)),(_=-1<c?y[c]:null)&&_i(_))}function _i(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[_t])Cr(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(er(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=Nr(y))?(Cr(_,c),_.h==0&&(_.src=null,y[Ir]=null)):Zn(c)}}}function er(c){return c in pi?pi[c]:pi[c]="on"+c}function No(c,y){if(c.da)c=!0;else{y=new Ie(y,this);var _=c.listener,A=c.ha||c.src;c.fa&&_i(c),c=_.call(A,y)}return c}function Nr(c){return c=c[Ir],c instanceof Sn?c:null}var ps="__closure_events_fn_"+(1e9*Math.random()>>>0);function ys(c){return typeof c=="function"?c:(c[ps]||(c[ps]=function(y){return c.handleEvent(y)}),c[ps])}function st(){ue.call(this),this.i=new Sn(this),this.M=this,this.F=null}k(st,ue),st.prototype[_t]=!0,st.prototype.removeEventListener=function(c,y,_,A){yi(this,c,y,_,A)};function qe(c,y){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var j=y;y=new se(A,c),O(y,j)}if(j=!0,_)for(var X=_.length-1;0<=X;X--){var le=y.g=_[X];j=nn(le,A,!0,y)&&j}if(le=y.g=c,j=nn(le,A,!0,y)&&j,j=nn(le,A,!1,y)&&j,_)for(X=0;X<_.length;X++)le=y.g=_[X],j=nn(le,A,!1,y)&&j}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],A=0;A<_.length;A++)Zn(_[A]);delete c.g[y],c.h--}}this.F=null},st.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},st.prototype.L=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function nn(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,X=0;X<y.length;++X){var le=y[X];if(le&&!le.da&&le.capture==_){var Le=le.listener,xt=le.ha||le.src;le.fa&&Cr(c.i,le),j=Le.call(xt,A)!==!1&&j}}return j&&!A.defaultPrevented}function Ot(c,y,_){if(typeof c=="function")_&&(c=w(c,_));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function fa(c){c.g=Ot(()=>{c.g=null,c.i&&(c.i=!1,fa(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class da extends ue{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:fa(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(c){ue.call(this),this.h=c,this.g={}}k(Rn,ue);var tr=[];function Dr(c){W(c.g,function(y,_){this.g.hasOwnProperty(_)&&_i(y)},c),c.g={}}Rn.prototype.N=function(){Rn.aa.N.call(this),Dr(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dn=m.JSON.stringify,vi=m.JSON.parse,Or=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function mn(){}mn.prototype.h=null;function Do(c){return c.h||(c.h=c.i())}function Oo(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mr(){se.call(this,"d")}k(Mr,se);function ko(){se.call(this,"c")}k(ko,se);var nr={},Mo=null;function Ei(){return Mo=Mo||new st}nr.La="serverreachability";function ma(c){se.call(this,nr.La,c)}k(ma,se);function Ti(c){const y=Ei();qe(y,new ma(y))}nr.STAT_EVENT="statevent";function _u(c,y){se.call(this,nr.STAT_EVENT,c),this.stat=y}k(_u,se);function at(c){const y=Ei();qe(y,new _u(y,c))}nr.Ma="timingevent";function Rt(c,y){se.call(this,nr.Ma,c),this.size=y}k(Rt,se);function vt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function Vo(c,y,_,A,j,X){c.info(function(){if(c.g)if(X)for(var le="",Le=X.split("&"),xt=0;xt<Le.length;xt++){var Ue=Le[xt].split("=");if(1<Ue.length){var Mt=Ue[0];Ue=Ue[1];var Ct=Mt.split("_");le=2<=Ct.length&&Ct[1]=="type"?le+(Mt+"="+Ue+"&"):le+(Mt+"=redacted&")}}else le=null;else le=X;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+y+`
`+_+`
`+le})}function Wh(c,y,_,A,j,X,le){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+y+`
`+_+`
`+X+" "+le})}function bi(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+_s(c,_)+(A?" "+A:"")})}function vu(c,y){c.info(function(){return"TIMEOUT: "+y})}xn.prototype.info=function(){};function _s(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var j=A[1];if(Array.isArray(j)&&!(1>j.length)){var X=j[0];if(X!="noop"&&X!="stop"&&X!="close")for(var le=1;le<j.length;le++)j[le]=""}}}}return dn(_)}catch{return y}}var wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rr;function ir(){}k(ir,mn),ir.prototype.g=function(){return new XMLHttpRequest},ir.prototype.i=function(){return{}},rr=new ir;function rn(c,y,_,A){this.j=c,this.i=y,this.l=_,this.R=A||1,this.U=new Rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var Po={},ga={};function Bn(c,y,_){c.L=1,c.v=ws(gn(y)),c.m=_,c.P=!0,Pr(c,null)}function Pr(c,y){c.F=Date.now(),vs(c),c.A=gn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),qo(_.i,"t",A),c.C=0,_=c.j.J,c.h=new dt,c.g=Vu(c.j,_?y:null,!c.m),0<c.O&&(c.M=new da(w(c.Y,c,c.g),c.O)),y=c.U,_=c.g,A=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(tr[0]=j.toString()),j=tr);for(var X=0;X<j.length;X++){var le=ha(_,j[X],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Ti(),Vo(c.i,c.u,c.A,c.l,c.R,c.m)}rn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Dn(c)==3?y.j():this.Y(c)},rn.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=Dn(this.g);var y=this.g.Ba();const Fr=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||xu(this.g)))){this.J||Ct!=4||y==7||(y==8||0>=Fr?Ti(3):Ti(2)),Ai(this);var _=this.g.Z();this.X=_;t:if(Eu(this)){var A=xu(this.g);c="";var j=A.length,X=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),sr(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(X&&y==j-1)});A.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,Wh(this.i,this.u,this.A,this.l,this.R,Ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,xt=this.g;if((Le=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Le)){var Ue=Le;break t}}Ue=null}if(_=Ue)bi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Es(this,_);else{this.o=!1,this.s=3,at(12),zt(this),sr(this);break e}}if(this.P){_=!0;let Bt;for(;!this.J&&this.C<le.length;)if(Bt=Tu(this,le),Bt==ga){Ct==4&&(this.s=4,at(14),_=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Po){this.s=4,at(15),bi(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else bi(this.i,this.l,Bt,null),Es(this,Bt);if(Eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||le.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)bi(this.i,this.l,le,"[Invalid Chunked Response]"),zt(this),sr(this);else if(0<le.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Ds(Mt),Mt.M=!0,at(11))}}else bi(this.i,this.l,le,null),Es(this,le);Ct==4&&zt(this),this.o&&!this.J&&(Ct==4?Ou(this.j,this):(this.o=!1,vs(this)))}else nf(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),zt(this),sr(this)}}}catch{}finally{}};function Eu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Tu(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?ga:(_=Number(y.substring(_,A)),isNaN(_)?Po:(A+=1,A+_>y.length?ga:(y=y.slice(A,A+_),c.C=A+_,y)))}rn.prototype.cancel=function(){this.J=!0,zt(this)};function vs(c){c.S=Date.now()+c.I,bu(c,c.I)}function bu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=vt(w(c.ba,c),y)}function Ai(c){c.B&&(m.clearTimeout(c.B),c.B=null)}rn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(vu(this.i,this.A),this.L!=2&&(Ti(),at(17)),zt(this),this.s=2,sr(this)):bu(this,this.S-c)};function sr(c){c.j.G==0||c.J||Ou(c.j,c)}function zt(c){Ai(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Dr(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Es(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||Lo(_.h,c))){if(!c.K&&Lo(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)xa(_),Sa(_);else break e;Ko(_),at(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=vt(w(_.Za,_),6e3));if(1>=ya(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Hr(_,11)}else if((c.K||_.g==c)&&xa(_),!ie(y))for(j=_.Da.g.parse(y),y=0;y<j.length;y++){let Ue=j[y];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Mt=Ue[3];Mt!=null&&(_.la=Mt,_.j.info("VER="+_.la));const Ct=Ue[4];Ct!=null&&(_.Aa=Ct,_.j.info("SVER="+_.Aa));const Fr=Ue[5];Fr!=null&&typeof Fr=="number"&&0<Fr&&(A=1.5*Fr,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Bt=c.g;if(Bt){const fr=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fr){var X=A.h;X.g||fr.indexOf("spdy")==-1&&fr.indexOf("quic")==-1&&fr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(_a(X,X.h),X.h=null))}if(A.D){const $o=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(A.ya=$o,We(A.I,A.D,$o))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var le=c;if(A.qa=Mu(A,A.J?A.ia:null,A.W),le.K){sn(A.h,le);var Le=le,xt=A.L;xt&&(Le.I=xt),Le.B&&(Ai(Le),vs(Le)),A.g=le}else Nu(A);0<_.i.length&&Ra(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Hr(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Hr(_,7):Go(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Ti(4)}catch{}}var wu=class{constructor(c,y){this.g=c,this.map=y}};function Lr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ya(c){return c.h?1:c.g?c.g.size:0}function Lo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function _a(c,y){c.g?c.g.add(y):c.h=y}function sn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Lr.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return H(c.i)}function Zh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,A=0;A<_;A++)y.push(c[A]);return y}y=[],_=0;for(A in c)y[_++]=c[A];return y}function va(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const A in c)y[_++]=A;return y}}}function jo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=va(c),A=Zh(c),j=A.length,X=0;X<j;X++)y.call(void 0,A[X],_&&_[X],c)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jh(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),j=null;if(0<=A){var X=c[_].substring(0,A);j=c[_].substring(A+1)}else X=c[_];y(X,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Et(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Et){this.h=c.h,bs(this,c.j),this.o=c.o,this.g=c.g,Si(this,c.s),this.l=c.l;var y=c.i,_=new jr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Ur(this,_),this.m=c.m}else c&&(y=String(c).match(Ts))?(this.h=!1,bs(this,y[1]||"",!0),this.o=Cn(y[2]||""),this.g=Cn(y[3]||"",!0),Si(this,y[4]),this.l=Cn(y[5]||"",!0),Ur(this,y[6]||"",!0),this.m=Cn(y[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}Et.prototype.toString=function(){var c=[],y=this.j;y&&c.push(As(y,zo,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(As(y,zo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(As(_,_.charAt(0)=="/"?ef:Bo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",As(_,Ea)),c.join("")};function gn(c){return new Et(c)}function bs(c,y,_){c.j=_?Cn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Si(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Ur(c,y,_){y instanceof jr?(c.i=y,Su(c.i,c.h)):(_||(y=As(y,tf)),c.i=new jr(y,c.h))}function We(c,y,_){c.i.set(y,_)}function ws(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Au),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Au(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zo=/[#\/\?@]/g,Bo=/[#\?:]/g,ef=/[#\?]/g,tf=/[#\?@]/g,Ea=/#/g;function jr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function In(c){c.g||(c.g=new Map,c.h=0,c.i&&Jh(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=jr.prototype,i.add=function(c,y){In(this),this.i=null,c=ar(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function zr(c,y){In(c),y=ar(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Br(c,y){return In(c),y=ar(c,y),c.g.has(y)}i.forEach=function(c,y){In(this),this.g.forEach(function(_,A){_.forEach(function(j){c.call(y,j,A,this)},this)},this)},i.na=function(){In(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let A=0;A<y.length;A++){const j=c[A];for(let X=0;X<j.length;X++)_.push(y[A])}return _},i.V=function(c){In(this);let y=[];if(typeof c=="string")Br(this,c)&&(y=y.concat(this.g.get(ar(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},i.set=function(c,y){return In(this),this.i=null,c=ar(this,c),Br(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function qo(c,y,_){zr(c,y),0<_.length&&(c.i=null,c.g.set(ar(c,y),H(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var A=y[_];const X=encodeURIComponent(String(A)),le=this.V(A);for(A=0;A<le.length;A++){var j=X;le[A]!==""&&(j+="="+encodeURIComponent(String(le[A]))),c.push(j)}}return this.i=c.join("&")};function ar(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Su(c,y){y&&!c.j&&(In(c),c.i=null,c.g.forEach(function(_,A){var j=A.toLowerCase();A!=j&&(zr(this,A),qo(this,j,_))},c)),c.j=y}function Ss(c,y){const _=new xn;if(m.Image){const A=new Image;A.onload=N(Nn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=N(Nn,_,"TestLoadImage: error",!1,y,A),A.onabort=N(Nn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=N(Nn,_,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function qn(c,y){const _=new xn,A=new AbortController,j=setTimeout(()=>{A.abort(),Nn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(X=>{clearTimeout(j),X.ok?Nn(_,"TestPingServer: ok",!0,y):Nn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),Nn(_,"TestPingServer: error",!1,y)})}function Nn(c,y,_,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(_)}catch{}}function Rs(){this.g=new Or}function or(c,y,_){const A=_||"";try{jo(c,function(j,X){let le=j;g(j)&&(le=dn(j)),y.push(A+X+"="+encodeURIComponent(le))})}catch(j){throw y.push(A+"type="+encodeURIComponent("_badmap")),j}}function Ri(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Ri,mn),Ri.prototype.g=function(){return new qr(this.l,this.j)},Ri.prototype.i=(function(c){return function(){return c}})({});function qr(c,y){st.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(qr,st),i=qr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,ur(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ho(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ho(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?lr(this):ur(this),this.readyState==3&&Ho(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,lr(this))},i.Qa=function(c){this.g&&(this.response=c,lr(this))},i.ga=function(){this.g&&lr(this)};function lr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ur(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ur(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fo(c){let y="";return W(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function kt(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Fo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):We(c,y,_))}function Qe(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Qe,st);var Ta=/^https?$/i,xs=["POST","PUT"];i=Qe.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rr.g(),this.v=this.o?Do(this.o):Do(rr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(X){Ru(this,X);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)_.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())_.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(xs,y,void 0))||A||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of _)this.g.setRequestHeader(X,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cs(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Ru(this,X)}};function Ru(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,ba(c),cr(c)}function ba(c){c.A||(c.A=!0,qe(c,"complete"),qe(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,qe(this,"complete"),qe(this,"abort"),cr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?wa(this):this.bb())},i.bb=function(){wa(this)};function wa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Dn(c)!=4||c.Z()!=2)){if(c.u&&Dn(c)==4)Ot(c.Ea,0,c);else if(qe(c,"readystatechange"),Dn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=le===0){var j=String(c.D).match(Ts)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),A=!Ta.test(j?j.toLowerCase():"")}_=A}if(_)qe(c,"complete"),qe(c,"success");else{c.m=6;try{var X=2<Dn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",ba(c)}}finally{cr(c)}}}}function cr(c,y){if(c.g){Cs(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||qe(c,"ready");try{_.onreadystatechange=A}catch{}}}function Cs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Dn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),vi(y)}};function xu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function nf(c){const y={};c=(c.g&&2<=Dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ie(c[A]))continue;var _=V(c[A]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=y[j]||[];y[j]=X,X.push(_)}C(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Aa(c){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,c),this.cb=Is("retryDelaySeedMs",1e4,c),this.Wa=Is("forwardChannelMaxRetries",2,c),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Lr(c&&c.concurrentRequestLimit),this.Da=new Rs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Aa.prototype,i.la=8,i.G=1,i.connect=function(c,y,_,A){at(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Mu(this,null,this.W),Ra(this)};function Go(c){if(Cu(c),c.G==3){var y=c.U++,_=gn(c.I);if(We(_,"SID",c.K),We(_,"RID",y),We(_,"TYPE","terminate"),Ns(c,_),y=new rn(c,c.j,y),y.L=2,y.v=ws(gn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=Vu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),vs(y)}ku(c)}function Sa(c){c.g&&(Ds(c),c.g.cancel(),c.g=null)}function Cu(c){Sa(c),c.u&&(m.clearTimeout(c.u),c.u=null),xa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ra(c){if(!pa(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||M(),ge||(oe(),ge=!0),Be.add(y,c),c.B=0}}function rf(c,y){return ya(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=vt(w(c.Ga,c,y),Yo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new rn(this,this.j,c);let X=this.o;if(this.S&&(X?(X=R(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(j.H=X,X=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Iu(this,j,y),_=gn(this.I),We(_,"RID",c),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),Ns(this,_),X&&(this.O?y="headers="+encodeURIComponent(String(Fo(X)))+"&"+y:this.m&&kt(_,this.m,X)),_a(this.h,j),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",y),We(_,"SID","null"),j.T=!0,Bn(j,_,null)):Bn(j,_,y),this.G=2}}else this.G==3&&(c?Qo(this,c):this.i.length==0||pa(this.h)||Qo(this))};function Qo(c,y){var _;y?_=y.l:_=c.U++;const A=gn(c.I);We(A,"SID",c.K),We(A,"RID",_),We(A,"AID",c.T),Ns(c,A),c.m&&c.o&&kt(A,c.m,c.o),_=new rn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Iu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_a(c.h,_),Bn(_,A,y)}function Ns(c,y){c.H&&W(c.H,function(_,A){We(y,A,_)}),c.l&&jo({},function(_,A){We(y,A,_)})}function Iu(c,y,_){_=Math.min(c.i.length,_);var A=c.l?w(c.l.Na,c.l,c):null;e:{var j=c.i;let X=-1;for(;;){const le=["count="+_];X==-1?0<_?(X=j[0].g,le.push("ofs="+X)):X=0:le.push("ofs="+X);let Le=!0;for(let xt=0;xt<_;xt++){let Ue=j[xt].g;const Mt=j[xt].map;if(Ue-=X,0>Ue)X=Math.max(0,j[xt].g-100),Le=!1;else try{or(Mt,le,"req"+Ue+"_")}catch{A&&A(Mt)}}if(Le){A=le.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,A}function Nu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||M(),ge||(oe(),ge=!0),Be.add(y,c),c.v=0}}function Ko(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=vt(w(c.Fa,c),Yo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=vt(w(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Sa(this),Du(this))};function Ds(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Du(c){c.g=new rn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=gn(c.qa);We(y,"RID","rpc"),We(y,"SID",c.K),We(y,"AID",c.T),We(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(y,"TO",c.ja),We(y,"TYPE","xmlhttp"),Ns(c,y),c.m&&c.o&&kt(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ws(gn(y)),_.m=null,_.P=!0,Pr(_,c)}i.Za=function(){this.C!=null&&(this.C=null,Sa(this),Ko(this),at(19))};function xa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ou(c,y){var _=null;if(c.g==y){xa(c),Ds(c),c.g=null;var A=2}else if(Lo(c.h,y))_=y.D,sn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var j=c.B;A=Ei(),qe(A,new Rt(A,_)),Ra(c)}else Nu(c);else if(j=y.s,j==3||j==0&&0<y.X||!(A==1&&rf(c,y)||A==2&&Ko(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),j){case 1:Hr(c,5);break;case 4:Hr(c,10);break;case 3:Hr(c,6);break;default:Hr(c,2)}}}function Yo(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function Hr(c,y){if(c.j.info("Error code "+y),y==2){var _=w(c.fb,c),A=c.Xa;const j=!A;A=new Et(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||bs(A,"https"),ws(A),j?Ss(A.toString(),_):qn(A.toString(),_)}else at(2);c.G=0,c.l&&c.l.sa(y),ku(c),Cu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ku(c){if(c.G=0,c.ka=[],c.l){const y=Uo(c.h);(y.length!=0||c.i.length!=0)&&(B(c.ka,y),B(c.ka,c.i),c.h.i.length=0,H(c.i),c.i.length=0),c.l.ra()}}function Mu(c,y,_){var A=_ instanceof Et?gn(_):new Et(_);if(A.g!="")y&&(A.g=y+"."+A.g),Si(A,A.s);else{var j=m.location;A=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var X=new Et(null);A&&bs(X,A),y&&(X.g=y),j&&Si(X,j),_&&(X.l=_),A=X}return _=c.D,y=c.ya,_&&y&&We(A,_,y),We(A,"VER",c.la),Ns(c,A),A}function Vu(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Qe(new Ri({eb:_})):new Qe(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pu(){}i=Pu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ca(){}Ca.prototype.g=function(c,y){return new an(c,y)};function an(c,y){st.call(this),this.g=new Aa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ie(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new hr(this)}k(an,st),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Go(this.g)},an.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=dn(c),c=_);y.i.push(new wu(y.Ya++,c)),y.G==3&&Ra(y)},an.prototype.N=function(){this.g.l=null,delete this.j,Go(this.g),delete this.g,an.aa.N.call(this)};function Lu(c){Mr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}k(Lu,Mr);function Uu(){ko.call(this),this.status=1}k(Uu,ko);function hr(c){this.g=c}k(hr,Pu),hr.prototype.ua=function(){qe(this.g,"a")},hr.prototype.ta=function(c){qe(this.g,new Lu(c))},hr.prototype.sa=function(c){qe(this.g,new Uu)},hr.prototype.ra=function(){qe(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,kE=function(){return new Ca},OE=function(){return Ei()},DE=nr,wm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,Yc=wi,Vr.COMPLETE="complete",NE=Vr,Oo.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",st.prototype.listen=st.prototype.K,Ul=Oo,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,IE=Qe}).apply(typeof zc<"u"?zc:typeof self<"u"?self:typeof window<"u"?window:{});const D0="@firebase/firestore",O0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new Xm("@firebase/firestore");function ro(){return na.logLevel}function he(i,...e){if(na.logLevel<=Me.DEBUG){const n=e.map(Jm);na.debug(`Firestore (${wo}): ${i}`,...n)}}function hi(i,...e){if(na.logLevel<=Me.ERROR){const n=e.map(Jm);na.error(`Firestore (${wo}): ${i}`,...n)}}function fo(i,...e){if(na.logLevel<=Me.WARN){const n=e.map(Jm);na.warn(`Firestore (${wo}): ${i}`,...n)}}function Jm(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,ME(i,s,n)}function ME(i,e,n){let s=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw hi(s),new Error(s)}function Ke(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||ME(e,o,s)}function xe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zt.UNAUTHENTICATED)))}shutdown(){}}class NR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class DR{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new li;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new li,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new li)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new VE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class OR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new OR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new k0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=VR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ve(i,e){return i<e?-1:i>e?1:0}function Am(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return lm(o)===lm(u)?Ve(o,u):lm(o)?1:-1}return Ve(i.length,e.length)}const PR=55296,LR=57343;function lm(i){const e=i.charCodeAt(0);return e>=PR&&e<=LR}function mo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="__name__";class _r{constructor(e,n,s){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&be(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=_r.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ve(e.length,n.length)}static compareSegments(e,n){const s=_r.isNumericId(e),o=_r.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?_r.extractNumericId(e).compare(_r.extractNumericId(n)):Am(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class rt extends _r{construct(e,n,s){return new rt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new rt(n)}static emptyPath(){return new rt([])}}const UR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends _r{construct(e,n,s){return new Qt(e,n,s)}static isValidIdentifier(e){return UR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new Qt([M0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ce(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(rt.fromString(e))}static fromName(e){return new ve(rt.fromString(e).popFirst(5))}static empty(){return new ve(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(i,e,n){if(!n)throw new ce(ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function jR(i,e,n,s){if(e===!0&&s===!0)throw new ce(ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function V0(i){if(!ve.isDocumentKey(i))throw new ce(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function P0(i){if(ve.isDocumentKey(i))throw new ce(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function LE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Dh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function zn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(i);throw new ce(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(i,e){const n={typeString:i};return e&&(n.value=e),n}function lu(i,e){if(!LE(i))throw new ce(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ce(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=-62135596800,U0=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*U0);return new it(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<L0)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U0}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-L0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:St("string",it._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new it(0,0))}static max(){return new Re(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function zR(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new it(n+1,0):new it(n,s));return new ss(o,ve.empty(),e)}function BR(i){return new ss(i.readTime,i.key,Xl)}class ss{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ss(Re.min(),ve.empty(),Xl)}static max(){return new ss(Re.max(),ve.empty(),Xl)}}function qR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(i.documentKey,e.documentKey),n!==0?n:Ve(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==HR)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.reject(n)}static resolve(e){return new ne(((n,s)=>{n(e)}))}static reject(e){return new ne(((n,s)=>{s(e)}))}static waitFor(e){return new ne(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next((o=>o?ne.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ne(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((v=>{f[g]=v,++m,m===u&&s(f)}),(v=>o(v)))}}))}static doWhile(e,n){return new ne(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function GR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function So(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=-1;function kh(i){return i==null}function lh(i){return i===0&&1/i==-1/0}function QR(i){return typeof i=="number"&&Number.isInteger(i)&&!lh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="";function KR(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=j0(e)),e=YR(i.get(n),e);return j0(e)}function YR(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case UE:n+="";break;default:n+=u}}return n}function j0(i){return i+UE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ms(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function jE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Gt.RED,this.left=o??Gt.EMPTY,this.right=u??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Gt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Dt(Qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new zE("Invalid base64 string: "+u):u}})(e);return new Yt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const $R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(i){if(Ke(!!i,39018),typeof i=="string"){let e=0;const n=$R.exec(i);if(Ke(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pt(i.seconds),nanos:pt(i.nanos)}}function pt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function os(i){return typeof i=="string"?Yt.fromBase64String(i):Yt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="server_timestamp",qE="__type__",HE="__previous_value__",FE="__local_write_time__";function ng(i){return(i?.mapValue?.fields||{})[qE]?.stringValue===BE}function Mh(i){const e=i.mapValue.fields[HE];return ng(e)?Mh(e):e}function Wl(i){const e=as(i.mapValue.fields[FE].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,s,o,u,f,m,p,g,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const uh="(default)";class Zl{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="__type__",WR="__max__",qc={mapValue:{}},QE="__vector__",ch="value";function ls(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ng(i)?4:JR(i)?9007199254740991:ZR(i)?10:11:be(28295,{value:i})}function Ar(i,e){if(i===e)return!0;const n=ls(i);if(n!==ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wl(i).isEqual(Wl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=as(o.timestampValue),m=as(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return os(o.bytesValue).isEqual(os(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return pt(o.geoPointValue.latitude)===pt(u.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return pt(o.integerValue)===pt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=pt(o.doubleValue),m=pt(u.doubleValue);return f===m?lh(f)===lh(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return mo(i.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(z0(f)!==z0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Ar(f[p],m[p])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function Jl(i,e){return(i.values||[]).find((n=>Ar(n,e)))!==void 0}function go(i,e){if(i===e)return 0;const n=ls(i),s=ls(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=pt(u.integerValue||u.doubleValue),p=pt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return q0(i.timestampValue,e.timestampValue);case 4:return q0(Wl(i),Wl(e));case 5:return Am(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=os(u),p=os(f);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=Ve(m[g],p[g]);if(v!==0)return v}return Ve(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Ve(pt(u.latitude),pt(f.latitude));return m!==0?m:Ve(pt(u.longitude),pt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return H0(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},p=f.fields||{},g=m[ch]?.arrayValue,v=p[ch]?.arrayValue,S=Ve(g?.values?.length||0,v?.values?.length||0);return S!==0?S:H0(g,v)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===qc.mapValue&&f===qc.mapValue)return 0;if(u===qc.mapValue)return 1;if(f===qc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let S=0;S<p.length&&S<v.length;++S){const w=Am(p[S],v[S]);if(w!==0)return w;const N=go(m[p[S]],g[v[S]]);if(N!==0)return N}return Ve(p.length,v.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function q0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ve(i,e);const n=as(i),s=as(e),o=Ve(n.seconds,s.seconds);return o!==0?o:Ve(n.nanos,s.nanos)}function H0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=go(n[o],s[o]);if(u)return u}return Ve(n.length,s.length)}function po(i){return Sm(i)}function Sm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=as(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return os(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ve.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Sm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Sm(n.fields[f])}`;return o+"}"})(i.mapValue):be(61005,{value:i})}function $c(i){switch(ls(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(i);return e?16+$c(e):16;case 5:return 2*i.stringValue.length;case 6:return os(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+$c(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return ms(s.fields,((u,f)=>{o+=u.length+$c(f)})),o})(i.mapValue);default:throw be(13486,{value:i})}}function F0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Rm(i){return!!i&&"integerValue"in i}function rg(i){return!!i&&"arrayValue"in i}function G0(i){return!!i&&"nullValue"in i}function Q0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Xc(i){return!!i&&"mapValue"in i}function ZR(i){return(i?.mapValue?.fields||{})[GE]?.stringValue===QE}function Hl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ms(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Hl(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hl(i.arrayValue.values[n]);return e}return{...i}}function JR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===WR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(n)}setAll(e){let n=Qt.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Hl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ms(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new fn(Hl(this.value))}}function KE(i){const e=[];return ms(i.fields,((n,s)=>{const o=new Qt([n]);if(Xc(s)){const u=KE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Jt(e,0,Re.min(),Re.min(),Re.min(),fn.empty(),0)}static newFoundDocument(e,n,s,o){return new Jt(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new Jt(e,2,n,Re.min(),Re.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Re.min(),Re.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function K0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=go(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ar(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function e2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{}class At extends YE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new n2(e,n,s):n==="array-contains"?new s2(e,s):n==="in"?new a2(e,s):n==="not-in"?new o2(e,s):n==="array-contains-any"?new l2(e,s):new At(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new r2(e,s):new i2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(go(n,this.value)):n!==null&&ls(this.value)===ls(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends YE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wn(e,n)}matches(e){return $E(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $E(i){return i.op==="and"}function XE(i){return t2(i)&&$E(i)}function t2(i){for(const e of i.filters)if(e instanceof Wn)return!1;return!0}function xm(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+po(i.value);if(XE(i))return i.filters.map((e=>xm(e))).join(",");{const e=i.filters.map((n=>xm(n))).join(",");return`${i.op}(${e})`}}function WE(i,e){return i instanceof At?(function(s,o){return o instanceof At&&s.op===o.op&&s.field.isEqual(o.field)&&Ar(s.value,o.value)})(i,e):i instanceof Wn?(function(s,o){return o instanceof Wn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&WE(f,o.filters[m])),!0):!1})(i,e):void be(19439)}function ZE(i){return i instanceof At?(function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`})(i):i instanceof Wn?(function(n){return n.op.toString()+" {"+n.getFilters().map(ZE).join(" ,")+"}"})(i):"Filter"}class n2 extends At{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class r2 extends At{constructor(e,n){super(e,"in",n),this.keys=JE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class i2 extends At{constructor(e,n){super(e,"not-in",n),this.keys=JE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function JE(i,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}class s2 extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rg(n)&&Jl(n.arrayValue,this.value)}}class a2 extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class o2 extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jl(this.value.arrayValue,n)}}class l2 extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Jl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function $0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new u2(i,e,n,s,o,u,f)}function ig(i){const e=xe(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>xm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>po(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>po(s))).join(",")),e.Te=n}return e.Te}function sg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!e2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!WE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Y0(i.startAt,e.startAt)&&Y0(i.endAt,e.endAt)}function Cm(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function c2(i,e,n,s,o,u,f,m){return new uu(i,e,n,s,o,u,f,m)}function Vh(i){return new uu(i)}function X0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function eT(i){return i.collectionGroup!==null}function Fl(i){const e=xe(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Dt(Qt.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new fh(u,s))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new fh(Qt.keyField(),s))}return e.Ie}function vr(i){const e=xe(i);return e.Ee||(e.Ee=h2(e,Fl(i))),e.Ee}function h2(i,e){if(i.limitType==="F")return $0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new fh(o.field,u)}));const n=i.endAt?new hh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new hh(i.startAt.position,i.startAt.inclusive):null;return $0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Im(i,e){const n=i.filters.concat([e]);return new uu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Nm(i,e,n){return new uu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ph(i,e){return sg(vr(i),vr(e))&&i.limitType===e.limitType}function tT(i){return`${ig(vr(i))}|lt:${i.limitType}`}function io(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ZE(o))).join(", ")}]`),kh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>po(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>po(o))).join(",")),`Target(${s})`})(vr(i))}; limitType=${i.limitType})`}function Lh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Fl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const g=K0(f,m,p);return f.inclusive?g<=0:g<0})(s.startAt,Fl(s),o)||s.endAt&&!(function(f,m,p){const g=K0(f,m,p);return f.inclusive?g>=0:g>0})(s.endAt,Fl(s),o))})(i,e)}function f2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function nT(i){return(e,n)=>{let s=!1;for(const o of Fl(i)){const u=d2(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function d2(i,e,n){const s=i.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?go(p,g):be(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new ct(ve.comparator);function fi(){return m2}const rT=new ct(ve.comparator);function jl(...i){let e=rT;for(const n of i)e=e.insert(n.key,n);return e}function iT(i){let e=rT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function $s(){return Gl()}function sT(){return Gl()}function Gl(){return new oa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const g2=new ct(ve.comparator),p2=new Dt(ve.comparator);function Pe(...i){let e=p2;for(const n of i)e=e.add(n);return e}const y2=new Dt(Ve);function _2(){return y2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function aT(i){return{integerValue:""+i}}function v2(i,e){return QR(e)?aT(e):ag(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function E2(i,e,n){return i instanceof dh?(function(o,u){const f={fields:{[qE]:{stringValue:BE},[FE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ng(u)&&(u=Mh(u)),u&&(f.fields[HE]=u),{mapValue:f}})(n,e):i instanceof eu?lT(i,e):i instanceof tu?uT(i,e):(function(o,u){const f=oT(o,u),m=W0(f)+W0(o.Ae);return Rm(f)&&Rm(o.Ae)?aT(m):ag(o.serializer,m)})(i,e)}function T2(i,e,n){return i instanceof eu?lT(i,e):i instanceof tu?uT(i,e):n}function oT(i,e){return i instanceof mh?(function(s){return Rm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class dh extends Uh{}class eu extends Uh{constructor(e){super(),this.elements=e}}function lT(i,e){const n=cT(e);for(const s of i.elements)n.some((o=>Ar(o,s)))||n.push(s);return{arrayValue:{values:n}}}class tu extends Uh{constructor(e){super(),this.elements=e}}function uT(i,e){let n=cT(e);for(const s of i.elements)n=n.filter((o=>!Ar(o,s)));return{arrayValue:{values:n}}}class mh extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function W0(i){return pt(i.integerValue||i.doubleValue)}function cT(i){return rg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function b2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof eu&&o instanceof eu||s instanceof tu&&o instanceof tu?mo(s.elements,o.elements,Ar):s instanceof mh&&o instanceof mh?Ar(s.Ae,o.Ae):s instanceof dh&&o instanceof dh})(i.transform,e.transform)}class w2{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class jh{}function hT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new og(i.key,Yn.none()):new cu(i.key,i.data,Yn.none());{const n=i.data,s=fn.empty();let o=new Dt(Qt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new gs(i.key,s,new wn(o.toArray()),Yn.none())}}function A2(i,e,n){i instanceof cu?(function(o,u,f){const m=o.value.clone(),p=J0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof gs?(function(o,u,f){if(!Wc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=J0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(fT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ql(i,e,n,s){return i instanceof cu?(function(u,f,m,p){if(!Wc(u.precondition,f))return m;const g=u.value.clone(),v=ev(u.fieldTransforms,p,f);return g.setAll(v),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof gs?(function(u,f,m,p){if(!Wc(u.precondition,f))return m;const g=ev(u.fieldTransforms,p,f),v=f.data;return v.setAll(fT(u)),v.setAll(g),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(i,e,n,s):(function(u,f,m){return Wc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function S2(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=oT(s.transform,o||null);u!=null&&(n===null&&(n=fn.empty()),n.set(s.field,u))}return n||null}function Z0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&mo(s,o,((u,f)=>b2(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class cu extends jh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gs extends jh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function fT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function J0(i,e,n){const s=new Map;Ke(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,T2(f,m,n[o]))}return s}function ev(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,E2(u,f,e))}return s}class og extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R2 extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&A2(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ql(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ql(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=sT();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=hT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,((n,s)=>Z0(n,s)))&&mo(this.baseMutations,e.baseMutations,((n,s)=>Z0(n,s)))}}class lg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return g2})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new lg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,ze;function N2(i){switch(i){case ee.OK:return be(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function dT(i){if(i===void 0)return hi("GRPC error has no .code"),ee.UNKNOWN;switch(i){case wt.OK:return ee.OK;case wt.CANCELLED:return ee.CANCELLED;case wt.UNKNOWN:return ee.UNKNOWN;case wt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case wt.INTERNAL:return ee.INTERNAL;case wt.UNAVAILABLE:return ee.UNAVAILABLE;case wt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case wt.NOT_FOUND:return ee.NOT_FOUND;case wt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case wt.ABORTED:return ee.ABORTED;case wt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case wt.DATA_LOSS:return ee.DATA_LOSS;default:return be(39323,{code:i})}}(ze=wt||(wt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new rs([4294967295,4294967295],0);function tv(i){const e=D2().encode(i),n=new CE;return n.update(e),new Uint8Array(n.digest())}function nv(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new rs([n,s],0),new rs([o,u],0)]}class ug{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(s<0)throw new zl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(rs.fromNumber(s)));return o.compare(O2)===1&&(o=new rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tv(e),[s,o]=nv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new ug(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=tv(e),[s,o]=nv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(Re.min(),o,new ct(Ve),fi(),Pe())}}class hu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new hu(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class mT{constructor(e,n){this.targetId=e,this.Ce=n}}class gT{constructor(e,n,s=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class rv{constructor(){this.ve=0,this.Fe=iv(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:u})}})),new hu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=iv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class k2{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=Hc(),this.He=Hc(),this.Ye=new ct(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Cm(u))if(s===0){const f=new ve(u.path);this.et(n,f,Jt.newNoDocument(f,Re.min()))}else Ke(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=os(s).toUint8Array()}catch(p){if(p instanceof zE)return fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new ug(f,o,u)}catch(p){return fo(p instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Cm(m.target)){const p=new ve(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Jt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Pe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new zh(e,n,this.Ye,this.je,s);return this.je=fi(),this.Je=Hc(),this.He=Hc(),this.Ye=new ct(Ve),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dt(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dt(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hc(){return new ct(ve.comparator)}function iv(){return new ct(ve.comparator)}const M2={asc:"ASCENDING",desc:"DESCENDING"},V2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class L2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dm(i,e){return i.useProto3Json||kh(e)?e:{value:e}}function gh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function U2(i,e){return gh(i,e.toTimestamp())}function Er(i){return Ke(!!i,49232),Re.fromTimestamp((function(n){const s=as(n);return new it(s.seconds,s.nanos)})(i))}function cg(i,e){return Om(i,e).canonicalString()}function Om(i,e){const n=(function(o){return new rt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function yT(i){const e=rt.fromString(i);return Ke(bT(e),10190,{key:e.toString()}),e}function km(i,e){return cg(i.databaseId,e.path)}function um(i,e){const n=yT(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ve(vT(n))}function _T(i,e){return cg(i.databaseId,e)}function j2(i){const e=yT(i);return e.length===4?rt.emptyPath():vT(e)}function Mm(i){return new rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function vT(i){return Ke(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function sv(i,e,n){return{name:km(i,e),fields:n.value.mapValue.fields}}function z2(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(Ke(v===void 0||typeof v=="string",58123),Yt.fromBase64String(v||"")):(Ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Yt.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(g){const v=g.code===void 0?ee.UNKNOWN:dT(g.code);return new ce(v,g.message||"")})(f);n=new gT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=um(i,s.document.name),u=Er(s.document.updateTime),f=s.document.createTime?Er(s.document.createTime):Re.min(),m=new fn({mapValue:{fields:s.document.fields}}),p=Jt.newFoundDocument(o,u,f,m),g=s.targetIds||[],v=s.removedTargetIds||[];n=new Zc(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=um(i,s.document),u=s.readTime?Er(s.readTime):Re.min(),f=Jt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Zc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=um(i,s.document),u=s.removedTargetIds||[];n=new Zc([],u,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new I2(o,u),m=s.targetId;n=new mT(m,f)}}return n}function B2(i,e){let n;if(e instanceof cu)n={update:sv(i,e.key,e.value)};else if(e instanceof og)n={delete:km(i,e.key)};else if(e instanceof gs)n={update:sv(i,e.key,e.data),updateMask:X2(e.fieldMask)};else{if(!(e instanceof R2))return be(16599,{Vt:e.type});n={verify:km(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof dh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof eu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof tu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw be(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:U2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be(27497)})(i,e.precondition)),n}function q2(i,e){return i&&i.length>0?(Ke(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?Er(o.updateTime):Er(u);return f.isEqual(Re.min())&&(f=Er(u)),new w2(f,o.transformResults||[])})(n,e)))):[]}function H2(i,e){return{documents:[_T(i,e.path)]}}function F2(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=_T(i,o);const u=(function(g){if(g.length!==0)return TT(Wn.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((v=>(function(w){return{field:so(w.field),direction:K2(w.dir)}})(v)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Dm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function G2(i){let e=j2(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(S){const w=ET(S);return w instanceof Wn&&XE(w)?w.getFilters():[w]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((w=>(function(k){return new fh(ao(k.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(n.orderBy));let m=null;n.limit&&(m=(function(S){let w;return w=typeof S=="object"?S.value:S,kh(w)?null:w})(n.limit));let p=null;n.startAt&&(p=(function(S){const w=!!S.before,N=S.values||[];return new hh(N,w)})(n.startAt));let g=null;return n.endAt&&(g=(function(S){const w=!S.before,N=S.values||[];return new hh(N,w)})(n.endAt)),c2(e,o,f,u,m,"F",p,g)}function Q2(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ET(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ao(n.unaryFilter.field);return At.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ao(n.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ao(n.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ao(n.unaryFilter.field);return At.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(n){return At.create(ao(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Wn.create(n.compositeFilter.filters.map((s=>ET(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(i):be(30097,{filter:i})}function K2(i){return M2[i]}function Y2(i){return V2[i]}function $2(i){return P2[i]}function so(i){return{fieldPath:i.canonicalString()}}function ao(i){return Qt.fromServerFormat(i.fieldPath)}function TT(i){return i instanceof At?(function(n){if(n.op==="=="){if(Q0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(G0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(G0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:Y2(n.op),value:n.value}}})(i):i instanceof Wn?(function(n){const s=n.getFilters().map((o=>TT(o)));return s.length===1?s[0]:{compositeFilter:{op:$2(n.op),filters:s}}})(i):be(54877,{filter:i})}function X2(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function bT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,s,o,u=Re.min(),f=Re.min(),m=Yt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.yt=e}}function Z2(i){const e=G2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Nm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.Cn=new ex}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(ss.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class ex{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Dt(rt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Dt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wT=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(wT,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yo(0)}static cr(){return new yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="LruGarbageCollector",tx=1048576;function lv([i,e],[n,s]){const o=Ve(i,n);return o===0?Ve(e,s):o}class nx{constructor(e){this.Ir=e,this.buffer=new Dt(lv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rx{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){So(n)?he(ov,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)}))}}class ix{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Oh.ce);const s=new nx(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(av)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),av):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(s=S,m=Date.now(),this.removeTargets(e,s,n)))).next((S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(g=Date.now(),ro()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function sx(i,e){return new ix(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.changes=new oa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Ql(s.mutation,o,wn.empty(),it.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const o=$s();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=jl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=$s();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=fi();const f=Gl(),m=(function(){return Gl()})();return n.forEach(((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof gs)?u=u.insert(g.key,g):v!==void 0?(f.set(g.key,v.mutation.getFieldMask()),Ql(v.mutation,g,v.mutation.getFieldMask(),it.now())):f.set(g.key,wn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,v)=>f.set(g,v))),n.forEach(((g,v)=>m.set(g,new ox(v,f.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Gl();let o=new ct(((f,m)=>f-m)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let v=s.get(p)||wn.empty();v=m.applyToLocalView(g,v),s.set(p,v);const S=(o.get(m.batchId)||Pe()).add(p);o=o.insert(m.batchId,S)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,S=sT();v.forEach((w=>{if(!u.has(w)){const N=hT(n.get(w),s.get(w));N!==null&&S.set(w,N),u=u.add(w)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,S))}return ne.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve($s());let m=Xl,p=u;return f.next((g=>ne.forEach(g,((v,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(v)?ne.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,Pe()))).next((v=>({batchId:m,changes:iT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=jl();return this.indexManager.getCollectionParents(e,u).next((m=>ne.forEach(m,(p=>{const g=(function(S,w){return new uu(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((v=>{v.forEach(((S,w)=>{f=f.insert(S,w)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,g)=>{const v=g.getKey();f.get(v)===null&&(f=f.insert(v,Jt.newInvalidDocument(v)))}));let m=jl();return f.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&Ql(v.mutation,g,wn.empty(),it.now()),Lh(n,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Er(o.createTime)}})(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:Z2(o.bundledQuery),readTime:Er(o.readTime)}})(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.overlays=new ct(ve.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$s();return ne.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=$s(),u=n.length+1,f=new ve(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ct(((g,v)=>g-v));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let v=u.get(g.largestBatchId);v===null&&(v=$s(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=$s(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return ne.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new C2(n,s));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new Dt(Ut.$r),this.Ur=new Dt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ut(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new rt([])),s=new Ut(n,e),o=new Ut(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new rt([])),s=new Ut(n,e),o=new Ut(n,e+1);let u=Pe();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Ut(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dt(Ut.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new x2(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Ut(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?tg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ut(n,0),o=new Ut(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Dt(Ve);return n.forEach((o=>{const u=new Ut(o,0),f=new Ut(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new Ut(new ve(u),0);let m=new Dt(Ve);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),f),ne.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(n.mutations,(o=>{const u=new Ut(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Ut(n,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.ri=e,this.docs=(function(){return new ct(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let s=fi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Jt.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=fi();const f=n.path,m=new ve(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||qR(BR(v),s)<=0||(o.has(v.key)||Lh(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){be(9500)}ii(e,n){return ne.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new mx(this)}getSize(e){return ne.resolve(this.size)}}class mx extends ax{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.persistence=e,this.si=new oa((n=>ig(n)),sg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=yo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(u).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oh(0),this.li=!1,this.li=!0,this.hi=new hx,this.referenceDelegate=e(this),this.Pi=new gx(this),this.indexManager=new J2,this.remoteDocumentCache=(function(o){return new dx(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new W2(n),this.Ii=new ux(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new fx(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new px(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class px extends FR{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ph{constructor(e,n){this.persistence=e,this.pi=new oa((s=>KR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=sx(this,n)}static mi(e,n){return new ph(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ne.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}br(e,n,s){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return h1()?8:GR(en())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new yx;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ro()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(ro()<=Me.DEBUG&&he("QueryEngine","Query:",io(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ro()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(n))):ne.resolve())}ys(e,n){if(X0(n))return ne.resolve(null);let s=vr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Nm(n,null,"F"),s=vr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Pe(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,f,p.readTime)?this.ys(e,Nm(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return X0(n)||o.isEqual(Re.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?ne.resolve(null):(ro()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(n)),this.vs(e,f,n,zR(o,Xl)).next((m=>m)))}))}Ds(e,n){let s=new Dt(nT(e));return n.forEach(((o,u)=>{Lh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return ro()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",io(n)),this.ps.getDocumentsMatchingQuery(e,n,ss.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",vx=3e8;class Ex{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ct(Ve),this.xs=new oa((u=>ig(u)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Tx(i,e,n,s){return new Ex(i,e,n,s)}async function ST(i,e){const n=xe(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=Pe();for(const g of o){f.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:m})))}))}))}function bx(i,e){const n=xe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const S=g.batch,w=S.keys();let N=ne.resolve();return w.forEach((k=>{N=N.next((()=>v.getEntry(p,k))).next((H=>{const B=g.docVersions.get(k);Ke(B!==null,48541),H.version.compareTo(B)<0&&(S.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),v.addEntry(H)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(p,S)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Pe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function RT(i){const e=xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function wx(i,e){const n=xe(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((v,S)=>{const w=o.get(S);if(!w)return;m.push(n.Pi.removeMatchingKeys(u,v.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,v.addedDocuments,S))));let N=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?N=N.withResumeToken(Yt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,s)),o=o.insert(S,N),(function(H,B,$){return H.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=vx?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(w,N,v)&&m.push(n.Pi.updateTargetData(u,N))}));let p=fi(),g=Pe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(Ax(u,f,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!s.isEqual(Re.min())){const v=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return ne.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function Ax(i,e,n){let s=Pe(),o=Pe();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=fi();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):he(mg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function Sx(i,e){const n=xe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=tg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Rx(i,e){const n=xe(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ne.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Ji(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Vm(i,e,n){const s=xe(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!So(f))throw f;he(mg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function uv(i,e,n){const s=xe(i);let o=Re.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,g,v){const S=xe(p),w=S.xs.get(v);return w!==void 0?ne.resolve(S.Ms.get(w)):S.Pi.getTargetData(g,v)})(s,f,vr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:Pe()))).next((m=>(xx(s,f2(e),m),{documents:m,Qs:u})))))}function xx(i,e,n){let s=i.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class cv{constructor(){this.activeTargetIds=_2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cx{constructor(){this.Mo=new cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="ConnectivityMonitor";class fv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(hv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(hv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc=null;function Pm(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="RestConnection",Nx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===uh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=Pm(),m=this.zo(e,n.toUriEncodedString());he(cm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),v=To(g);return this.Jo(e,m,p,s,v).then((S=>(he(cm,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw fo(cm,`RPC '${e}' ${f} failed with error: `,S,"url: ",m,"request:",s),S}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=Nx[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class kx extends Dx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Pm();return new Promise(((m,p)=>{const g=new IE;g.setWithCredentials(!0),g.listenOnce(NE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Yc.NO_ERROR:const S=g.getResponseJson();he(Wt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),m(S);break;case Yc.TIMEOUT:he(Wt,`RPC '${e}' ${f} timed out`),p(new ce(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const w=g.getStatus();if(he(Wt,`RPC '${e}' ${f} failed with status:`,w,"response text:",g.getResponseText()),w>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const k=N?.error;if(k&&k.status&&k.message){const H=(function($){const ie=$.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ie)>=0?ie:ee.UNKNOWN})(k.status);p(new ce(H,k.message))}else p(new ce(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ce(ee.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(Wt,`RPC '${e}' ${f} completed.`)}}));const v=JSON.stringify(o);he(Wt,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=Pm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=kE(),m=OE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const v=u.join("");he(Wt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const S=f.createWebChannel(v,p);this.I_(S);let w=!1,N=!1;const k=new Ox({Yo:B=>{N?he(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(w||(he(Wt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),he(Wt,`RPC '${e}' stream ${o} sending:`,B),S.send(B))},Zo:()=>S.close()}),H=(B,$,ie)=>{B.listen($,(F=>{try{ie(F)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return H(S,Ul.EventType.OPEN,(()=>{N||(he(Wt,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),H(S,Ul.EventType.CLOSE,(()=>{N||(N=!0,he(Wt,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(S))})),H(S,Ul.EventType.ERROR,(B=>{N||(N=!0,fo(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),k.a_(new ce(ee.UNAVAILABLE,"The operation could not be completed")))})),H(S,Ul.EventType.MESSAGE,(B=>{if(!N){const $=B.data[0];Ke(!!$,16349);const ie=$,F=ie?.error||ie[0]?.error;if(F){he(Wt,`RPC '${e}' stream ${o} received error:`,F);const fe=F.status;let ae=(function(R){const I=wt[R];if(I!==void 0)return dT(I)})(fe),W=F.message;ae===void 0&&(ae=ee.INTERNAL,W="Unknown error status: "+fe+" with message "+F.message),N=!0,k.a_(new ce(ae,W)),S.close()}else he(Wt,`RPC '${e}' stream ${o} received:`,$),k.u_($)}})),H(m,DE.STAT_EVENT,(B=>{B.stat===wm.PROXY?he(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===wm.NOPROXY&&he(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(i){return new L2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="PersistentStream";class CT{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(dv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mx extends CT{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=z2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?Er(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Mm(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=Cm(p)?{documents:H2(u,p)}:{query:F2(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=pT(u,f.resumeToken);const g=Dm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=gh(u,f.snapshotVersion.toTimestamp());const g=Dm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=Q2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Mm(this.serializer),n.removeTarget=e,this.q_(n)}}class Vx extends CT{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=q2(e.writeResults,e.commitTime),s=Er(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Mm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>B2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{}class Lx extends Px{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Om(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Om(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ux{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class jx{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{la(this)&&(he(ra,"Restarting streams for network reachability change."),await(async function(p){const g=xe(p);g.Ea.add(4),await fu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await qh(g)})(this))}))})),this.Ra=new Ux(s,o)}}async function qh(i){if(la(i))for(const e of i.da)await e(!0)}async function fu(i){for(const e of i.da)await e(!1)}function IT(i,e){const n=xe(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_g(n)?yg(n):Ro(n).O_()&&pg(n,e))}function gg(i,e){const n=xe(i),s=Ro(n);n.Ia.delete(e),s.O_()&&NT(n,e),n.Ia.size===0&&(s.O_()?s.L_():la(n)&&n.Ra.set("Unknown"))}function pg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(i).Y_(e)}function NT(i,e){i.Va.Ue(e),Ro(i).Z_(e)}function yg(i){i.Va=new k2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ro(i).start(),i.Ra.ua()}function _g(i){return la(i)&&!Ro(i).x_()&&i.Ia.size>0}function la(i){return xe(i).Ea.size===0}function DT(i){i.Va=void 0}async function zx(i){i.Ra.set("Online")}async function Bx(i){i.Ia.forEach(((e,n)=>{pg(i,e)}))}async function qx(i,e){DT(i),_g(i)?(i.Ra.ha(e),yg(i)):i.Ra.set("Unknown")}async function Hx(i,e,n){if(i.Ra.set("Online"),e instanceof gT&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){he(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yh(i,s)}else if(e instanceof Zc?i.Va.Ze(e):e instanceof mT?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const s=await RT(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(Yt.EMPTY_BYTE_STRING,v.snapshotVersion)),NT(u,p);const S=new Ji(v.target,p,g,v.sequenceNumber);pg(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){he(ra,"Failed to raise snapshot:",s),await yh(i,s)}}async function yh(i,e,n){if(!So(e))throw e;i.Ea.add(1),await fu(i),i.Ra.set("Offline"),n||(n=()=>RT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(ra,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await qh(i)}))}function OT(i,e){return e().catch((n=>yh(i,n,e)))}async function Hh(i){const e=xe(i),n=us(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tg;for(;Fx(e);)try{const o=await Sx(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Gx(e,o)}catch(o){await yh(e,o)}kT(e)&&MT(e)}function Fx(i){return la(i)&&i.Ta.length<10}function Gx(i,e){i.Ta.push(e);const n=us(i);n.O_()&&n.X_&&n.ea(e.mutations)}function kT(i){return la(i)&&!us(i).x_()&&i.Ta.length>0}function MT(i){us(i).start()}async function Qx(i){us(i).ra()}async function Kx(i){const e=us(i);for(const n of i.Ta)e.ea(n.mutations)}async function Yx(i,e,n){const s=i.Ta.shift(),o=lg.from(s,e,n);await OT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hh(i)}async function $x(i,e){e&&us(i).X_&&await(async function(s,o){if((function(f){return N2(f)&&f!==ee.ABORTED})(o.code)){const u=s.Ta.shift();us(s).B_(),await OT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hh(s)}})(i,e),kT(i)&&MT(i)}async function mv(i,e){const n=xe(i);n.asyncQueue.verifyOperationInProgress(),he(ra,"RemoteStore received new credentials");const s=la(n);n.Ea.add(3),await fu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qh(n)}async function Xx(i,e){const n=xe(i);e?(n.Ea.delete(2),await qh(n)):e||(n.Ea.add(2),await fu(n),n.Ra.set("Unknown"))}function Ro(i){return i.ma||(i.ma=(function(n,s,o){const u=xe(n);return u.sa(),new Mx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:zx.bind(null,i),t_:Bx.bind(null,i),r_:qx.bind(null,i),H_:Hx.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),_g(i)?yg(i):i.Ra.set("Unknown")):(await i.ma.stop(),DT(i))}))),i.ma}function us(i){return i.fa||(i.fa=(function(n,s,o){const u=xe(n);return u.sa(),new Vx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Qx.bind(null,i),r_:$x.bind(null,i),ta:Kx.bind(null,i),na:Yx.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hh(i)):(await i.fa.stop(),i.Ta.length>0&&(he(ra,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new vg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(i,e){if(hi("AsyncQueue",`${e}: ${i}`),So(i))return new ce(ee.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(e){return new oo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=jl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.ga=new ct(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class _o{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new _o(e,n,oo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Zx{constructor(){this.queries=pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=pv(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new ce(ee.ABORTED,"Firestore shutting down"))}}function pv(){return new oa((i=>tT(i)),Ph)}async function Tg(i,e){const n=xe(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new Wx,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Eg(f,`Initialization of query '${io(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&wg(n)}async function bg(i,e){const n=xe(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Jx(i,e){const n=xe(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&wg(n)}function eC(i,e,n){const s=xe(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function wg(i){i.Ca.forEach((e=>{e.next()}))}var Lm,yv;(yv=Lm||(Lm={})).Ma="default",yv.Cache="cache";class Ag{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new _o(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class tC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=nT(e),this.tu=new oo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new gv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,S)=>{const w=o.get(v),N=Lh(this.query,S)?S:null,k=!!w&&this.mutatedKeys.has(w.key),H=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let B=!1;w&&N?w.data.isEqual(N.data)?k!==H&&(s.track({type:3,doc:N}),B=!0):this.su(w,N)||(s.track({type:2,doc:N}),B=!0,(p&&this.eu(N,p)>0||g&&this.eu(N,g)<0)&&(m=!0)):!w&&N?(s.track({type:0,doc:N}),B=!0):w&&!N&&(s.track({type:1,doc:w}),B=!0,(p||g)&&(m=!0)),B&&(N?(f=f.add(N),u=H?u.add(v):u.delete(v)):(f=f.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((v,S)=>(function(N,k){const H=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:B})}};return H(N)-H(k)})(v.type,S.type)||this.eu(v.doc,S.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,f.length!==0||g?{snapshot:new _o(this.query,e.tu,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new PT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new VT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class nC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class rC{constructor(e){this.key=e,this.hu=!1}}class iC{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new oa((m=>tT(m)),Ph),this.Iu=new Map,this.Eu=new Set,this.du=new ct(ve.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sC(i,e,n=!0){const s=qT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await LT(s,e,n,!0),o}async function aC(i,e){const n=qT(i);await LT(n,e,!0,!1)}async function LT(i,e,n,s){const o=await Rx(i.localStore,vr(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await oC(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&IT(i.remoteStore,o),m}async function oC(i,e,n,s,o){i.pu=(S,w,N)=>(async function(H,B,$,ie){let F=B.view.ru($);F.Cs&&(F=await uv(H.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,F))));const fe=ie&&ie.targetChanges.get(B.targetId),ae=ie&&ie.targetMismatches.get(B.targetId)!=null,W=B.view.applyChanges(F,H.isPrimaryClient,fe,ae);return vv(H,B.targetId,W.au),W.snapshot})(i,S,w,N);const u=await uv(i.localStore,e,!0),f=new tC(e,u.Qs),m=f.ru(u.documents),p=hu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);vv(i,n,g.au);const v=new nC(e,n,f);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function lC(i,e,n){const s=xe(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!Ph(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Vm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&gg(s.remoteStore,o.targetId),Um(s,o.targetId)})).catch(Ao)):(Um(s,o.targetId),await Vm(s.localStore,o.targetId,!0))}async function uC(i,e){const n=xe(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),gg(n.remoteStore,s.targetId))}async function cC(i,e,n){const s=yC(i);try{const o=await(function(f,m){const p=xe(f),g=it.now(),v=m.reduce(((N,k)=>N.add(k.key)),Pe());let S,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let k=fi(),H=Pe();return p.Ns.getEntries(N,v).next((B=>{k=B,k.forEach((($,ie)=>{ie.isValidDocument()||(H=H.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(N,k))).next((B=>{S=B;const $=[];for(const ie of m){const F=S2(ie,S.get(ie.key).overlayedDocument);F!=null&&$.push(new gs(ie.key,F,KE(F.value.mapValue),Yn.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,$,m)})).next((B=>{w=B;const $=B.applyToLocalDocumentSet(S,H);return p.documentOverlayCache.saveOverlays(N,B.batchId,$)}))})).then((()=>({batchId:w.batchId,changes:iT(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let g=f.Vu[f.currentUser.toKey()];g||(g=new ct(Ve)),g=g.insert(m,p),f.Vu[f.currentUser.toKey()]=g})(s,o.batchId,n),await du(s,o.changes),await Hh(s.remoteStore)}catch(o){const u=Eg(o,"Failed to persist write");n.reject(u)}}async function UT(i,e){const n=xe(i);try{const s=await wx(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ke(f.hu,14607):o.removedDocuments.size>0&&(Ke(f.hu,42227),f.hu=!1))})),await du(n,s,e)}catch(s){await Ao(s)}}function _v(i,e,n){const s=xe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=xe(f);p.onlineState=m;let g=!1;p.queries.forEach(((v,S)=>{for(const w of S.Sa)w.va(m)&&(g=!0)})),g&&wg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hC(i,e,n){const s=xe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new ct(ve.comparator);f=f.insert(u,Jt.newNoDocument(u,Re.min()));const m=Pe().add(u),p=new zh(Re.min(),new Map,new ct(Ve),f,m);await UT(s,p),s.du=s.du.remove(u),s.Au.delete(e),Rg(s)}else await Vm(s.localStore,e,!1).then((()=>Um(s,e,n))).catch(Ao)}async function fC(i,e){const n=xe(i),s=e.batch.batchId;try{const o=await bx(n.localStore,e);zT(n,s,null),jT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await du(n,o)}catch(o){await Ao(o)}}async function dC(i,e,n){const s=xe(i);try{const o=await(function(f,m){const p=xe(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((S=>(Ke(S!==null,37113),v=S.keys(),p.mutationQueue.removeMutationBatch(g,S)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(s.localStore,e);zT(s,e,n),jT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await du(s,o)}catch(o){await Ao(o)}}function jT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function zT(i,e,n){const s=xe(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Um(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||BT(i,s)}))}function BT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(gg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Rg(i))}function vv(i,e,n){for(const s of n)s instanceof VT?(i.Ru.addReference(s.key,e),mC(i,s)):s instanceof PT?(he(Sg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||BT(i,s.key)):be(19791,{wu:s})}function mC(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(he(Sg,"New document in limbo: "+n),i.Eu.add(s),Rg(i))}function Rg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ve(rt.fromString(e)),s=i.fu.next();i.Au.set(s,new rC(n)),i.du=i.du.insert(n,s),IT(i.remoteStore,new Ji(vr(Vh(n.path)),s,"TargetPurposeLimboResolution",Oh.ce))}}async function du(i,e,n){const s=xe(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const v=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=dg.As(p.targetId,g);u.push(v)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,g){const v=xe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ne.forEach(g,(w=>ne.forEach(w.Es,(N=>v.persistence.referenceDelegate.addReference(S,w.targetId,N))).next((()=>ne.forEach(w.ds,(N=>v.persistence.referenceDelegate.removeReference(S,w.targetId,N)))))))))}catch(S){if(!So(S))throw S;he(mg,"Failed to update sequence numbers: "+S)}for(const S of g){const w=S.targetId;if(!S.fromCache){const N=v.Ms.get(w),k=N.snapshotVersion,H=N.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(w,H)}}})(s.localStore,u))}async function gC(i,e){const n=xe(i);if(!n.currentUser.isEqual(e)){he(Sg,"User change. New user:",e.toKey());const s=await ST(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ce(ee.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await du(n,s.Ls)}}function pC(i,e){const n=xe(i),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function qT(i){const e=xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=UT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hC.bind(null,e),e.Pu.H_=Jx.bind(null,e.eventManager),e.Pu.yu=eC.bind(null,e.eventManager),e}function yC(i){const e=xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dC.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Tx(this.persistence,new _x,e.initialUser,this.serializer)}Cu(e){return new AT(fg.mi,this.serializer)}Du(e){return new Cx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class _C extends _h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new rx(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new AT((s=>ph.mi(s,n)),this.serializer)}}class jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_v(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gC.bind(null,this.syncEngine),await Xx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Zx})()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),s=(function(u){return new kx(u)})(e.databaseInfo);return(function(u,f,m,p){return new Lx(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new jx(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>_v(this.syncEngine,n,0)),(function(){return fv.v()?new fv:new Ix})())}createSyncEngine(e,n){return(function(o,u,f,m,p,g,v){const S=new iC(o,u,f,m,p,g);return v&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=xe(n);he(ra,"RemoteStore shutting down."),s.Ea.add(5),await fu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jm.provider={build:()=>new jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class vC{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Zt.UNAUTHENTICATED,this.clientId=eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{he(cs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(he(cs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Eg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function fm(i,e){i.asyncQueue.verifyOperationInProgress(),he(cs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await ST(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Ev(i,e){i.asyncQueue.verifyOperationInProgress();const n=await EC(i);he(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>mv(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>mv(e.remoteStore,o))),i._onlineComponents=e}async function EC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(cs,"Using user provided OfflineComponentProvider");try{await fm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await fm(i,new _h)}}else he(cs,"Using default OfflineComponentProvider"),await fm(i,new _C(void 0));return i._offlineComponents}async function HT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(cs,"Using user provided OnlineComponentProvider"),await Ev(i,i._uninitializedComponentsProvider._online)):(he(cs,"Using default OnlineComponentProvider"),await Ev(i,new jm))),i._onlineComponents}function TC(i){return HT(i).then((e=>e.syncEngine))}async function vh(i){const e=await HT(i),n=e.eventManager;return n.onListen=sC.bind(null,e.syncEngine),n.onUnlisten=lC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uC.bind(null,e.syncEngine),n}function bC(i,e,n={}){const s=new li;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const v=new xg({next:w=>{v.Nu(),f.enqueueAndForget((()=>bg(u,S)));const N=w.docs.has(m);!N&&w.fromCache?g.reject(new ce(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&w.fromCache&&p&&p.source==="server"?g.reject(new ce(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),S=new Ag(Vh(m.path),v,{includeMetadataChanges:!0,qa:!0});return Tg(u,S)})(await vh(i),i.asyncQueue,e,n,s))),s.promise}function wC(i,e,n={}){const s=new li;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,g){const v=new xg({next:w=>{v.Nu(),f.enqueueAndForget((()=>bg(u,S))),w.fromCache&&p.source==="server"?g.reject(new ce(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),S=new Ag(m,v,{includeMetadataChanges:!0,qa:!0});return Tg(u,S)})(await vh(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firestore.googleapis.com",bv=!0;class wv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GT,this.ssl=bv}else this.host=e.host,this.ssl=e.ssl??bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tx)throw new ce(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new IR;switch(s.type){case"firstParty":return new kR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Tv.get(n);s&&(he("ComponentProvider","Removing Datastore"),Tv.delete(n),s.terminate())})(this),Promise.resolve()}}function AC(i,e,n,s={}){i=zn(i,Fh);const o=To(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(EE(`https://${m}`),TE("Firestore",!0)),u.host!==GT&&u.host!==m&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ea(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=Zt.MOCK_USER;else{g=n1(s.mockUserToken,i._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ce(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Zt(S)}i._authCredentials=new NR(new VE(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class yt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(lu(n,yt._jsonSchema))return new yt(e,s||null,new ve(rt.fromString(n.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:St("string",yt._jsonSchemaVersion),referencePath:St("string")};class is extends ua{constructor(e,n,s){super(e,n,Vh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new ve(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function Sr(i,e,...n){if(i=jt(i),PE("collection","path",e),i instanceof Fh){const s=rt.fromString(e,...n);return P0(s),new is(i,null,s)}{if(!(i instanceof yt||i instanceof is))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...n));return P0(s),new is(i.firestore,null,s)}}function Kt(i,e,...n){if(i=jt(i),arguments.length===1&&(e=eg.newId()),PE("doc","path",e),i instanceof Fh){const s=rt.fromString(e,...n);return V0(s),new yt(i,null,new ve(s))}{if(!(i instanceof yt||i instanceof is))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(rt.fromString(e,...n));return V0(s),new yt(i.firestore,i instanceof is?i.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="AsyncQueue";class Sv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xT(this,"async_queue_retry"),this._c=()=>{const s=hm();s&&he(Av,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new li;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!So(e))throw e;he(Av,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",Rv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=vg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:Rv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Rv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class hs extends Fh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Sv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sv(e),this._firestoreClient=void 0,await e}}}function SC(i,e){const n=typeof i=="object"?i:SE(),s=typeof i=="string"?i:uh,o=Zm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=e1("firestore");u&&AC(o,...u)}return o}function Gh(i){if(i._terminated)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||RC(i),i._firestoreClient}function RC(i){const e=i._freezeSettings(),n=(function(o,u,f,m){return new XR(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,FT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new vC(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Yt.fromBase64String(e))}catch(n){throw new ce(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:St("string",jn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(lu(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:St("string",Tr._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new br(e.vectorValues);throw new ce(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}br._jsonSchemaVersion="firestore/vectorValue/1.0",br._jsonSchema={type:St("string",br._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^__.*__$/;class CC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new cu(e,this.data,n,this.fieldTransforms)}}class QT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class Ig{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KT(this.Ac)&&xC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class IC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Bh(e)}Cc(e,n,s,o=!1){return new Ig({Ac:e,methodName:n,Dc:s,path:Qt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ng(i){const e=i._freezeSettings(),n=Bh(i._databaseId);return new IC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function NC(i,e,n,s,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);Dg("Data must be an object, but it was:",f,s);const m=YT(s,f);let p,g;if(u.merge)p=new wn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const v=[];for(const S of u.mergeFields){const w=zm(e,S,n);if(!f.contains(w))throw new ce(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);XT(v,w)||v.push(w)}p=new wn(v),g=f.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,g=f.fieldTransforms;return new CC(new fn(m),p,g)}class Kh extends Cg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function DC(i,e,n,s){const o=i.Cc(1,e,n);Dg("Data must be an object, but it was:",o,s);const u=[],f=fn.empty();ms(s,((p,g)=>{const v=Og(e,p,n);g=jt(g);const S=o.yc(v);if(g instanceof Kh)u.push(v);else{const w=mu(g,S);w!=null&&(u.push(v),f.set(v,w))}}));const m=new wn(u);return new QT(f,m,o.fieldTransforms)}function OC(i,e,n,s,o,u){const f=i.Cc(1,e,n),m=[zm(e,s,n)],p=[o];if(u.length%2!=0)throw new ce(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(zm(e,u[w])),p.push(u[w+1]);const g=[],v=fn.empty();for(let w=m.length-1;w>=0;--w)if(!XT(g,m[w])){const N=m[w];let k=p[w];k=jt(k);const H=f.yc(N);if(k instanceof Kh)g.push(N);else{const B=mu(k,H);B!=null&&(g.push(N),v.set(N,B))}}const S=new wn(g);return new QT(v,S,f.fieldTransforms)}function kC(i,e,n,s=!1){return mu(n,i.Cc(s?4:3,e))}function mu(i,e){if($T(i=jt(i)))return Dg("Unsupported field value:",e,i),YT(i,e);if(i instanceof Cg)return(function(s,o){if(!KT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=mu(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return v2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=it.fromDate(s);return{timestampValue:gh(o.serializer,u)}}if(s instanceof it){const u=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gh(o.serializer,u)}}if(s instanceof Tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof jn)return{bytesValue:pT(o.serializer,s._byteString)};if(s instanceof yt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof br)return(function(f,m){return{mapValue:{fields:{[GE]:{stringValue:QE},[ch]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return ag(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Dh(s)}`)})(i,e)}function YT(i,e){const n={};return jE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(i,((s,o)=>{const u=mu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function $T(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof it||i instanceof Tr||i instanceof jn||i instanceof yt||i instanceof Cg||i instanceof br)}function Dg(i,e,n){if(!$T(n)||!LE(n)){const s=Dh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function zm(i,e,n){if((e=jt(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return Og(i,e);throw Eh("Field path arguments must be of type string or ",i,!1,void 0,n)}const MC=new RegExp("[~\\*/\\[\\]]");function Og(i,e,n){if(e.search(MC)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Qh(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Eh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ce(ee.INVALID_ARGUMENT,m+i+p)}function XT(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ZT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VC extends WT{data(){return super.data()}}function ZT(i,e){return typeof e=="string"?Og(i,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class PC extends kg{}function LC(i,e,...n){let s=[];e instanceof kg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof Vg)).length,m=u.filter((p=>p instanceof Mg)).length;if(f>1||f>0&&m>0)throw new ce(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Mg extends PC{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Mg(e,n,s)}_apply(e){const n=this._parse(e);return eb(e._query,n),new ua(e.firestore,e.converter,Im(e._query,n))}_parse(e){const n=Ng(e.firestore);return(function(u,f,m,p,g,v,S){let w;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Iv(S,v);const k=[];for(const H of S)k.push(Cv(p,u,H));w={arrayValue:{values:k}}}else w=Cv(p,u,S)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Iv(S,v),w=kC(m,f,S,v==="in"||v==="not-in");return At.create(g,v,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vg extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)eb(f,p),f=Im(f,p)})(e._query,n),new ua(e.firestore,e.converter,Im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Cv(i,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new ce(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eT(e)&&n.indexOf("/")!==-1)throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(rt.fromString(n));if(!ve.isDocumentKey(s))throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return F0(i,new ve(s))}if(n instanceof yt)return F0(i,n._key);throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function Iv(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eb(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UC{convertValue(e,n="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ms(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[ch].arrayValue?.values?.map((s=>pt(s.doubleValue)));return new br(n)}convertGeoPoint(e){return new Tr(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Mh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const n=as(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=rt.fromString(e);Ke(bT(s),9688,{name:e});const o=new Zl(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||hi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends WT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ZT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:St("string",Ws._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class Jc extends Ws{data(e={}){return super.data(e)}}class Zs{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Jc(this._firestore,this._userDataWriter,s.key,s,new Bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new Jc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Jc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Bl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:zC(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(i){i=zn(i,yt);const e=zn(i.firestore,hs);return bC(Gh(e),i._key).then((n=>nb(e,i,n)))}Zs._jsonSchemaVersion="firestore/querySnapshot/1.0",Zs._jsonSchema={type:St("string",Zs._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class Pg extends UC{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function tb(i){i=zn(i,ua);const e=zn(i.firestore,hs),n=Gh(e),s=new Pg(e);return JT(i._query),wC(n,i._query).then((o=>new Zs(e,s,i,o)))}function ia(i,e,n,...s){i=zn(i,yt);const o=zn(i.firestore,hs),u=Ng(o);let f;return f=typeof(e=jt(e))=="string"||e instanceof Qh?OC(u,"updateDoc",i._key,e,n,s):DC(u,"updateDoc",i._key,e),Lg(o,[f.toMutation(i._key,Yn.exists(!0))])}function fs(i){return Lg(zn(i.firestore,hs),[new og(i._key,Yn.none())])}function ca(i,e){const n=zn(i.firestore,hs),s=Kt(i),o=jC(i.converter,e);return Lg(n,[NC(Ng(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Yn.exists(!1))]).then((()=>s))}function qC(i,...e){i=jt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||xv(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xv(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,f,m;if(i instanceof yt)f=zn(i.firestore,hs),m=Vh(i._key.path),u={next:p=>{e[s]&&e[s](nb(f,i,p))},error:e[s+1],complete:e[s+2]};else{const p=zn(i,ua);f=zn(p.firestore,hs),m=p._query;const g=new Pg(f);u={next:v=>{e[s]&&e[s](new Zs(f,g,p,v))},error:e[s+1],complete:e[s+2]},JT(i._query)}return(function(g,v,S,w){const N=new xg(w),k=new Ag(v,N,S);return g.asyncQueue.enqueueAndForget((async()=>Tg(await vh(g),k))),()=>{N.Nu(),g.asyncQueue.enqueueAndForget((async()=>bg(await vh(g),k)))}})(Gh(f),m,o,u)}function Lg(i,e){return(function(s,o){const u=new li;return s.asyncQueue.enqueueAndForget((async()=>cC(await TC(s),o,u))),u.promise})(Gh(i),e)}function nb(i,e,n){const s=n.docs.get(e._key),o=new Pg(i);return new Ws(i,o,e._key,s,new Bl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){wo=o})(bo),ho(new ta("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new hs(new DR(s.getProvider("auth-internal")),new MR(f,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(g.options.projectId,v)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ns(D0,O0,e),ns(D0,O0,"esm2020")})();const xo=(i,e)=>{const[n,s]=Y.useState([]);return Y.useEffect(()=>{if(!i)return;const o=Sr(i,e),u=qC(o,f=>{s(f.docs.map(m=>({id:m.id,...m.data()})))});return()=>u()},[i,e]),n};var HC="firebase",FC="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(HC,FC,"app");function rb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GC=rb,ib=new au("auth","Firebase",rb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Xm("@firebase/auth");function QC(i,...e){Th.logLevel<=Me.WARN&&Th.warn(`Auth (${bo}): ${i}`,...e)}function eh(i,...e){Th.logLevel<=Me.ERROR&&Th.error(`Auth (${bo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(i,...e){throw jg(i,...e)}function $n(i,...e){return jg(i,...e)}function Ug(i,e,n){const s={...GC(),[e]:n};return new au("auth","Firebase",s).create(e,{appName:i.name})}function Js(i){return Ug(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KC(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Rr(i,"argument-error"),Ug(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return ib.create(i,...e)}function Se(i,e,...n){if(!i)throw jg(e,...n)}function si(i){const e="INTERNAL ASSERTION FAILED: "+i;throw eh(e),new Error(e)}function di(i,e){i||si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return typeof self<"u"&&self.location?.href||""}function YC(){return Nv()==="http:"||Nv()==="https:"}function Nv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YC()||l1()||"connection"in navigator)?navigator.onLine:!0}function XC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=s1()||u1()}get(){return $C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(i,e){di(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JC=new gu(3e4,6e4);function Bg(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Co(i,e,n,s,o={}){return ab(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=ou({key:i.config.apiKey,...f}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:p,...u};return o1()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&To(i.emulatorConfig.host)&&(g.credentials="include"),sb.fetch()(await ob(i,i.config.apiHost,n,m),g)})}async function ab(i,e,n){i._canInitEmulator=!1;const s={...WC,...e};try{const o=new tI(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Gc(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gc(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Gc(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw Gc(i,"user-disabled",f);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ug(i,v,g);Rr(i,v)}}catch(o){if(o instanceof gi)throw o;Rr(i,"network-request-failed",{message:String(o)})}}async function eI(i,e,n,s,o={}){const u=await Co(i,e,n,s,o);return"mfaPendingCredential"in u&&Rr(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function ob(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?zg(i.config,o):`${i.config.apiScheme}://${o}`;return ZC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class tI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s($n(this.auth,"network-request-failed")),JC.get())})}}function Gc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=$n(i,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(i,e){return Co(i,"POST","/v1/accounts:delete",e)}async function bh(i,e){return Co(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rI(i,e=!1){const n=jt(i),s=await n.getIdToken(e),o=qg(s);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Kl(dm(o.auth_time)),issuedAtTime:Kl(dm(o.iat)),expirationTime:Kl(dm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function dm(i){return Number(i)*1e3}function qg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=pE(n);return o?JSON.parse(o):(eh("Failed to decode base64 JWT payload"),null)}catch(o){return eh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Dv(i){const e=qg(i);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gi&&iI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function iI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(i){const e=i.auth,n=await i.getIdToken(),s=await nu(i,bh(e,{idToken:n}));Se(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?lb(o.providerUserInfo):[],f=oI(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!f?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,v)}async function aI(i){const e=jt(i);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oI(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function lb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(i,e){const n=await ab(i,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await ob(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&To(i.emulatorConfig.host)&&(p.credentials="include"),sb.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uI(i,e){return Co(i,"POST","/v2/accounts:revokeToken",Bg(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=Dv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await lI(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new lo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(i,e){Se(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Kn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new sI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rI(this,e)}reload(){return aI(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await wh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await nu(this,nI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:N,providerData:k,stsTokenManager:H}=n;Se(S&&H,e,"internal-error");const B=lo.fromJSON(this.name,H);Se(typeof S=="string",e,"internal-error"),Yi(s,e.name),Yi(o,e.name),Se(typeof w=="boolean",e,"internal-error"),Se(typeof N=="boolean",e,"internal-error"),Yi(u,e.name),Yi(f,e.name),Yi(m,e.name),Yi(p,e.name),Yi(g,e.name),Yi(v,e.name);const $=new Kn({uid:S,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:N,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:B,createdAt:g,lastLoginAt:v});return k&&Array.isArray(k)&&($.providerData=k.map(ie=>({...ie}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,n,s=!1){const o=new lo;o.updateFromServerResponse(n);const u=new Kn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await wh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?lb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new lo;m.updateFromIdToken(s);const p=new Kn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;function ai(i){di(i instanceof Function,"Expected a class definition");let e=Ov.get(i);return e?(di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Ov.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ub.type="NONE";const kv=ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(i,e,n){return`firebase:${i}:${e}:${n}`}class uo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=th(this.userKey,o.apiKey,u),this.fullPersistenceKey=th("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bh(this.auth,{idToken:e}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new uo(ai(kv),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||ai(kv);const f=th(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const v=await g._get(f);if(v){let S;if(typeof v=="string"){const w=await bh(e,{idToken:v}).catch(()=>{});if(!w)break;S=await Kn._fromGetAccountInfoResponse(e,w,v)}else S=Kn._fromJSON(e,v);g!==u&&(m=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new uo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new uo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(db(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gb(e))return"Blackberry";if(pb(e))return"Webos";if(hb(e))return"Safari";if((e.includes("chrome/")||fb(e))&&!e.includes("edge/"))return"Chrome";if(mb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function cb(i=en()){return/firefox\//i.test(i)}function hb(i=en()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fb(i=en()){return/crios\//i.test(i)}function db(i=en()){return/iemobile/i.test(i)}function mb(i=en()){return/android/i.test(i)}function gb(i=en()){return/blackberry/i.test(i)}function pb(i=en()){return/webos/i.test(i)}function Hg(i=en()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function cI(i=en()){return Hg(i)&&!!window.navigator?.standalone}function hI(){return c1()&&document.documentMode===10}function yb(i=en()){return Hg(i)||mb(i)||pb(i)||gb(i)||/windows phone/i.test(i)||db(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(i,e=[]){let n;switch(i){case"Browser":n=Mv(en());break;case"Worker":n=`${Mv(en())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(i,e={}){return Co(i,"GET","/v2/passwordPolicy",Bg(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=6;class gI{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vv(this),this.idTokenSubscription=new Vv(this),this.beforeStateQueue=new fI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ai(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await uo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bh(this,{idToken:e}),s=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Js(this));const n=e?jt(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dI(this),n=new gI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await uI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ai(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_b(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&QC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yh(i){return jt(i)}class Vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_1(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yI(i){Fg=i}function _I(i){return Fg.loadJS(i)}function vI(){return Fg.gapiScript}function EI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(i,e){const n=Zm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ea(u,e??{}))return o;Rr(o,"already-initialized")}return n.initialize({options:e})}function bI(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ai);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function wI(i,e,n){const s=Yh(i);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=vb(e),{host:f,port:m}=AI(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},v=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(ea(g,s.config.emulator)&&ea(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,To(f)?(EE(`${u}//${f}${p}`),TE("Auth",!0)):SI()}function vb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function AI(i){const e=vb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Pv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Pv(f)}}}function Pv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function SI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,n){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(i,e){return eI(i,"POST","/v1/accounts:signInWithIdp",Bg(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="http://localhost";class sa extends Eb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new sa(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,co(e,n)}buildRequest(){const e={requestUri:RI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends pu{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sa._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ii.credential(n,s)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends pu{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends pu{constructor(){super("twitter.com")}static credential(e,n){return sa._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zi.credential(n,s)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Kn._fromIdTokenResponse(e,s,o),f=Lv(s);return new vo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Lv(s);return new vo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Lv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends gi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Ah(e,n,s,o)}}function Tb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(i,u,e,s):u})}async function xI(i,e,n=!1){const s=await nu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return vo._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(i,e,n=!1){const{auth:s}=i;if(Qn(s.app))return Promise.reject(Js(s));const o="reauthenticate";try{const u=await nu(i,Tb(s,o,e,i),n);Se(u.idToken,s,"internal-error");const f=qg(u.idToken);Se(f,s,"internal-error");const{sub:m}=f;return Se(i.uid===m,s,"user-mismatch"),vo._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Rr(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(i,e,n=!1){if(Qn(i.app))return Promise.reject(Js(i));const s="signIn",o=await Tb(i,s,e),u=await vo._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}function NI(i,e,n,s){return jt(i).onIdTokenChanged(e,n,s)}function DI(i,e,n){return jt(i).beforeAuthStateChanged(e,n)}function OI(i,e,n,s){return jt(i).onAuthStateChanged(e,n,s)}function kI(i){return jt(i).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=1e3,VI=10;class wb extends bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);hI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,VI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},MI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wb.type="LOCAL";const PI=wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab extends bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ab.type="SESSION";const Sb=Ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new $h(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await LI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Qg("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function jI(i){wr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function zI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BI(){return navigator?.serviceWorker?.controller||null}function qI(){return Rb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebaseLocalStorageDb",HI=1,Rh="firebaseLocalStorage",Cb="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(i,e){return i.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function FI(){const i=indexedDB.deleteDatabase(xb);return new yu(i).toPromise()}function Hm(){const i=indexedDB.open(xb,HI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Rh,{keyPath:Cb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Rh)?e(s):(s.close(),await FI(),e(await Hm()))})})}async function Uv(i,e,n){const s=Xh(i,!0).put({[Cb]:e,value:n});return new yu(s).toPromise()}async function GI(i,e){const n=Xh(i,!1).get(e),s=await new yu(n).toPromise();return s===void 0?null:s.value}function jv(i,e){const n=Xh(i,!0).delete(e);return new yu(n).toPromise()}const QI=800,KI=3;class Ib{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>KI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(qI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zI(),!this.activeServiceWorker)return;this.sender=new UI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await Uv(e,Sh,"1"),await jv(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Uv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>GI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Xh(o,!1).getAll();return new yu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ib.type="LOCAL";const YI=Ib;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(i,e){return e?ai(e):(Se(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends Eb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $I(i){return II(i.auth,new Kg(i),i.bypassAuthState)}function XI(i){const{auth:e,user:n}=i;return Se(n,e,"internal-error"),CI(n,new Kg(i),i.bypassAuthState)}async function WI(i){const{auth:e,user:n}=i;return Se(n,e,"internal-error"),xI(n,new Kg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $I;case"linkViaPopup":case"linkViaRedirect":return WI;case"reauthViaPopup":case"reauthViaRedirect":return XI;default:Rr(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new gu(2e3,1e4);async function JI(i,e,n){if(Qn(i.app))return Promise.reject($n(i,"operation-not-supported-in-this-environment"));const s=Yh(i);KC(i,e,Gg);const o=Nb(s,n);return new Xs(s,"signInViaPopup",e,o).executeNotNull()}class Xs extends Db{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZI.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="pendingRedirect",nh=new Map;class tN extends Db{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const s=await nN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nN(i,e){const n=sN(e),s=iN(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function rN(i,e){nh.set(i._key(),e)}function iN(i){return ai(i._redirectPersistence)}function sN(i){return th(eN,i.config.apiKey,i.name)}async function aN(i,e,n=!1){if(Qn(i.app))return Promise.reject(Js(i));const s=Yh(i),o=Nb(s,e),f=await new tN(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=600*1e3;class lN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ob(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError($n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oN&&this.cachedEventUids.clear(),this.cachedEventUids.has(zv(e))}saveEventToCache(e){this.cachedEventUids.add(zv(e)),this.lastProcessedEventTime=Date.now()}}function zv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Ob({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function uN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ob(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(i,e={}){return Co(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fN=/^https?/;async function dN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await cN(i);for(const n of e)try{if(mN(n))return}catch{}Rr(i,"unauthorized-domain")}function mN(i){const e=Bm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!fN.test(n))return!1;if(hN.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new gu(3e4,6e4);function Bv(){const i=wr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function pN(i){return new Promise((e,n)=>{function s(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n($n(i,"network-request-failed"))},timeout:gN.get()})}if(wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wr().gapi?.load)s();else{const o=EI("iframefcb");return wr()[o]=()=>{gapi.load?s():n($n(i,"network-request-failed"))},_I(`${vI()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw rh=null,e})}let rh=null;function yN(i){return rh=rh||pN(i),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new gu(5e3,15e3),vN="__/auth/iframe",EN="emulator/auth/iframe",TN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wN(i){const e=i.config;Se(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?zg(e,EN):`https://${i.config.authDomain}/${vN}`,s={apiKey:e.apiKey,appName:i.name,v:bo},o=bN.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ou(s).slice(1)}`}async function AN(i){const e=await yN(i),n=wr().gapi;return Se(n,i,"internal-error"),e.open({where:document.body,url:wN(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=$n(i,"network-request-failed"),m=wr().setTimeout(()=>{u(f)},_N.get());function p(){wr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RN=500,xN=600,CN="_blank",IN="http://localhost";class qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NN(i,e,n,s=RN,o=xN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...SN,width:s.toString(),height:o.toString(),top:u,left:f},g=en().toLowerCase();n&&(m=fb(g)?CN:n),cb(g)&&(e=e||IN,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[N,k])=>`${w}${N}=${k},`,"");if(cI(g)&&m!=="_self")return DN(e||"",m),new qv(null);const S=window.open(e||"",m,v);Se(S,i,"popup-blocked");try{S.focus()}catch{}return new qv(S)}function DN(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="__/auth/handler",kN="emulator/auth/handler",MN=encodeURIComponent("fac");async function Hv(i,e,n,s,o,u){Se(i.config.authDomain,i,"auth-domain-config-required"),Se(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:bo,eventId:o};if(e instanceof Gg){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",y1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,S]of Object.entries({}))f[v]=S}if(e instanceof pu){const v=e.getScopes().filter(S=>S!=="");v.length>0&&(f.scopes=v.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),g=p?`#${MN}=${encodeURIComponent(p)}`:"";return`${VN(i)}?${ou(m).slice(1)}${g}`}function VN({config:i}){return i.emulator?zg(i,kN):`https://${i.authDomain}/${ON}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class PN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sb,this._completeRedirectFn=aN,this._overrideRedirectResult=rN}async _openPopup(e,n,s,o){di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Hv(e,n,s,Bm(),o);return NN(e,u,Qg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Hv(e,n,s,Bm(),o);return jI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(di(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await AN(e),s=new lN(e);return n.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mm,{type:mm},o=>{const u=o?.[0]?.[mm];u!==void 0&&n(!!u),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yb()||hb()||Hg()}}const LN=PN;var Fv="@firebase/auth",Gv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zN(i){ho(new ta("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Se(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_b(i)},g=new pI(s,o,u,p);return bI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ho(new ta("auth-internal",e=>{const n=Yh(e.getProvider("auth").getImmediate());return(s=>new UN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(Fv,Gv,jN(i)),ns(Fv,Gv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=300,qN=vE("authIdTokenMaxAge")||BN;let Qv=null;const HN=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>qN)return;const o=n?.token;Qv!==o&&(Qv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function FN(i=SE()){const e=Zm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=TI(i,{popupRedirectResolver:LN,persistence:[YI,PI,Sb]}),s=vE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=HN(u.toString());DI(n,f,()=>f(n.currentUser)),NI(n,m=>f(m))}}const o=yE("auth");return o&&wI(n,`http://${o}`),n}function GN(){return document.getElementsByTagName("head")?.[0]??document}yI({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=$n("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",GN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zN("Browser");const QN={apiKey:"AIzaSyAX5XiS3zpIz4M7njDU-CqqjCHYV43pusI",authDomain:"roommate-hub-app.firebaseapp.com",projectId:"roommate-hub-app",storageBucket:"roommate-hub-app.firebasestorage.app",messagingSenderId:"612853436025",appId:"1:612853436025:web:9d9b03665a23a7ad6b8ea8",measurementId:"G-PFE8FNWQJD"},kb=AE(QN),Ge=SC(kb),ih=FN(kb),KN=new ii,Mb=()=>{const i=xo(Ge,"fridgeInventory"),[e,n]=Y.useState({name:"",owner:["Shared"],type:"Fridge",packedOn:"",expires:""}),[s,o]=Y.useState({owner:["All"],type:["All"],status:"All"}),u=async()=>{if(e.name.trim())try{await ca(Sr(Ge,"fridgeInventory"),e),n({name:"",owner:["Shared"],type:"Fridge",packedOn:"",expires:""})}catch(w){console.error("Error adding fridge item:",w)}},f=async w=>{try{await ia(Kt(Ge,"fridgeInventory",w.id),w)}catch(N){console.error("Error updating fridge item:",N)}},m=async w=>{try{await fs(Kt(Ge,"fridgeInventory",w))}catch(N){console.error("Error deleting fridge item:",N)}},p=w=>{n(N=>{const k=N.owner.includes(w)?N.owner.filter(H=>H!==w):[...N.owner,w];return{...N,owner:k.length?k:["Shared"]}})},g=w=>{o(N=>({...N,owner:w==="All"?["All"]:N.owner.includes(w)?N.owner.filter(k=>k!==w):[...N.owner.filter(k=>k!=="All"),w]}))},v=w=>{o(N=>({...N,type:w==="All"?["All"]:N.type.includes(w)?N.type.filter(k=>k!==w):[...N.type.filter(k=>k!=="All"),w]}))},S=i.filter(w=>{const N=s.owner.includes("All")||w.owner&&w.owner.some(ie=>s.owner.includes(ie)),k=s.type.includes("All")||s.type.includes(w.type),H=new Date,B=w.expires?new Date(w.expires):null;let $=!0;return s.status==="Expired"?$=B?B<H:!1:s.status==="NearExpired"?$=B&&(B-H)/(1e3*60*60*24)<=5&&B>H:s.status==="All"&&($=!0),N&&k&&$});return{fridgeInventory:i,filteredFridgeInventory:S,newFridgeItem:e,setNewFridgeItem:n,addFridgeItem:u,updateFridgeItem:f,deleteFridgeItem:m,toggleFridgeOwner:p,fridgeFilter:s,toggleFilterOwner:g,toggleFilterType:v,setFridgeFilter:o}},YN=({roommates:i})=>{const{fridgeInventory:e,filteredFridgeInventory:n,newFridgeItem:s,setNewFridgeItem:o,addFridgeItem:u,updateFridgeItem:f,deleteFridgeItem:m,toggleFridgeOwner:p,fridgeFilter:g,toggleFilterOwner:v,toggleFilterType:S,setFridgeFilter:w}=Mb(),[N,k]=Y.useState(null),H=["Fridge","Freezer","Pantry","Personal","Spices"],B=W=>{if(!W)return!1;const C=new Date;return new Date(W)<C},$=W=>{if(!W)return!1;const C=new Date,I=(new Date(W)-C)/(1e3*60*60*24);return I>0&&I<=5},ie=e.filter(W=>$(W.expires)),F=W=>{w(C=>({...C,status:W}))},fe=(W,C,R)=>!W||!C&&!R?"":new Date(new Date(W).getTime()+(C||0)*7*24*60*60*1e3+(R||0)*24*60*60*1e3).toISOString().split("T")[0],ae=()=>{if(!n.length)return;const W="data:text/csv;charset=utf-8,"+["Ingredient"].concat(n.map(I=>I.name)).join(`
`),C=encodeURI(W),R=document.createElement("a");R.setAttribute("href",C),R.setAttribute("download","fridge_inventory.csv"),document.body.appendChild(R),R.click(),document.body.removeChild(R)};return b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg",children:[ie.length>0&&b.jsxs("div",{className:"mb-4 p-3 bg-yellow-200 dark:bg-yellow-800 text-yellow-900 dark:text-yellow-100 rounded-lg",children:["⚠️ Heads up! ",ie.length," item",ie.length>1?"s are":" is"," about to expire in 5 days."]}),b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Current Inventory"}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg mb-6",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:N?"Edit Item":"Add a New Item"}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("input",{type:"text",placeholder:"Item Name",className:"w-full p-3 rounded-lg border bg-white dark:bg-gray-900",value:N?N.name:s.name,onChange:W=>N?k({...N,name:W.target.value}):o({...s,name:W.target.value})}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("span",{className:"font-medium text-sm",children:"Who owns it?"}),b.jsx("button",{onClick:()=>N?k({...N,owner:N.owner.includes("Shared")?N.owner.filter(W=>W!=="Shared"):[...N.owner,"Shared"]}):p("Shared"),className:`py-2 px-4 rounded-full text-sm ${(N?N.owner.includes("Shared"):s.owner.includes("Shared"))?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"Shared"}),i.map(W=>b.jsx("button",{onClick:()=>N?k({...N,owner:N.owner.includes(W.name)?N.owner.filter(C=>C!==W.name):[...N.owner,W.name]}):p(W.name),className:`py-2 px-4 rounded-full text-sm ${(N?N.owner.includes(W.name):s.owner.includes(W.name))?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:W.name},W.id))]}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsx("span",{className:"font-medium text-sm",children:"Type:"}),H.map(W=>b.jsx("button",{onClick:()=>N?k({...N,type:W}):o({...s,type:W}),className:`py-2 px-4 rounded-full text-sm ${(N?N.type:s.type)===W?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:W},W))]}),b.jsx("label",{className:"text-sm font-medium",children:"Packed On:"}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"date",className:"w-full p-3 rounded-lg border bg-white dark:bg-gray-900",value:N?N.packedOn||"":s.packedOn||"",onChange:W=>{const C=W.target.value;N?k(R=>({...R,packedOn:C,expires:fe(C,R.shelfLifeWeeks,R.shelfLifeDays),shelfLifeWeeks:C?R.shelfLifeWeeks??null:null,shelfLifeDays:C?R.shelfLifeDays??null:null})):o(R=>({...R,packedOn:C,expires:fe(C,R.shelfLifeWeeks,R.shelfLifeDays),shelfLifeWeeks:C?R.shelfLifeWeeks??null:null,shelfLifeDays:C?R.shelfLifeDays??null:null}))}}),(N?N.packedOn:s.packedOn)&&b.jsx("button",{type:"button",onClick:()=>{N?k({...N,packedOn:"",expires:"",shelfLifeWeeks:"",shelfLifeDays:""}):o({...s,packedOn:"",expires:"",shelfLifeWeeks:"",shelfLifeDays:""})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:"✕"})]}),(N?.packedOn||s.packedOn)&&b.jsxs(b.Fragment,{children:[b.jsx("label",{className:"text-sm font-medium",children:"Expires in (weeks):"}),b.jsx("input",{type:"number",min:"0",placeholder:"Optional",className:"w-full p-3 rounded-lg border bg-white dark:bg-gray-900",value:N?N.shelfLifeWeeks||"":s.shelfLifeWeeks||"",onChange:W=>{const C=W.target.value===""?null:Number(W.target.value);N?k(R=>({...R,shelfLifeWeeks:C,expires:fe(R.packedOn,C,R.shelfLifeDays)})):o(R=>({...R,shelfLifeWeeks:C,expires:fe(R.packedOn,C,R.shelfLifeDays)}))}}),b.jsx("label",{className:"text-sm font-medium",children:"Expires in (days):"}),b.jsx("input",{type:"number",min:"0",placeholder:"Optional",className:"w-full p-3 rounded-lg border bg-white dark:bg-gray-900",value:N?N.shelfLifeDays||"":s.shelfLifeDays||"",onChange:W=>{const C=W.target.value===""?null:Number(W.target.value);N?k(R=>({...R,shelfLifeDays:C,expires:fe(R.packedOn,R.shelfLifeWeeks,C)})):o(R=>({...R,shelfLifeDays:C,expires:fe(R.packedOn,R.shelfLifeWeeks,C)}))}})]}),b.jsx("label",{className:"text-sm font-medium",children:"Expires:"}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"date",className:"w-full p-3 rounded-lg border bg-white dark:bg-gray-900",value:N?N.expires||"":s.expires||"",onChange:W=>N?k({...N,expires:W.target.value}):o({...s,expires:W.target.value})}),(N?N.expires:s.expires)&&b.jsx("button",{type:"button",onClick:()=>N?k({...N,expires:""}):o({...s,expires:""}),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:"✕"})]}),(N?N.packedOn:s.packedOn)&&(N?N.expires:s.expires)&&b.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-300",children:["Expires in"," ",Math.ceil((new Date(N?N.expires:s.expires)-new Date(N?N.packedOn:s.packedOn))/(1e3*60*60*24*7))," ","week",Math.ceil((new Date(N?N.expires:s.expires)-new Date(N?N.packedOn:s.packedOn))/(1e3*60*60*24*7))>1?"s":""]})]}),b.jsx("button",{onClick:()=>{const W=N||s;if(!W.name.trim()){alert("Please enter a name!");return}if(!W.owner||W.owner.length===0){alert("Please select an owner!");return}if(!W.type){alert("Please select a type!");return}const C={...W};C.expires=fe(C.packedOn,C.shelfLifeWeeks,C.shelfLifeDays),Object.keys(C).forEach(R=>{C[R]===void 0&&delete C[R]}),N?(f(C),k(null)):u(C)},className:"mt-4 w-full bg-purple-600 text-white p-3 rounded-lg",children:N?"Save Changes":"Add to Fridge"})]}),b.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[b.jsx("span",{className:"font-medium text-sm",children:"Filter by Owner:"}),b.jsx("button",{onClick:()=>v("All"),className:`py-1 px-3 rounded-full text-xs font-medium transition-colors ${g.owner.includes("All")?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"All"}),b.jsx("button",{onClick:()=>v("Shared"),className:`py-1 px-3 rounded-full text-xs font-medium transition-colors ${g.owner.includes("Shared")?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Shared"}),i.map(W=>b.jsx("button",{onClick:()=>v(W.name),className:`py-1 px-3 rounded-full text-xs font-medium transition-colors ${g.owner.includes(W.name)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:W.name},W.id))]}),b.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[b.jsx("span",{className:"font-medium text-sm",children:"Filter by Type:"}),H.map(W=>b.jsx("button",{onClick:()=>S(W),className:`py-1 px-3 rounded-full text-xs font-medium transition-colors ${g.type.includes(W)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:W},W)),b.jsx("button",{onClick:()=>S("All"),className:`py-1 px-3 rounded-full text-xs font-medium transition-colors ${g.type.includes("All")?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"All"})]}),b.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[b.jsx("span",{className:"font-medium text-sm",children:"Filter by Status:"}),b.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[b.jsx("input",{type:"radio",checked:g.status==="All",onChange:()=>F("All")}),"All"]}),b.jsxs("label",{className:"flex items-center gap-1 text-xs text-yellow-600",children:[b.jsx("input",{type:"radio",checked:g.status==="NearExpired",onChange:()=>F("NearExpired")}),"Near Expired"]}),b.jsxs("label",{className:"flex items-center gap-1 text-xs text-red-600",children:[b.jsx("input",{type:"radio",checked:g.status==="Expired",onChange:()=>F("Expired")}),"Expired"]})]}),b.jsx("button",{onClick:ae,className:"mb-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Download Filtered CSV"}),b.jsxs("ul",{className:"space-y-3",children:[n.map(W=>b.jsxs("li",{className:`p-3 rounded-lg ${B(W.expires)?"bg-red-100 dark:bg-red-900":$(W.expires)?"bg-yellow-100 dark:bg-yellow-900":"bg-gray-100 dark:bg-gray-800"}`,children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("div",{className:"font-bold text-lg",children:W.name}),b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:(W.owner||["Shared"]).join(", ")}),b.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:W.type}),b.jsx("button",{onClick:()=>k(W),className:"p-1 rounded-full bg-blue-200 hover:bg-blue-300",children:b.jsx(dE,{className:"w-4 h-4 text-blue-600"})}),b.jsx("button",{onClick:()=>m(W.id),className:"p-1 rounded-full bg-red-200 hover:bg-red-300",children:b.jsx(Ih,{className:"w-4 h-4 text-red-600"})})]})]}),W.packedOn&&b.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Packed On: ",new Date(W.packedOn).toLocaleDateString()]}),W.expires&&b.jsxs("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:["Expires in"," ",Math.ceil((new Date(W.expires)-new Date)/(1e3*60*60*24))," ","days"]}),W.expires&&b.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Expiration Date: ",new Date(W.expires).toLocaleDateString()]})]},W.id)),n.length===0&&b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No items found."})]})]})},$N=({payments:i,expenses:e,newPayment:n,setNewPayment:s,addPayment:o,deletePayment:u,updatePayment:f,roommates:m})=>{const[p,g]=Y.useState(null);Y.useEffect(()=>{const F=new Date().toISOString().split("T")[0];s(fe=>({...fe,date:F}))},[s]);const v=F=>F?F.charAt(0).toUpperCase()+F.slice(1):"",S=F=>{s({...n,from:v(F.target.value)})},w=F=>{s({...n,to:v(F.target.value)})},N=()=>{p?(f(p,n),g(null)):o(n);const F=new Date().toISOString().split("T")[0];s({from:"",to:"",amount:"",date:F,notes:""})},k=F=>{s({from:F.from,to:F.to,amount:F.amount,date:F.date,notes:F.notes||""}),g(F.id)},H=e.filter(F=>F&&(F.totalAmount!=null||F.items&&F.items.length>0));H.forEach(F=>{!F.totalAmount&&F.items&&(F.totalAmount=F.items.reduce((fe,ae)=>fe+(parseFloat(ae.cost)||0),0))});const B=(F,fe)=>{const ae={},W=(C,R,I)=>{const O=`${C}->${R}`,V=`${R}->${C}`;ae[V]?ae[V]>I?ae[V]-=I:(ae[V]<I&&(ae[O]=I-ae[V]),delete ae[V]):ae[O]=(ae[O]||0)+I};return F.forEach(C=>{if(C.paidBy)if(C.splitType==="Itemized"&&C.items?.length)C.items.forEach(R=>{const I=parseFloat(R.cost)/R.participants.length;R.participants.forEach(O=>{O!==C.paidBy&&W(O,C.paidBy,I)})});else if(C.splitType==="Percentages")Object.entries(C.percentages||{}).forEach(([R,I])=>{if(R!==C.paidBy){const O=parseFloat(I)/100*C.totalAmount;W(R,C.paidBy,O)}});else{const R=C.totalAmount/C.participants.length;C.participants.forEach(I=>{I!==C.paidBy&&W(I,C.paidBy,R)})}}),fe.forEach(C=>{!C.from||!C.to||!C.amount||W(C.to,C.from,C.amount)}),Object.entries(ae).map(([C,R])=>{const[I,O]=C.split("->");return{from:I,to:O,amount:R}})},$=i.filter(F=>F&&typeof F.amount=="number"),ie=B(H,$);return b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payment History"}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg mb-6",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Who Owes Whom"}),b.jsx("ul",{className:"space-y-2",children:ie.length>0?ie.map((F,fe)=>b.jsxs("li",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg",children:[b.jsx("span",{className:"font-bold",children:F.from})," owes"," ",b.jsx("span",{className:"font-bold",children:F.to})," ",b.jsxs("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:["$",F.amount.toFixed(2)]})]},fe)):b.jsx("li",{className:"text-gray-500 dark:text-gray-400",children:"Everything is settled!"})})]}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg mb-6",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add a New Payment"}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[b.jsx("input",{type:"text",className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"From (e.g., Alex)",value:n.from,onChange:S,list:"payer-names"}),b.jsx("datalist",{id:"payer-names",children:m.map(F=>b.jsx("option",{value:v(F.name)},F.name))}),b.jsx("input",{type:"text",className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"To (e.g., Bob)",value:n.to,onChange:w,list:"payer-names"}),b.jsx("input",{type:"number",className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"Amount ($)",value:n.amount,onChange:F=>s({...n,amount:F.target.value})}),b.jsx("input",{type:"date",className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",value:n.date,onChange:F=>s({...n,date:F.target.value})})]}),b.jsx("input",{type:"text",className:"p-3 mt-4 w-full rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"Notes (e.g., for last month's rent)",value:n.notes,onChange:F=>s({...n,notes:F.target.value})}),b.jsx("button",{onClick:N,className:"mt-4 w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold shadow-md",children:p?"Update Payment":"Log Payment"})]}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Payments"}),b.jsx("ul",{className:"space-y-3",children:$.map(F=>b.jsxs("li",{className:"p-3 rounded-lg bg-gray-100 dark:bg-gray-800 flex justify-between items-center",children:[b.jsxs("div",{children:[b.jsxs("span",{className:"text-green-500",children:["$",F.amount.toFixed(2)]})," ","paid by ",F.from," to ",F.to]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>k(F),className:"text-blue-500 hover:text-blue-600",children:"Edit"}),b.jsx("button",{onClick:()=>u(F.id),className:"text-red-500 hover:text-red-600",children:"Delete"}),b.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(F.date).toLocaleDateString()})]})]},F.id))}),$.length===0&&b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No payments logged yet."})]})]})},XN=({shoppingList:i,newShoppingItemName:e,setNewShoppingItemName:n,newShoppingItemDueDate:s,setNewShoppingItemDueDate:o,addShoppingItem:u,toggleShoppingItem:f,deleteShoppingItem:m,deleteBoughtItems:p})=>b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Shared Shopping List"}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg mb-6",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add a New Item"}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[b.jsx("input",{type:"text",placeholder:"Item name (e.g., 'Tortillas')",value:e,onChange:g=>n(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(u(e,s),n(""),o(""),setNewShoppingCategory(""))},className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:ring-2 focus:ring-purple-500"}),b.jsx("input",{type:"date",value:s,onChange:g=>o(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(u(e,s),n(""),o(""),setNewShoppingCategory(""))},className:"p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:ring-2 focus:ring-purple-500"})]}),b.jsx("button",{onClick:()=>{u(e,s),n(""),o(""),setNewShoppingCategory("")},onKeyDown:g=>{g.key==="Enter"&&(u(e,s),n(""),o(""),setNewShoppingCategory(""))},className:"mt-4 w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold shadow-md",children:"Add Item"}),i.some(g=>g.isCompleted)&&b.jsx("button",{onClick:p,className:"mt-2 w-full bg-red-600 text-white p-3 rounded-lg hover:bg-red-700 transition-colors font-semibold shadow-md",children:"Delete All Bought Items"})]}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Items to Buy"}),i.length>0?b.jsx("ul",{className:"space-y-3",children:i.map(g=>b.jsxs("li",{className:`flex justify-between items-center p-3 rounded-lg transition-all ${g.isCompleted?"bg-green-100 dark:bg-green-900":"bg-gray-100 dark:bg-gray-800"}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:()=>f(g.id,g.isCompleted),className:`w-6 h-6 rounded-full border-2 transition-colors ${g.isCompleted?"border-green-500 bg-green-500":"border-gray-400"}`,children:g.isCompleted&&b.jsx(uE,{className:"w-full h-full text-white"})}),b.jsxs("div",{className:`font-medium ${g.isCompleted?"line-through text-gray-500 dark:text-gray-400":""}`,children:[g.name,g.dueDate&&b.jsxs("span",{className:"block text-xs text-gray-400 dark:text-gray-500",children:["Due: ",new Date(g.dueDate).toLocaleDateString()]})]})]}),b.jsx("button",{onClick:()=>m(g.id),className:"text-red-500 hover:text-red-600 font-semibold",children:"Delete"})]},g.id))}):b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"The list is empty!"})]})]}),WN=({expenses:i,handleExpenseModalOpen:e,deleteExpense:n})=>{const s=i.filter(u=>u&&(u.totalAmount!=null||u.items&&u.items.length>0));s.forEach(u=>{!u.totalAmount&&u.items&&(u.totalAmount=u.items.reduce((f,m)=>f+(parseFloat(m.cost)||0),0))});const o=u=>{if(u.splitType==="Itemized"&&u.items){const f=new Set;return u.items.forEach(m=>{m.participants.forEach(p=>f.add(p))}),Array.from(f).join(", ")}else if(u.participants)return u.participants.join(", ");return"N/A"};return b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Expense Tracker"}),b.jsx("button",{onClick:()=>e({}),className:"w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold shadow-md mb-6",children:"Add New Expense"}),b.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-lg",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Expense History"}),b.jsx("ul",{className:"space-y-3",children:s.length>0?s.sort((u,f)=>new Date(f.date)-new Date(u.date)).map(u=>b.jsxs("li",{className:"flex justify-between items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-800",children:[b.jsxs("div",{className:"flex-grow",children:[b.jsx("div",{className:"font-bold text-lg",children:u.description}),b.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Paid by ",u.paidBy," on"," ",u.date?new Date(u.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date"]}),b.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Split: ",u.splitType,", Total: $",u.totalAmount.toFixed(2),", Participants:"," ",o(u)]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>e(u),className:"text-purple-500 hover:text-purple-600 transition-colors",children:b.jsx(dE,{className:"w-5 h-5"})}),b.jsx("button",{onClick:()=>n(u.id),className:"text-red-500 hover:text-red-600 transition-colors",children:b.jsx(Ih,{className:"w-5 h-5"})})]})]},u.id)):b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No expenses added yet."})})]})]})},ZN=()=>{const i=ds(),e=s=>{switch(s){case"home":return"/";case"expenses":return"/expenses";case"payments":return"/payments";case"chores":return"/chores";case"shopping":return"/shopping";case"fridge":return"/fridge";default:return"/"}},n=s=>i.pathname===s;return b.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-700 p-2 overflow-x-auto",children:[b.jsxs($i,{to:e("home"),className:`flex-1 flex items-center justify-center p-3 text-sm font-medium rounded-lg transition-all duration-200 ${n("/")?"bg-purple-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[b.jsx(jS,{className:"w-5 h-5 mr-2"}),"Home"]}),b.jsxs($i,{to:e("expenses"),className:`flex-1 flex items-center justify-center p-3 text-sm font-medium rounded-lg transition-all duration-200 ${n("/expenses")?"bg-purple-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[b.jsx(hE,{className:"w-5 h-5 mr-2"}),"Expenses"]}),b.jsxs($i,{to:e("payments"),className:`flex-1 flex items-center justify-center p-3 text-sm font-medium rounded-lg transition-all duration-200 ${n("/payments")?"bg-purple-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[b.jsx(BS,{className:"w-5 h-5 mr-2"}),"Payments"]}),b.jsxs($i,{to:e("chores"),className:`flex-1 flex items-center justify-center p-3 text-sm font-medium rounded-lg transition-all duration-200 ${n("/chores")?"bg-purple-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[b.jsx(fE,{className:"w-5 h-5 mr-2"}),"Chores"]}),b.jsxs($i,{to:e("shopping"),className:`flex-1 flex items-center justify-center p-3 text-sm font-medium rounded-lg transition-all duration-200 ${n("/shopping")?"bg-purple-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[b.jsx(cE,{className:"w-5 h-5 mr-2"}),"Shopping List"]}),b.jsxs($i,{to:e("fridge"),className:`flex-1 flex items-center justify-center p-3 text-sm font-medium rounded-lg transition-all duration-200 ${n("/fridge")?"bg-purple-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[b.jsx(qS,{className:"w-5 h-5 mr-2"}),"Fridge"]})]})},Vb=({show:i,onClose:e,children:n})=>i?b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:b.jsxs("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}),n]})}):null,JN=async(i,e,n,s,o,u,f,m,p,g,v,S,w,N,k,H,B,$,ie=null)=>{if(!e.trim()){alert("Please enter an expense description.");return}if(!s){alert("Please select who paid.");return}if(!n){alert("Please select a date.");return}let F=0;if(o==="Equally"||o==="Percentages"){const ae=parseFloat(p);if(!ae||ae<=0){alert("Please enter a valid amount.");return}if(!u||u.length===0){alert("Please select at least one participant.");return}if(F=ae,o==="Percentages"&&Object.values(f).reduce((C,R)=>C+(parseFloat(R)||0),0)!==100){alert("Percentages must sum to 100%.");return}}else if(o==="Itemized"){if(!m||m.length===0){alert("Please add at least one item.");return}for(const ae of m){if(!ae.name.trim()){alert("Each item must have a name.");return}const W=parseFloat(ae.cost);if(!W||W<=0){alert(`Item "${ae.name}" must have a valid cost.`);return}if(!ae.participants||ae.participants.length===0){alert(`Item "${ae.name}" must have at least one participant.`);return}F+=W}}const fe={description:e,date:n,paidBy:s,splitType:o,participants:o==="Itemized"?[]:u,percentages:o==="Percentages"?f:{},items:o==="Itemized"?m:[],totalAmount:F};try{ie?await ia(Kt(Ge,"expenses",ie),fe):await ca(Sr(Ge,"expenses"),fe),g(""),v(""),S(""),w("Equally"),N([]),k([]),H({}),B(""),$(""),i()}catch(ae){console.error("Error saving expense:",ae),alert("Something went wrong while saving the expense.")}},eD=({show:i,onClose:e,editingExpenseId:n,roommates:s,expensePaidBy:o,setExpensePaidBy:u,expenseSplitType:f,setExpenseSplitType:m,expenseDate:p,setExpenseDate:g,expenseDescription:v,setExpenseDescription:S,expenseItems:w,setExpenseItems:N,percentages:k,setPercentages:H,selectedParticipants:B,setSelectedParticipants:$,newNonRoommate:ie,setNewNonRoommate:F,expenseModalErrors:fe})=>{const[ae,W]=Y.useState(""),C=x=>x?x.charAt(0).toUpperCase()+x.slice(1):"";Y.useEffect(()=>{if(!n&&i){const x=ih.currentUser?.email;if(x&&s.length>0){const pe=s.find(de=>de.email.toLowerCase()===x.toLowerCase());pe&&u(pe.name)}}},[i,s,n,u]),Y.useEffect(()=>{(async()=>{if(!n)return;const pe=Kt(Ge,"expenses",n),de=await BC(pe);if(de.exists()){const K=de.data();S(K.description||""),g(K.date||""),u(K.paidBy||""),m(K.splitType||"Equally"),$(K.participants||[]),H(K.percentages||{}),N(K.items||[]),W(K.totalAmount||"")}})()},[n,S,g,u,m,$,H,N,W]);const R=x=>{$(pe=>pe.includes(x)?pe.filter(de=>de!==x):[...pe,x])},I=()=>{const x=C(ie.trim());x&&!B.includes(x)&&($(pe=>[...pe,x]),F(""))},O=(x,pe,de)=>{const K=[...w];pe==="cost"?K[x][pe]=parseFloat(de)||0:K[x][pe]=de,N(K)},V=(x,pe)=>{const de=C(pe);O(x,"participants",w[x].participants.includes(de)?w[x].participants.filter(K=>K!==de):[...w[x].participants,de])},U=x=>x.map(pe=>b.jsxs("button",{onClick:()=>R(pe),className:`py-2 px-4 rounded-full text-sm font-medium transition-colors relative group ${B.includes(pe)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[pe,!s.some(de=>de.name===pe)&&b.jsx("span",{onClick:de=>{de.stopPropagation(),$(K=>K.filter(oe=>oe!==pe))},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center",children:b.jsx(HS,{className:"w-3 h-3"})})]},pe));return b.jsxs(Vb,{show:i,onClose:e,children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:n?"Edit Expense":"Add a New Expense"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expense Description"}),b.jsx("input",{type:"text",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"e.g., Weekend Groceries",value:v,onChange:x=>S(x.target.value)}),fe.general&&b.jsx("p",{className:"text-red-500 text-sm mt-1",children:fe.general})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),b.jsx("input",{type:"date",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",value:p,onChange:x=>g(x.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium mb-1",children:"Who Paid?"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(x=>b.jsx("button",{onClick:()=>u(x.name),className:`py-2 px-4 rounded-full text-sm font-medium transition-colors ${o===x.name?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:x.name},x.id))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium mb-1",children:"How to Split"}),b.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["Equally","Percentages","Itemized"].map(x=>b.jsx("button",{onClick:()=>m(x),className:`flex-1 p-2 rounded-lg transition-colors ${f===x?"bg-purple-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:x==="Equally"?"Equally Split":x==="Percentages"?"Percentages":"Itemized List"},x))})]}),(f==="Equally"||f==="Percentages")&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total Amount"}),b.jsx("input",{type:"number",step:"0.01",placeholder:"Enter total cost",value:ae,onChange:x=>W(x.target.value===""?"":parseFloat(x.target.value)),className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900"})]}),b.jsx("label",{className:"block text-sm font-medium mb-1",children:"Who Was Involved?"}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:U([...s.map(x=>x.name),...B.filter(x=>!s.some(pe=>pe.name===x))])}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"text",className:"flex-grow p-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"Add non-roommate",value:ie,onChange:x=>F(x.target.value),onKeyDown:x=>x.key==="Enter"&&I()}),b.jsx("button",{onClick:I,className:"bg-purple-600 text-white p-2 rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:b.jsx(ym,{className:"w-6 h-6"})})]}),f==="Percentages"&&b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2",children:[B.map(x=>b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium mb-1",children:[x," (%)"]}),b.jsx("input",{type:"number",className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",value:k[x]||"",onChange:pe=>H({...k,[x]:pe.target.value})})]},x)),fe.percentages&&b.jsx("p",{className:"text-red-500 text-sm mt-1 col-span-full",children:fe.percentages})]})]}),f==="Itemized"&&b.jsxs("div",{className:"border border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4",children:[b.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Itemized List"}),w.map((x,pe)=>b.jsxs("div",{className:"flex flex-col gap-2 mb-4 p-2 border border-gray-200 dark:border-gray-700 rounded-lg",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"text",className:"flex-grow p-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"Item name",value:x.name,onChange:de=>O(pe,"name",de.target.value)}),b.jsx("input",{type:"number",className:"w-24 p-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"Cost",value:x.cost,onChange:de=>O(pe,"cost",de.target.value)}),b.jsx("button",{onClick:()=>N(w.filter((de,K)=>K!==pe)),className:"text-red-500 hover:text-red-600",children:b.jsx(Ih,{className:"w-5 h-5"})})]}),b.jsx("label",{className:"block text-sm font-medium mb-1",children:"Associated with:"}),b.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[s.map(de=>b.jsx("button",{onClick:()=>V(pe,de.name),className:`py-2 px-4 rounded-full text-sm font-medium transition-colors ${x.participants.includes(de.name)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:de.name},de.id)),B.filter(de=>!s.some(K=>K.name===de)).map(de=>b.jsxs("button",{onClick:()=>V(pe,de),className:`py-2 px-4 rounded-full text-sm font-medium transition-colors ${x.participants.includes(de)?"bg-purple-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[de,b.jsx("span",{onClick:K=>{K.stopPropagation(),$(oe=>oe.filter(ge=>ge!==de)),O(pe,"participants",x.participants.filter(oe=>oe!==de))},className:"ml-1 text-red-500 cursor-pointer",children:"×"})]},de))]}),b.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.jsx("input",{type:"text",className:"flex-grow p-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-900",placeholder:"Add non-roommate",value:ie,onChange:de=>F(de.target.value),onKeyDown:de=>{de.key==="Enter"&&(I(),V(pe,ie.trim()))}}),b.jsx("button",{onClick:()=>{I(),V(pe,ie.trim())},className:"bg-purple-600 text-white p-2 rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:b.jsx(ym,{className:"w-6 h-6"})})]})]},pe)),b.jsx("button",{onClick:()=>N([...w,{name:"",cost:"",participants:[]}]),className:"w-full mt-2 text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 transition-colors font-semibold",children:"Add another item"})]})]}),b.jsx("div",{className:"mt-6 flex justify-end",children:b.jsx("button",{onClick:()=>JN(e,v,p,o,f,B,k,w,parseFloat(ae)||0,S,g,u,m,$,N,H,W,F,n),className:"bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold shadow-md",children:n?"Update Expense":"Save Expense"})})]})},tD=({show:i,onClose:e,roommates:n,handleSignOut:s,userEmail:o})=>b.jsxs(Vb,{show:i,onClose:e,children:[b.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Settings"}),b.jsxs("div",{className:"space-y-6",children:[o&&b.jsxs("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg flex justify-between items-center",children:[b.jsxs("span",{children:["Signed in as: ",o]}),b.jsx("button",{onClick:s,className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition-colors",children:"Sign Out"})]}),b.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-inner",children:[b.jsx("h3",{className:"text-xl font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-2",children:"Manage Roommates"}),b.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4"}),b.jsx("ul",{className:"space-y-2",children:n.map(u=>b.jsx("li",{className:"flex justify-between items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-800",children:b.jsx("span",{className:"font-medium",children:u.name})},u.id))})]})]})]}),nD=()=>({roommates:xo(Ge,"roommates"),addRoommate:async(s,o="")=>{if(s.trim())try{await ca(Sr(Ge,"roommates"),{name:s.trim(),email:o.trim()||null})}catch(u){console.error("Error adding roommate:",u)}},deleteRoommate:async s=>{try{await fs(Kt(Ge,"roommates",s))}catch(o){console.error("Error deleting roommate:",o)}}}),rD=(i=[],e=[])=>{const n=xo(Ge,"expenses"),s=async(f,m=null)=>{try{m?await ia(Kt(Ge,"expenses",m),f):await ca(Sr(Ge,"expenses"),f)}catch(p){console.error("Error adding/updating expense:",p)}},o=async f=>{try{await fs(Kt(Ge,"expenses",f))}catch(m){console.error("Error deleting expense:",m)}},u=Y.useMemo(()=>{const f={},m=[...new Set([...i.map(v=>v.name.toLowerCase()),...n.flatMap(v=>(v.participants||[]).map(S=>S.toLowerCase())),...n.flatMap(v=>v.paidBy?[v.paidBy.toLowerCase()]:[]),...e?.flatMap(v=>[v.from,v.to].filter(Boolean).map(S=>S.toLowerCase()))||[]])];m.forEach(v=>f[v]=0);const p={};m.forEach(v=>p[v]={}),m.forEach(v=>m.forEach(S=>{v!==S&&(p[v][S]=0)})),n.forEach(v=>{const S=v.totalAmount||0,w=(v.participants||[]).map(H=>H.toLowerCase()),N=(v.paidBy||"").toLowerCase();if(!N||w.length===0)return;const k={};if(v.splitType==="Equally"){const H=S/w.length;w.forEach(B=>k[B]=H)}else v.splitType==="Percentages"?w.forEach(H=>k[H]=(v.percentages?.[H]??0)*S/100):v.splitType==="Itemized"&&(v.items||[]).forEach(H=>{const B=parseFloat(H.cost)||0,$=(H.participants||[]).map(F=>F.toLowerCase()),ie=B/($.length||1);$.forEach(F=>{k[F]=(k[F]||0)+ie})});Object.entries(k).forEach(([H,B])=>{H!==N&&(p[H][N]+=B)})}),e?.forEach(v=>{if(!v.from||!v.to||!v.amount)return;const S=v.from.toLowerCase(),w=v.to.toLowerCase();p[S]&&p[S][w]!=null&&(p[S][w]-=v.amount,p[S][w]<0&&(p[w][S]+=-p[S][w],p[S][w]=0))});const g=[];return m.forEach(v=>{m.forEach(S=>{if(v===S)return;const w=p[v][S]-p[S][v];w>0&&g.push({from:v,to:S,amount:w})})}),g.forEach(v=>{f[v.to]+=v.amount,f[v.from]-=v.amount}),{total:n.reduce((v,S)=>v+(S.totalAmount||0),0),summary:f,transactions:g}},[n,e,i]);return{expenses:n,expenseSummary:u,addOrUpdateExpense:s,deleteExpense:o}},iD=()=>({chores:xo(Ge,"chores"),addChore:async(f,m=[],p="")=>{if(!f?.trim()){alert("Please enter a chore name before submitting!");return}try{await ca(Sr(Ge,"chores"),{name:f.trim(),assignedTo:m,isCompleted:!1,date:new Date().toISOString().split("T")[0],dueDate:p})}catch(g){console.error("Error adding chore:",g)}},toggleChoreStatus:async(f,m)=>{try{await ia(Kt(Ge,"chores",f),{isCompleted:!m})}catch(p){console.error("Error updating chore:",p)}},assignChore:async(f,m)=>{try{await ia(Kt(Ge,"chores",f),{assignedTo:m})}catch(p){console.error("Error assigning chore:",p)}},deleteChore:async f=>{try{await fs(Kt(Ge,"chores",f))}catch(m){console.error("Error deleting chore:",m)}},deleteCompletedChores:async()=>{try{const f=LC(Sr(Ge,"chores"));(await tb(f)).forEach(p=>{p.data().isCompleted&&fs(Kt(Ge,"chores",p.id))})}catch(f){console.error("Error deleting completed chores:",f)}}}),sD=()=>({shoppingList:xo(Ge,"shoppingList"),addShoppingItem:async(u,f="")=>{if(!u?.trim())return alert("Item name cannot be empty");try{await ca(Sr(Ge,"shoppingList"),{name:u.trim(),isCompleted:!1,dueDate:f})}catch(m){console.error("Error adding shopping item:",m)}},toggleShoppingItem:async(u,f)=>{try{await ia(Kt(Ge,"shoppingList",u),{isCompleted:!f})}catch(m){console.error("Error updating shopping item:",m)}},deleteShoppingItem:async u=>{try{await fs(Kt(Ge,"shoppingList",u))}catch(f){console.error("Error deleting shopping item:",f)}},deleteBoughtItems:async()=>{try{(await tb(Sr(Ge,"shoppingList"))).forEach(f=>{f.data().isCompleted&&fs(Kt(Ge,"shoppingList",f.id))})}catch(u){console.error("Error deleting bought items:",u)}}}),aD=()=>({payments:xo(Ge,"payments"),addPayment:async o=>{if(!(!o.from||!o.to||!o.amount))try{await ca(Sr(Ge,"payments"),{...o,amount:parseFloat(o.amount),timestamp:Date.now()})}catch(u){console.error("Error adding payment:",u)}},deletePayment:async o=>{try{await fs(Kt(Ge,"payments",o))}catch(u){console.error("Error deleting payment:",u)}},updatePayment:async(o,u)=>{try{await ia(Kt(Ge,"payments",o),{...u,amount:parseFloat(u.amount)})}catch(f){console.error("Error updating payment:",f)}}}),oD=()=>{const[i,e]=Y.useState(null),[n,s]=Y.useState(null),[o,u]=Y.useState(!0),f=async()=>{try{const p=await JI(ih,KN);e(p.user.uid),s(p.user.email),console.log("Logged in as:",p.user.displayName,p.user.email)}catch(p){console.error("Google sign-in error:",p)}},m=async()=>{await kI(ih),e(null),s(null),console.log("User signed out")};return Y.useEffect(()=>{const p=OI(ih,g=>{g?(e(g.uid),s(g.email)):(e(null),s(null)),u(!1)});return()=>p()},[]),{userId:i,userEmail:n,loading:o,handleGoogleSignIn:f,handleSignOut:m}},lD=(i,e)=>i.reduce((n,s)=>{const o=!e.some(f=>f.name===s.from),u=!e.some(f=>f.name===s.to);if(o||u){const f=`${s.from}->${s.to}`;n[f]=(n[f]||0)+parseFloat(s.amount)}return n},{}),uD=({expense:i=null,setEditingExpenseId:e,setExpenseDescription:n,setExpensePaidBy:s,setExpenseSplitType:o,setExpenseItems:u,setPercentages:f,setSelectedParticipants:m,setExpenseDate:p,setExpenseModalErrors:g,setShowExpenseModal:v})=>{i&&i.id?(e(i.id),n(i.description||""),s(i.paidBy||""),o(i.splitType||"Equally"),u(i.items||[{name:"",cost:"",participants:[]}]),f(i.percentages||{}),m(Object.keys(i.splits||{}).filter(S=>(i.splits||{})[S]>0)),p(i.timestamp?new Date(i.timestamp).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]),g({})):(e(null),n(""),s(""),o("Equally"),u([{name:"",cost:"",participants:[]}]),f({}),m([]),p(new Date().toISOString().split("T")[0]),g({})),v(!0)};function cD(){const{roommates:i}=nD(),{payments:e,addPayment:n,deletePayment:s,updatePayment:o}=aD(),{expenses:u,expenseSummary:f,addOrUpdateExpense:m,deleteExpense:p}=rD(i,e),{chores:g,addChore:v,toggleChoreStatus:S,assignChore:w,deleteChore:N,deleteCompletedChores:k}=iD(),{shoppingList:H,groupShoppingList:B,addShoppingItem:$,toggleShoppingItem:ie,deleteShoppingItem:F,deleteBoughtItems:fe}=sD(),{fridgeInventory:ae,filteredFridgeInventory:W,newFridgeItem:C,setNewFridgeItem:R,addFridgeItem:I,updateFridgeItem:O,deleteFridgeItem:V,toggleFridgeOwner:U,fridgeFilter:x,toggleFilterOwner:pe,toggleFilterType:de}=Mb();Y.useMemo(()=>lD(e,i),[e,i]);const[K,oe]=Y.useState(""),[ge,Be]=Y.useState(""),[M,re]=Y.useState(""),[ue,se]=Y.useState(""),[_e,Ie]=Y.useState(""),[we,_t]=Y.useState({from:"",to:"",amount:"",date:"",notes:""}),[Xe,An]=Y.useState(""),[Zn,Sn]=Y.useState(!1),[Cr,Jn]=Y.useState(""),[Ir,pi]=Y.useState(""),[ha,tn]=Y.useState("Equally"),[Io,yi]=Y.useState([{name:"",cost:"",participants:[]}]),[_i,er]=Y.useState({}),[No,Nr]=Y.useState({}),[ps,ys]=Y.useState([]),[st,qe]=Y.useState(""),[nn,Ot]=Y.useState(null),[fa,da]=Y.useState(!1),{userId:Rn,userEmail:tr,loading:Dr,handleGoogleSignIn:dn,handleSignOut:vi}=oD(),Or=(mn=null)=>{uD({expense:mn,setEditingExpenseId:Ot,setExpenseDescription:Jn,setExpensePaidBy:pi,setExpenseSplitType:tn,setExpenseItems:yi,setPercentages:er,setSelectedParticipants:ys,setExpenseDate:qe,setExpenseModalErrors:Nr,setShowExpenseModal:Sn})};return Dr?b.jsx("div",{className:"flex items-center justify-center min-h-screen",children:b.jsx("p",{children:"Loading..."})}):Rn?b.jsx(IS,{children:b.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 font-sans text-gray-900 dark:text-gray-100 antialiased p-4 sm:p-8",children:b.jsxs("div",{className:"max-w-6xl mx-auto rounded-xl shadow-2xl overflow-hidden bg-white dark:bg-gray-800",children:[b.jsxs("div",{children:[b.jsxs("header",{className:"p-4 sm:p-6 bg-purple-600 text-white flex flex-col sm:flex-row justify-between items-center",children:[b.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2 sm:mb-0",children:"Roommate Hub"}),b.jsxs("div",{className:"flex items-center gap-4",children:[Rn&&b.jsxs("div",{className:"text-sm opacity-80 hidden sm:block",children:["User:"," ",b.jsx("span",{className:"font-mono break-all",children:i.find(mn=>mn.uid===Rn)?.name||tr||Rn})]}),b.jsx("button",{onClick:()=>da(!0),className:"text-white hover:text-purple-200 transition-colors p-2 rounded-full","aria-label":"Settings",children:b.jsx(zS,{className:"w-6 h-6"})})]})]}),b.jsx(ZN,{}),b.jsx("main",{className:"p-4 sm:p-8",children:b.jsxs(aS,{children:[b.jsx(Ks,{path:"/",element:b.jsx(FS,{expenseSummary:f,unpaidChoresCount:g.filter(mn=>!mn.isCompleted).length,shoppingListCount:H.filter(mn=>!mn.isCompleted).length})}),b.jsx(Ks,{path:"/expenses",element:b.jsx(WN,{expenses:u,expenseSummary:f,handleExpenseModalOpen:Or,deleteExpense:p})}),b.jsx(Ks,{path:"/chores",element:b.jsx(GS,{chores:g,newChore:ge,setNewChore:Be,addChore:v,toggleChoreStatus:S,assignChore:w,deleteChore:N,deleteCompletedChores:k,roommates:i})}),b.jsx(Ks,{path:"/shopping",element:b.jsx(XN,{shoppingList:H,groupShoppingList:B,newShoppingCategory:M,setNewShoppingCategory:re,newShoppingItemName:ue,setNewShoppingItemName:se,newShoppingItemDueDate:_e,setNewShoppingItemDueDate:Ie,addShoppingItem:$,toggleShoppingItem:ie,deleteShoppingItem:F,deleteBoughtItems:fe})}),b.jsx(Ks,{path:"/payments",element:b.jsx($N,{payments:e,expenses:u,newPayment:we,setNewPayment:_t,addPayment:n,deletePayment:s,updatePayment:o,roommates:i})}),b.jsx(Ks,{path:"/fridge",element:b.jsx(YN,{fridgeInventory:ae,filteredFridgeInventory:W,newFridgeItem:C,setNewFridgeItem:R,addFridgeItem:I,updateFridgeItem:O,deleteFridgeItem:V,toggleFridgeOwner:U,fridgeFilter:x,toggleFilterOwner:pe,toggleFilterType:de,roommates:i})})]})})]}),b.jsx(eD,{show:Zn,onClose:()=>Sn(!1),editingExpenseId:nn,roommates:i,addExpense:m,expensePaidBy:Ir,setExpensePaidBy:pi,expenseSplitType:ha,setExpenseSplitType:tn,expenseDate:st,setExpenseDate:qe,expenseDescription:Cr,setExpenseDescription:Jn,expenseItems:Io,setExpenseItems:yi,percentages:_i,setPercentages:er,selectedParticipants:ps,setSelectedParticipants:ys,newNonRoommate:Xe,setNewNonRoommate:An,expenseModalErrors:No,setExpenseModalErrors:Nr}),b.jsx(tD,{show:fa,onClose:()=>da(!1),roommates:i,handleSignOut:vi,userEmail:tr})]})})}):b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[b.jsx("h1",{className:"text-3xl mb-4",children:"Roommate Hub"}),b.jsx("button",{onClick:dn,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Sign in with Google"})]})}gA.createRoot(document.getElementById("root")).render(b.jsx(Y.StrictMode,{children:b.jsx(cD,{})}));
